<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>cgi.hpp</title>
  </head>

  <body BGCOLOR="#FFFFFF">
  <pre><font color = "red">// File name: justcgi.hpp
// Description: Demonstrate the basic CGI classes and functions
<font color = "green">
#ifndef CGI_HPP
#define CGI_HPP

#include &lt;cgi/cgiapp.hpp>
#include &lt;cgi/ncbires.hpp>
<font color = "blue">
BEGIN_NCBI_SCOPE
</font></font></font>
<font color="blue">class</font> CCgiApp : public CCgiApplication
{
public:
    virtual CNcbiResource* LoadResource(void);
    virtual int ProcessRequest(CCgiContext& context);
};

<font color="blue">class</font> CCgiResource : public CNcbiResource
{
public:

    CCgiResource(CNcbiRegistry& config)
      : CNcbiResource(config) {}

    virtual ~CCgiResource() {};   
   
    // defines the command to be executed when no other command matches
    virtual CNcbiCommand* GetDefaultCommand( void ) const;
    
};

<font color="blue">class</font> CCgiCommand : public CNcbiCommand
{
public:
  
    CCgiCommand( CNcbiResource& resource ) : CNcbiCommand(resource) {};
    virtual ~CCgiCommand( void ) {};

    virtual void Execute( CCgiContext& ctx );
    virtual string GetLink(CCgiContext&) const { return NcbiEmptyString; }

protected:

    CCgiResource& GetCgiResource() const
        { 
	  return dynamic_cast&lt;CCgiResource&>( GetResource() ); 
	}

    virtual string GetEntry() const { return string("cmd"); }
};

<font color="blue">class</font> CCgiBasicCommand : public CCgiCommand
{
public:

    CCgiBasicCommand(CNcbiResource& resource) : CCgiCommand(resource) {};
    virtual ~CCgiBasicCommand(void) {};

    virtual CNcbiCommand* Clone( void ) const;
    virtual string GetName( void ) const { return string("init"); };

protected:

    virtual string GetEntry() const { return string("cmd1"); }
};

<font color="blue">class</font> CCgiReplyCommand : public CCgiBasicCommand
{
public:

    CCgiReplyCommand( CNcbiResource& resource) : CCgiBasicCommand(resource) {};
    virtual ~CCgiReplyCommand(void) {};

    virtual CNcbiCommand* Clone( void ) const;
    virtual string GetName( void ) const { return string("reply"); };

protected:

    virtual string GetEntry() const { return string("cmd2"); }
};
<font color="blue">
END_NCBI_SCOPE <font color="green">
#endif /* CGI_HPP */
