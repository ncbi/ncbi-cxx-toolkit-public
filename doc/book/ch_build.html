<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Working with Makefiles - The NCBI C++ Toolkit Book [Internet] - NCBI</title><meta name="description" content="A comprehensive manual on the NCBI C++ toolkit, including its design and development framework, a C++ library reference, software examples and demos, FAQs and release notes." /><meta name="robots" content="index,nofollow,noarchive" /><meta name="page_id" content="ch_build" /><meta name="page_type" content="chapter" /><meta name="ncbipopper" content="triggerPosition:'bottom left',destPosition:'top left',openEvent:'click',closeEvent:'click'" /><script type="text/javascript" src="js/jig/1.7/js/jig.min.js"></script><script type="text/javascript" src="js/toolkitSymbolSearch.js"></script><link type="text/css" rel="stylesheet" href="css/ptbooks.css" /><link type="text/css" rel="stylesheet" href="css/toolkit.css" /></head><body><div class="grid no_max_width"><div class="col twelve_col nomargin shadow"><div class="content"><div class="col eight_col"><div class="nvgtn"><a href="#__nav_cntnt" class="jig-ncbipopper">Contents ▾</a><div style="display:none;width:700px;height:500px;overflow:auto;" id="__nav_cntnt"><a class="right" href="toc.html">Table of Contents Page</a><ul class="simple-list"><li class="half_rhythm"><a href="toolkit.fm.html">Book Information</a></li><li class="half_rhythm"><a href="part1.html">Part 1. Overview</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_intro.html">1. Introduction to the C++ Toolkit</a></li><li class="half_rhythm"><a href="ch_start.html">2. Getting Started</a></li></ul></li><li class="half_rhythm"><a href="part2.html">Part 2. Development Framework</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_getcode_svn.html">3. Retrieve the Source Code (FTP and Subversion)</a></li><li class="half_rhythm"><a href="ch_config.html">4. Configure, Build, and Use the Toolkit</a></li><li class="half_rhythm"><a href="ch_build.html">5. Working with Makefiles</a></li><li class="half_rhythm"><a href="ch_proj.html">6. Project Creation and Management</a></li><li class="half_rhythm"><a href="ch_style.html">7. Programming Policies and Guidelines</a></li></ul></li><li class="half_rhythm"><a href="part3.html">Part 3. C++ Toolkit Library Reference</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_core.html">8. Portability, Core Functionality and Application Framework</a></li><li class="half_rhythm"><a href="ch_conn.html">9. Networking and IPC</a></li><li class="half_rhythm"><a href="ch_dbapi.html">10. Database Access - SQL, Berkley DB</a></li><li class="half_rhythm"><a href="ch_cgi.html">11. CGI and Fast-CGI </a></li><li class="half_rhythm"><a href="ch_html.html">12. HTML</a></li><li class="half_rhythm"><a href="ch_ser.html">13. Data Serialization (ASN.1, XML)</a></li><li class="half_rhythm"><a href="ch_datamod.html">14. Biological Sequence Data Model</a></li><li class="half_rhythm"><a href="ch_objmgr.html">15. Biological Object Manager</a></li><li class="half_rhythm"><a href="ch_blast.html">16. BLAST API</a></li><li class="half_rhythm"><a href="ch_dataaccess.html">17. Access to NCBI data</a></li><li class="half_rhythm"><a href="ch_algoalign.html">18. Biological Sequence Alignment</a></li><li class="half_rhythm"><a href="ch_gui.html">19. GUI and Graphics</a></li><li class="half_rhythm"><a href="ch_boost.html">20. Using the Boost Unit Test Framework</a></li></ul></li><li class="half_rhythm"><a href="part4.html">Part 4. Wrappers for 3rd-Party Packages</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_xmlwrapp.html">21. XmlWrapp (XML parsing and handling, XSLT, XPath)</a></li></ul></li><li class="half_rhythm"><a href="part5.html">Part 5. Software</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_debug.html">22. Debugging, Exceptions, and Error Handling</a></li><li class="half_rhythm"><a href="ch_grid.html">23. Distributed Computing</a></li><li class="half_rhythm"><a href="ch_app.html">24. Applications</a></li><li class="half_rhythm"><a href="ch_demo.html">25. Examples and Demos</a></li><li class="half_rhythm"><a href="ch_res.html">26. C Toolkit Resources for C++ Toolkit Users</a></li></ul></li><li class="half_rhythm"><a href="part6.html">Part 6. Help and Support</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_browse.html">27. NCBI C++ Toolkit Source Browser</a></li><li class="half_rhythm"><a href="ch_devtools.html">28. Software Development Tools</a></li><li class="half_rhythm"><a href="ch_xmlauthor.html">29. XML Authoring using Word</a></li><li class="half_rhythm"><a href="ch_faq.html">30. FAQs, Useful Documentation Links, and Mailing Lists</a></li></ul></li><li class="half_rhythm"><a href="part7.html">Part 7. Library and Applications Configuration</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_libconfig.html">31. Library Configuration</a></li></ul></li><li class="half_rhythm"><a href="part8.html">Release Notes</a><ul class="simple-list"><li class="half_rhythm"><a href="release_notes.html">Release Notes (Version 9, May 2012)</a></li><li class="half_rhythm"><a href="release_notes_7-05_2011.html">Release Notes (Version 7, May 2011)</a></li><li class="half_rhythm"><a href="release_notes_06_29_2010.html">Release Notes (June, 2010)</a></li><li class="half_rhythm"><a href="release_notes_05_15_2009.html">Release Notes (May, 2009)</a></li><li class="half_rhythm"><a href="release_notes_12_24_2008.html">Release Notes (December, 2008)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2008.html">Release Notes (March, 2008)</a></li><li class="half_rhythm"><a href="release_notes_08_27_2007.html">Release Notes (August, 2007)</a></li><li class="half_rhythm"><a href="release_notes_03_12_2007.html">Release Notes (March, 2007)</a></li><li class="half_rhythm"><a href="release_notes_08_14_2006.html">Release Notes (August, 2006)</a></li><li class="half_rhythm"><a href="release_notes_04_30_2006.html">Release Notes (April 30, 2006)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2005.html">Release Notes (December 31, 2005)</a></li><li class="half_rhythm"><a href="release_notes_10_03_2005.html">Release Notes (August, 2005)</a></li><li class="half_rhythm"><a href="release_notes_05_05_2005.html">Release Notes (April, 2005)</a></li><li class="half_rhythm"><a href="release_notes_03_09_2005.html">Release Notes (February, 2005)</a></li><li class="half_rhythm"><a href="release_notes_11_22_2004.html">Release Notes (November 22, 2004)</a></li><li class="half_rhythm"><a href="release_notes_10_2_2004.html">Release Notes (October 2, 2004)</a></li><li class="half_rhythm"><a href="release_notes_7_8_2004.html">Release Notes (July 8, 2004)</a></li><li class="half_rhythm"><a href="release_notes_april_16_2004.html">Release Notes (April 16, 2004)</a></li><li class="half_rhythm"><a href="release_notes_12_08_2003.html">Release Notes (December 8, 2003)</a></li><li class="half_rhythm"><a href="release_notes_08_01_2003.html">Release Notes (August 1, 2003)</a></li></ul></li><li class="half_rhythm"><a href="app1.appendix1.html">Appendix - Books and Styles</a></li></ul></div><div class="pagination"><a class="pagelink active prev" title="Previous page" href="ch_config.html">&lt; Prev</a><a class="pagelink active next" title="Next page" href="ch_proj.html">Next &gt;</a></div></div><div class="meta_content"><h1><span class="label">5</span><span class="title">Working with Makefiles</span></h1></div><div class="body_content"><div class="sec"><h2><span class="title">Overview</span></h2><p>The overview for this chapter consists of the following topics:</p><ul><li><p>Introduction</p></li><li><p>Chapter Outline</p></li></ul><div class="sec"><h3><span class="title">Introduction</span></h3><p>Building executables and libraries for a large, integrated set of software tools such as the C++ Toolkit, and doing so consistently on different platforms and architectures, is a daunting task. Therefore, the Toolkit developers have expended considerable effort to design a build system based upon the <span class="nctnt ncbi-app">make</span> utility as controlled by <span class="nctnt ncbi-monospace">makefiles</span>. Although it is, of course, possible to write one's own Toolkit <span class="nctnt ncbi-monospace">makefile</span> from scratch, it is seldom desirable. To take advantage of the experience, wisdom, and alchemy invested in Toolkit and to help avoid often inscrutable compilation issues:</p><blockquote id="idp12865232"><p><b>We strongly advise users to work with the Toolkit's make system.</b></p></blockquote><p>With minimal manual editing (and after invoking the <a href="ch_config.html">configure</a> script in your build tree), the build system adapts to your environment, compiler options, defines all relevant <span class="nctnt ncbi-monospace">makefile</span> macros and targets, allows for recursive builds of the entire Toolkit and targeted builds of single modules, and handles many other details that can confound manual builds. </p></div><div class="sec"><h3><span class="title">Chapter Outline</span></h3><p>The following is an outline of the topics presented in this chapter:</p><ul><li><p><a href="ch_build.html#ch_build.major_makefiles">Major Makefiles </a></p></li><li><p><a href="ch_build.html#ch_build.makefiles_hierarch">Makefile Hierarchy </a></p></li><li><p><a href="ch_build.html#ch_build.makefiles_meta">Meta-Makefiles</a></p><ul><li><p><a href="ch_build.html#ch_build.makefile_in">Makefile.in Meta Files</a></p></li><li><p><a href="ch_build.html#ch_build.expendable_proj">Expendable Projects</a></p></li></ul></li><li><p><a href="ch_build.html#ch_build.build_proj_makefiles">Project Makefiles </a></p><ul><li><p><a href="ch_build.html#ch_build.packages_opt">List of Optional Packages, Features, and Projects</a></p></li></ul></li><li><p><a href="ch_build.html#ch_build.std_build_targets">Standard Build Targets </a></p><ul><li><p><a href="ch_build.html#ch_build.build_meta_makefiles">Meta-Makefile Targets</a></p></li><li><p><a href="ch_build.html#ch_build.build_make_proj_target">Makefile Targets</a></p></li></ul></li><li><p><a href="ch_build.html#ch_build.build_make_macros">Makefile Macros and Makefile.mk</a></p></li><li><p><a href="ch_build.html#ch_build.build_make_examples">Example Makefiles </a></p></li></ul></div></div><div class="sec" id="ch_build.major_makefiles"><h2><span class="title">Major Makefiles</span></h2><p>Before describing the make system in detail, we list the major types of <span class="nctnt ncbi-monospace">makefiles</span> used by the Toolkit:</p><ul><li><p><span class="nctnt ncbi-monospace">meta-makefiles</span>. These files exist for each project and tie the project together in the Toolkit hierarchy; defining those applications and libraries as a project is necessary for (possibly recursively) building.</p></li></ul><p><b>Generic </b><span class="nctnt ncbi-monospace">makefile</span><b> Templates</b> (<span class="nctnt ncbi-path">Makefile*.in</span>). The <span class="nctnt ncbi-app">configure</span> script processes these files from the src hierarchy to substitute for the special tags <span class="nctnt ncbi-var">"@some_name@"</span> and make other specializations required for a given project. Note that <span class="nctnt ncbi-monospace">meta-makefiles</span> are typically derived from such templates.</p><ul><li><p><b>Customized </b><span class="nctnt ncbi-monospace">makefiles</span>. (<span class="nctnt ncbi-path">Makefile.*.[lib|app]</span>) For each library or application, this file gives specific targets, compiler flags, and other project-specific build instructions. These files appear in the <span class="nctnt ncbi-path">src</span> hierarchy.</p></li><li><p><b>Configured </b><span class="nctnt ncbi-monospace">makefiles</span>. (<span class="nctnt ncbi-path">Makefile</span>) A <span class="nctnt ncbi-monospace">makefile</span> generated by <span class="nctnt ncbi-app">configure</span> for each project and sub-project and placed in the appropriate location in the build tree ready for use will be called a “<span class="nctnt ncbi-monospace">configured makefile</span>”. Note that <span class="nctnt ncbi-monospace">meta-makefiles</span> in the build tree may be considered “configured”.</p></li></ul></div><div class="sec" id="ch_build.makefiles_hierarch"><h2><span class="title">Makefile Hierarchy</span></h2><p>All Toolkit <span class="nctnt ncbi-monospace">makefiles</span> reside in either the <span class="nctnt ncbi-path">src</span> directory as templates or customized files, or in the appropriate configured form in each of your <span class="nctnt ncbi-path">&lt;builddir&gt;</span> hierarchies as illustrated in <a href="ch_build.html#ch_build.F1">Figure 1</a></p><div class="figure" id="ch_build.F1"><div class="graphic"><img src="img/make.gif" alt="Figure 1. Makefile hierarchy." /></div><div class="caption"><p>Figure 1. Makefile hierarchy.</p></div></div><p>Most of the files listed in <a href="ch_build.html#ch_build.F1">Figure 1</a> are templates from the <span class="nctnt ncbi-path">src</span> directory, with each corresponding <span class="nctnt ncbi-monospace">configured makefile</span> at the top of the build tree. Of these, <span class="nctnt ncbi-path">&lt;builddir&gt;/Makefile</span> can be considered the master <span class="nctnt ncbi-monospace">makefile</span> in that it can recursively build the entire Toolkit. The role of each top-level <span class="nctnt ncbi-monospace">makefile</span> template is summarized as follows:</p><ul><li><p><span class="nctnt ncbi-path">Makefile.in</span> - makefile to perform a recursive build in all project subdirectories.</p></li><li><p><span class="nctnt ncbi-path">Makefile.meta.in</span> - included by all makefiles that provide both local and recursive builds.</p></li><li><p><span class="nctnt ncbi-path">Makefile.mk.in</span> - included by all makefiles; sets a lot of configuration variables.</p></li><li><p><span class="nctnt ncbi-path">Makefile.lib.in</span> - included by all makefiles that perform a "standard" library build, when building only static libraries.</p></li><li><p><span class="nctnt ncbi-path">Makefile.dll.in</span> - included by all makefiles that perform a "standard" library build, when building only shared libraries.</p></li><li><p><span class="nctnt ncbi-path">Makefile.both.in</span> - included by all makefiles that perform a "standard" library build, when building both static and shared libraries.</p></li><li><p><span class="nctnt ncbi-path">Makefile.lib.tmpl.in</span> - serves as a template for the project <span class="nctnt ncbi-monospace">customized makefiles</span> (<span class="nctnt ncbi-path">Makefile.*.lib[.in]</span>) that perform a "standard" library build.</p></li><li><p><span class="nctnt ncbi-path">Makefile.app.in</span> - included by all makefiles that perform a "standard" application build.</p></li><li><p><span class="nctnt ncbi-path">Makefile.app.tmpl.in</span> - serves as a template for the project <span class="nctnt ncbi-monospace">customized makefiles</span> (<span class="nctnt ncbi-path">Makefile.*.app[.in]</span>) that perform a "standard" application build.</p></li><li><p><span class="nctnt ncbi-path">Makefile.rules.in, Makefile.rules_with_autodep.in</span> -- instructions for building object files; included by most other makefiles.</p></li></ul><p>The project-specific portion of the <span class="nctnt ncbi-monospace">makefile</span> hierarchy is represented in the figure by the <span class="nctnt ncbi-monospace">meta-makefile</span> template <span class="nctnt ncbi-path">c++/src/myProj/Makefile.in</span>, the customized makefile <span class="nctnt ncbi-path">c++/src/myProj/Makefile.myProj.[app|lib]</span> (not shown), and the configured makefile <span class="nctnt ncbi-path">c++/myBuild/build/myProj/Makefile</span>. In fact, every project and sub-project in the Toolkit has analogous files specialized to its project; in most circumstances, every new or user project should emulate this file structure to be compatible with the make system.</p></div><div class="sec" id="ch_build.makefiles_meta"><h2><span class="title">Meta-Makefiles</span></h2><p>A typical <span class="nctnt ncbi-monospace">meta-makefile</span> template (e.g. <span class="nctnt ncbi-path">Makefile.in</span> in your <span class="nctnt ncbi-path">foo/c++/src/bar_proj/</span> dir) looks like this:</p><pre><span class="nctnt-pre ncbi-code"># Supply Makefile.bar_u1, Makefile.bar_u2 ...<br />#<br />USR_PROJ = bar_u1 bar_u2 ...<br /><br /># Supply Makefile.bar_l1.lib, Makefile.bar_l2.lib ...<br />#<br />LIB_PROJ = bar_l1 bar_l2 ...<br /><br /># Supply Makefile.bar_a1.app, Makefile.bar_a2.app ...<br />#<br />APP_PROJ = bar_a1 bar_a2 ...<br /><br /># Subprojects<br />#<br />SUB_PROJ = app sub_proj1 sub_proj2<br /><br />srcdir = @srcdir@<br />include @builddir@/Makefile.meta</span></pre><p>This template separately specifies instructions for user, library and application projects, along with a set of three sub-projects that can be made. The mandatory final two lines <span class="nctnt ncbi-code">"srcdir = @srcdir@; include @builddir@/Makefile.meta"</span> define the <a href="ch_build.html#ch_build.std_build_targets">standard build targets</a>.</p><div class="sec" id="ch_build.makefile_in"><h3><span class="title">Makefile.in Meta Files</span></h3><p>The <span class="nctnt ncbi-path">Makefile.in</span> meta-make file in the project's source directory defines a kind of road map that will be used by the <span class="nctnt ncbi-app">configure</span> script to generate a makefile (<span class="nctnt ncbi-path">Makefile</span>) in the corresponding directory of the <span class="nctnt ncbi-monospace">build tree</span>. <span class="nctnt ncbi-path">Makefile.in</span> does <b>not</b> participate in the actual execution of <span class="nctnt ncbi-app">make</span>, but rather, defines what will happen at that time by directing the <span class="nctnt ncbi-app">configure</span> script in the creation of the <span class="nctnt ncbi-path">Makefile</span> that will be executed (see also the description of <a href="ch_build.html#ch_build.std_build_targets">standard build targets</a> below).</p><p>The meta-makefile <span class="nctnt ncbi-path">myProj/Makefile.in</span> should define at least one of the following macros:</p><ul><li><p><span class="nctnt ncbi-var">USR_PROJ</span> (optional) - a list of names for user-defined makefiles. This macro is provided for the usage of ordinary stand-alone makefiles which do not utilize the make commands contained in additional makefiles in the top-level <span class="nctnt ncbi-path">build</span> directory. Each <span class="nctnt ncbi-monospace">p_i</span> listed in <span class="nctnt ncbi-code">USR_PROJ = p_1 ... p_N</span> must have a corresponding Makefile.p_i in the project's source directory. When <span class="nctnt ncbi-app">make</span> is executed, the <span class="nctnt ncbi-app">make</span> directives contained in these files will be executed directly to build the targets as specified.</p></li><li><p><span class="nctnt ncbi-var">LIB_PROJ</span> (optional) - a list of names for library makefiles. For each library <span class="nctnt ncbi-monospace">l_i</span> listed in <span class="nctnt ncbi-code">LIB_PROJ = l_1 ... l_N</span>, you must have created a corresponding project makefile named Makefile.l_i.lib in the project's source directory. When <span class="nctnt ncbi-app">make</span> is executed, these library project makefiles will be used along with <span class="nctnt ncbi-path">Makefile.lib</span> and <span class="nctnt ncbi-path">Makefile.lib.tmpl</span> (located in the top-level of the <span class="nctnt ncbi-monospace">build tree</span>) to build the specified libraries.</p></li><li><p><span class="nctnt ncbi-var">ASN_PROJ</span> (optional) is like <span class="nctnt ncbi-var">LIB_PROJ</span>, with one additional feature: Any projects listed there will be interpreted as the names of ASN.1 module specifications to be processed by <a href="ch_app.html#ch_app.datatool">datatool</a>.</p></li><li><p><span class="nctnt ncbi-var">APP_PROJ</span> (optional) - a list of names for application makefiles. Similarly, each application (<span class="nctnt ncbi-monospace">p1, p2, ..., pN</span>) listed under <span class="nctnt ncbi-var">APP_PROJ</span> must have a corresponding project makefile named <span class="nctnt ncbi-path">Makefile.p*.app</span> in the project's source directory. When <span class="nctnt ncbi-app">make</span> is executed, these application project makefiles will be used along with <span class="nctnt ncbi-path">Makefile.app</span> and <span class="nctnt ncbi-path">Makefile.app.tmpl</span> to build the specified executables.</p></li><li><p><span class="nctnt ncbi-var">SUB_PROJ</span> (optional) - a list of names for subproject directories (used on recursive makes). The <span class="nctnt ncbi-var">SUB_PROJ</span> macro is used to recursively define <span class="nctnt ncbi-app">make</span> targets; items listed here define the subdirectories rooted in the project's source directory where <span class="nctnt ncbi-app">make</span> should also be executed.</p></li></ul><p>Some additional <span class="nctnt ncbi-monospace">meta-makefile</span> macros (listed in <a href="ch_build.html#ch_build.T1">Table 1</a>) exist to specify various directory paths that <span class="nctnt ncbi-app">make</span> needs to know. The "@"-delimited tokens are substituted during configuration based on your environment and any command-line options passed to <span class="nctnt ncbi-app">configure</span>.</p><div class="table" id="ch_build.T1"><div class="caption"><p>Table 1. Path Specification Makefile Macros</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Macro</th><th align="left" valign="top" rowspan="1" colspan="1">Source</th><th align="left" valign="top" rowspan="1" colspan="1">Synopsis</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">top_srcdir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@top_srcdir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the whole NCBI C++ package</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">srcdir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@srcdir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Directory in the <span class="nctnt ncbi-monospace">source tree</span> that corresponds to the directory (<span class="nctnt ncbi-path">./</span>) in the <span class="nctnt ncbi-monospace">build tree</span> where the build is currently going on</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">includedir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@includedir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Top include directory in the <span class="nctnt ncbi-monospace">source tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">build_root</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@build_root@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the whole <span class="nctnt ncbi-monospace">build tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">builddir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@builddir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Top build directory inside the <span class="nctnt ncbi-monospace">build tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">incdir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@incdir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Top include directory inside the <span class="nctnt ncbi-monospace">build tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">libdir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@libdir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Libraries built inside the <span class="nctnt ncbi-monospace">build tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">bindir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@bindir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Executables built inside the <span class="nctnt ncbi-monospace">build tree</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">status_dir</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@status_dir@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Configuration status files</td></tr></tbody></table></div></div><div class="sec" id="ch_build.expendable_proj"><h3><span class="title">Expendable Projects</span></h3><p>By default, failure of any project will cause make to exit immediately. Although this behavior can save a lot of time, it is not always desirable. One way to avoid it is to run <span class="nctnt ncbi-cmd">make -k</span> rather than <span class="nctnt ncbi-cmd">make</span>, but then major problems affecting a large portion of the build will still waste a lot of time.</p><p>Consequently, the toolkit's build system supports an alternative approach: <a href="ch_build.html#ch_build.makefiles_meta">meta-makefiles</a> can define <span class="nctnt ncbi-monospace">expendable</span> projects which should be built if possible but are allowed to fail without interrupting the build. The way to do this is to list such projects in <span class="nctnt ncbi-var">EXPENDABLE_*_PROJ</span> rather than <span class="nctnt ncbi-var">*_PROJ</span>.</p></div></div><div class="sec" id="ch_build.build_proj_makefiles"><h2><span class="title">Project Makefiles</span></h2><p>When beginning a new project, the <a href="ch_proj.html#ch_proj.new_project_Starting">new_project</a> shell script will generate an initial makefile, <span class="nctnt ncbi-path">Makefile.&lt;project_name&gt;_app</span>, that you can modify as needed. In addition, a working sample application can also be checked out to experiment with or as an alternate template.</p><p>The <a href="ch_getcode_svn.html#ch_getcode_svn.import_project_sh">import_project</a> script is useful for working on existing Toolkit projects without needing to build the whole Toolkit. In this case things are particularly straightforward as the project will be retrieved complete with its <span class="nctnt ncbi-monospace">makefile</span> already configured as <span class="nctnt ncbi-path">Makefile.&lt;project_name&gt;_[app|lib]</span>. (Note that there is an underscore in the name, not a period as in the similarly-named <span class="nctnt ncbi-monospace">customizable makefile</span> from which the configured file is derived.)</p><p><b>If you are working outside of the source tree:</b> In this scenario you are only linking to the Toolkit libraries and will not need to run the <span class="nctnt ncbi-app">configure</span> script, so a <span class="nctnt ncbi-path">Makefile.in</span> template <span class="nctnt ncbi-monospace">meta-makefile</span> is not required. Some of the typical edits required for the <span class="nctnt ncbi-monospace">customized makefile</span> are shown in the section on <a href="ch_proj.html#ch_proj.outside_tree_makefile">working in a separate directory</a>.</p><p><b>If you are working within the source tree or subtree:</b> Project subdirectories that do not contain any <span class="nctnt ncbi-path">*.in</span> files are ignored by the <span class="nctnt ncbi-app">configure</span> script. Therefore, you will now also need to create a <span class="nctnt ncbi-monospace">meta-makefile</span> for the newly created project before configuring your <span class="nctnt ncbi-path">build</span> directory to include the new project.</p><p>Several examples are detailed on the "<a href="ch_proj.html#ch_proj.make_proj_lib">Starting New Projects</a>" section.</p><div class="sec" id="ch_build.packages_opt"><h3><span class="title">List of optional packages, features and projects</span></h3><p><a href="ch_build.html#ch_build.T2">Table 2</a> displays the keywords you can list in <span class="nctnt ncbi-var">REQUIRES</span> in a customized <a href="ch_proj.html#ch_proj.make_proj_app">application</a> or <a href="ch_proj.html#ch_proj.make_proj_lib">library</a> makefile, along with the corresponding <a href="ch_config.html#ch_config.ch_configprohibit_sy">configure options</a>:</p><div class="table" id="ch_build.T2"><div class="caption"><p>Table 2. Optional Packages, Features, and Projects</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Keyword</th><th align="left" valign="top" rowspan="1" colspan="1">Optional...</th><th align="left" valign="top" rowspan="1" colspan="1">Configure option(s)</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"></td><td align="left" valign="top" rowspan="1" colspan="1">...package</td><td align="left" valign="top" rowspan="1" colspan="1"></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">Sybase</span></td><td align="left" valign="top" rowspan="1" colspan="1">Sybase libraries</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-sybase, --with-sybase-local(=DIR), --with-sybase-new</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">FreeTDS</span></td><td align="left" valign="top" rowspan="1" colspan="1">FreeTDS libraries</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-ftds, --with-ftds=DIR</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">Fast-CGI</span></td><td align="left" valign="top" rowspan="1" colspan="1">Fast-CGI library</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-fastcgi</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">FLTK</span></td><td align="left" valign="top" rowspan="1" colspan="1">the Fast Light ToolKit</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-fltk, --with-fltk=DIR</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">wxWindows</span></td><td align="left" valign="top" rowspan="1" colspan="1">wxWindows</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-wxwin, --with-wxwin=DIR</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">C-Toolkit</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI C Toolkit</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-ncbi-c</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">SSSDB</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI SSS DB library</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-sssdb, --without-sss</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">SSSUTILS</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI SSS UTILS library</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-sssutils, --without-sss</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">GEO</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI GEO libraries</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-geo</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">SP</span></td><td align="left" valign="top" rowspan="1" colspan="1">SP libraries</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-sp</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">PubMed</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI PubMed libraries</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-pubmed</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">ORBacus</span></td><td align="left" valign="top" rowspan="1" colspan="1">ORBacus CORBA</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-orbacus, --with-orbacus=DIR</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"></td><td align="left" valign="top" rowspan="1" colspan="1">...feature</td><td align="left" valign="top" rowspan="1" colspan="1"></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">MT</span></td><td align="left" valign="top" rowspan="1" colspan="1">multithreading is available</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--with-mt</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"></td><td align="left" valign="top" rowspan="1" colspan="1">...project(s)</td><td align="left" valign="top" rowspan="1" colspan="1"></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">serial</span></td><td align="left" valign="top" rowspan="1" colspan="1">ASN.1/XML serialization library and datatool</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-serial</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">ctools</span></td><td align="left" valign="top" rowspan="1" colspan="1">projects based on the NCBI C toolkit</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-ctools</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">gui</span></td><td align="left" valign="top" rowspan="1" colspan="1">projects that use the wxWindows GUI package</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-gui</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">objects</span></td><td align="left" valign="top" rowspan="1" colspan="1">libraries to serialize ASN.1/XML objects</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--with-objects</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">app</span></td><td align="left" valign="top" rowspan="1" colspan="1">standalone applications like ID1_FETCH</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--with-app</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">internal</span></td><td align="left" valign="top" rowspan="1" colspan="1">all internal projects</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--with-internal</span></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-code">local_lbsm</span></td><td align="left" valign="top" rowspan="1" colspan="1">IPC with locally running LBSMD</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">--without-local-lbsm</span></td></tr></tbody></table></div></div></div><div class="sec" id="ch_build.std_build_targets"><h2><span class="title">Standard Build Targets</span></h2><p>The following topics are discussed in this section:</p><ul><li><p><a href="ch_build.html#ch_build.build_meta_makefiles">Meta-Makefile Targets</a></p></li><li><p><a href="ch_build.html#ch_build.build_make_proj_target">Makefile Targets</a></p></li></ul><div class="sec" id="ch_build.build_meta_makefiles"><h3><span class="title">Meta-Makefile Targets</span></h3><p>The mandatory lines from the <a href="ch_build.html#ch_build.makefiles_meta">meta-makefile example above</a>,</p><pre><span class="nctnt-pre ncbi-code">srcdir = @srcdir@<br />include @builddir@/Makefile.meta</span></pre><p>provide the build rules for the following standard <span class="nctnt ncbi-monospace">meta-makefile</span> targets:</p><ul><li><p>all:</p><ul><li><p>run <span class="nctnt ncbi-cmd">"make -f {Makefile.*} all"</span> for the makefiles with the suffixes listed in macro <span class="nctnt ncbi-var">USR_PROJ</span>:<br /><span class="nctnt ncbi-code">make -f Makefile.bar_u1 all make -f Makefile.bar_u2 all ......</span></p></li><li><p>build libraries using attributes defined in the <span class="nctnt ncbi-monospace">customized makefiles</span><span class="nctnt ncbi-path">Makefile.*.lib</span> with the suffixes listed in macro <span class="nctnt ncbi-var">LIB_PROJ</span></p></li><li><p>build application(s) using attributes defined in the <span class="nctnt ncbi-monospace">customized makefiles</span><span class="nctnt ncbi-path">Makefile.*.app</span> with the suffixes listed in macro <span class="nctnt ncbi-var">APP_PROJ</span></p></li></ul></li><li><p>all_r -- first make target <span class="nctnt ncbi-cmd">all</span>, then run <span class="nctnt ncbi-cmd">"make all_r"</span> in all subdirectories enlisted in <span class="nctnt ncbi-var">$(SUB_PROJ)</span>:<br /><span class="nctnt ncbi-code">cd bar_test      &amp;&amp; make -f Makefile all_r cd bar_sub_proj1 &amp;&amp; make -f Makefile all_r ......</span></p></li><li><p>clean, clean_r -- run just the same makefiles but with targets <span class="nctnt ncbi-cmd">clean</span> and <span class="nctnt ncbi-cmd">clean_r</span> (rather than <span class="nctnt ncbi-cmd">all</span> and <span class="nctnt ncbi-cmd">all_r</span>), respectively</p></li><li><p>purge, purge_r -- .....with targets <span class="nctnt ncbi-cmd">purge</span> and <span class="nctnt ncbi-cmd">purge_r</span>, respectively</p></li></ul></div><div class="sec" id="ch_build.build_make_proj_target"><h3><span class="title">Makefile Targets</span></h3><p>The standard build targets for Toolkit <span class="nctnt ncbi-monospace">makefiles</span> are <span class="nctnt ncbi-cmd">all, clean</span> and <span class="nctnt ncbi-cmd">purge</span>. Recall that recursive versions of these targets exist for <span class="nctnt ncbi-monospace">meta-makefiles</span>.</p><ul><li><p><span class="nctnt ncbi-cmd">all</span> -- compile the object modules specified in the <span class="nctnt ncbi-var">"$(OBJ)"</span> macro, and use them to build the library <span class="nctnt ncbi-var">"$(LIB)"</span> or the application <span class="nctnt ncbi-var">"$(APP)"</span>; then copy the resultant [<span class="nctnt ncbi-path">lib|app</span>] to the [<a href="ch_build.html#ch_build.T1">libdir|bindir</a>] directory, respectively</p></li><li><p><span class="nctnt ncbi-cmd">clean</span> -- remove all object modules and libs/apps that have been built by <span class="nctnt ncbi-cmd">all</span></p></li><li><p><span class="nctnt ncbi-cmd">purge</span> -- do <span class="nctnt ncbi-cmd">clean</span>, and then remove the copy of the [<span class="nctnt ncbi-path">libs|apps</span>] from the [<a href="ch_build.html#ch_build.T1">libdir|bindir</a>] directory.</p></li></ul><p>The <span class="nctnt ncbi-monospace">customized makefiles</span> do not distinguish between recursive (<span class="nctnt ncbi-cmd">all_r, clean_r, purge_r</span>) and non-recursive (<span class="nctnt ncbi-cmd">all, clean, purge</span>) targets -- because the recursion and multiple build is entirely up to the <a href="ch_build.html#ch_build.makefiles_meta">meta-makefiles</a>.</p></div></div><div class="sec" id="ch_build.build_make_macros"><h2><span class="title">Makefile Macros and <span class="nctnt ncbi-path">Makefile.mk</span></span></h2><p>There is a wide assortment of configured tools, flags, third party packages and <a href="ch_build.html#ch_build.T1">paths (see above)</a>. They can be specified for the whole build tree with the appropriate entry in <span class="nctnt ncbi-path">Makefile.mk</span>, which is silently included at the very beginning of the <span class="nctnt ncbi-monospace">customized makefiles</span> used to build <a href="ch_proj.html#ch_proj.make_proj_lib">libraries</a> and <a href="ch_proj.html#ch_proj.make_proj_app">applications</a>.</p><p>Many <span class="nctnt ncbi-monospace">makefile</span> macros are supplied with defaults <span class="nctnt ncbi-var">ORIG_*</span> in <span class="nctnt ncbi-path">Makefile.mk</span>. See the list of <span class="nctnt ncbi-var">ORIG_*</span> macros, and all others currently defined, in the <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/build-system/Makefile.mk.in">Makefile.mk.in</a> template for details. One should not override these defaults in normal use, but add your own flags to them as needed in the corresponding working macro; e.g., set <span class="nctnt ncbi-code">CXX = $(ORIG_CXX) -DFOO_BAR</span>.</p><p><span class="nctnt ncbi-path">Makefile.mk</span> defines the following <span class="nctnt ncbi-monospace">makefile</span> macros obtained during the configuration process for flags (see <a href="ch_build.html#ch_build.T3">Table 3</a>), system and third-party packages (see <a href="ch_build.html#ch_build.T4">Table 4</a>) and development tools (see <a href="ch_build.html#ch_build.T5">Table 5</a>).</p><div class="table" id="ch_build.T3"><div class="caption"><p>Table 3. Flags</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Macro</th><th align="left" valign="top" rowspan="1" colspan="1"><a href="ch_config.html#ch_config.ref_TableToolsAndFlags">Source</a></th><th align="left" valign="top" rowspan="1" colspan="1"><a href="ch_config.html#ch_config.ch_configconfig_flag">Synopsis</a></th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">C compiler flags</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">FAST_CFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$FAST_CFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><a href="ch_build.html#ch_build.build_make_macros">(*)</a> C compiler flags to generate faster code </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CXXFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CXXFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">C++ compiler flags</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">FAST_CXXFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$FAST_CXXFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><a href="ch_build.html#ch_build.build_make_macros">(*)</a> C++ compiler flags to generate faster code</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CPPFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CPPFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">C/C++ preprocessor flags</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">DEPFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$DEPFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Flags for file dependency lists</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">LDFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$LDFLAGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Linker flags</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">LIB_OR_DLL</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@LIB_OR_DLL@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Specify whether to build a library as static or dynamic</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">STATIC</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@STATIC@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Library suffix to force static linkage (see <a href="ch_proj.html#ch_proj.make_proj_app">example</a>)</td></tr></tbody></table></div><div class="table" id="ch_build.T4"><div class="caption"><p>Table 4. System and third-party packages</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Macro</th><th align="left" valign="top" rowspan="1" colspan="1">Source</th><th align="left" valign="top" rowspan="1" colspan="1">Synopsis</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Default libraries to link with</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">PRE_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$PRE_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">??? Default libraries to link with first</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">THREAD_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$THREAD_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Thread library (system)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NETWORK_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NETWORK_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Network library (system)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">MATH_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$MATH_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Math library (system)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">KSTAT_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$KSTAT_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">KSTAT library (system)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">RPCSVC_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$RPCSVC_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">RPCSVC library (system)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">SYBASE_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$SYBASE_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1">SYBASE headers</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">SYBASE_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$SYBASE_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">SYBASE libraries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">FASTCGI_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$FASTCGI_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1">Fast-CGI headers</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">FASTCGI_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$FASTCGI_LIBS</span></td><td align="left" valign="top" rowspan="1" colspan="1">Fast-CGI libraries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_C_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_C_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI C toolkit headers</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_C_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_C_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the NCBI C Toolkit libraries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_C_ncbi</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_C_ncbi</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI C CoreLib</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_SSS_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_SSS_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1">NCBI SSS headers</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_SSS_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_SSS_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to NCBI SSS libraries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">NCBI_PM_PATH</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$NCBI_PM_PATH</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the PubMed package</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">ORBACUS_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$ORBACUS_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the ORBacus CORBA libraries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">ORBACUS_INCLUDE</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$ORBACUS_LIBPATH</span></td><td align="left" valign="top" rowspan="1" colspan="1">Path to the ORBacus CORBA headers</td></tr></tbody></table></div><div class="table" id="ch_build.T5"><div class="caption"><p>Table 5. Compiler, Linker, and other development Tools</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Macro</th><th align="left" valign="top" rowspan="1" colspan="1"><a href="ch_config.html#ch_config.ref_TableToolsAndFlags">Source</a></th><th align="left" valign="top" rowspan="1" colspan="1"><a href="ch_config.html#ch_config.ch_configconfig_flag">Synopsis</a></th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CC</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CC</span></td><td align="left" valign="top" rowspan="1" colspan="1">C compiler</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CXX</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CXX</span></td><td align="left" valign="top" rowspan="1" colspan="1">C++ compiler</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">LINK</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CXX</span></td><td align="left" valign="top" rowspan="1" colspan="1">Linker (C++-aware)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CPP</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CPP</span></td><td align="left" valign="top" rowspan="1" colspan="1">C preprocessor</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CXXCPP</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$CXXCPP</span></td><td align="left" valign="top" rowspan="1" colspan="1">C++ preprocessor</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">AR</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$AR</span></td><td align="left" valign="top" rowspan="1" colspan="1">Library archiver</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">STRIP</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">$STRIP</span></td><td align="left" valign="top" rowspan="1" colspan="1">Tool to strip symbolic info from binaries</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">RM</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">rm -f</span></td><td align="left" valign="top" rowspan="1" colspan="1">Remove file(s)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">RMDIR</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">rm -rf</span></td><td align="left" valign="top" rowspan="1" colspan="1">Remove file(s) and directory(ies) recursively</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">COPY</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-cmd">cp -p</span></td><td align="left" valign="top" rowspan="1" colspan="1">Copy file (preserving the modification time)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CC_FILTER</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@CC_FILTER@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Filters for the C compiler</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CXX_FILTER</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@CXX_FILTER@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Filters for the C++ compiler</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">CHECK_ARG</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@CHECK_ARG@</span></td><td align="left" valign="top" rowspan="1" colspan="1"></td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">LN_S</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@LN_S@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Make a symbolic link if possible; otherwise, hard-link or copy</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">BINCOPY</span></td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">@BINCOPY@</span></td><td align="left" valign="top" rowspan="1" colspan="1">Copy a library or an executable -- but only if it was changed</td></tr></tbody></table></div><p>(*) The values of user-specified environment variables <span class="nctnt ncbi-var">$FAST_CFLAGS, $FAST_CXXFLAGS</span> will substitute the regular optimization flag <span class="nctnt ncbi-cmd">-O</span> (or <span class="nctnt ncbi-cmd">-O2</span>, etc.). For example, if in the environment: <span class="nctnt ncbi-var">$FAST_CXXFLAGS</span>=<span class="nctnt ncbi-monospace">-fast -speedy</span> and <span class="nctnt ncbi-var">$CXXFLAGS</span>=<span class="nctnt ncbi-monospace">-warn -O3 -std</span>, then in makefile: <span class="nctnt ncbi-var">$(FAST_CXXFLAGS)</span>=<span class="nctnt ncbi-monospace">-warn -fast -speedy -std</span>.</p></div><div class="sec" id="ch_build.build_make_examples"><h2><span class="title">Example Makefiles</span></h2><p>Below are links to examples of typical <span class="nctnt ncbi-monospace">makefiles</span>, complete with descriptions of their content.</p><ul><li><p>Inside the Tree</p><ul><li><p><a href="ch_proj.html#ch_proj.inside_example">An example meta-makefile and its associated project makefiles</a></p></li><li><p><a href="ch_proj.html#ch_proj.inside_lib_make">Library project makefile: Makefile.myProj.lib</a></p></li><li><p><a href="ch_proj.html#ch_proj.inside_app_make">Application project makefile: Makefile.myProj.app</a></p></li><li><p><a href="ch_proj.html#ch_proj.inside_cust_make">Custom project makefile: Makefile.myProj</a></p></li></ul></li><li><p>New Projects and Outside the Tree</p><ul><li><p><a href="ch_proj.html#ch_proj.new_project_Starting">Use Shell Scripts to Create Makefiles</a></p></li><li><p><a href="ch_proj.html#ch_proj.make_proj_lib">Customized makefile to build a library</a></p></li><li><p><a href="ch_proj.html#ch_proj.make_proj_app">Customized makefile to build an application</a></p></li><li><p><a href="ch_proj.html#ch_proj.usr_def_makefile">User-defined makefile to build... whatever</a></p></li></ul></li></ul></div></div></div><div class="col four_col last"><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>In this page</h3></div></div><div class="portlet_content"><ul><li><a href="#ch_build.major_makefiles">Major Makefiles</a></li><li><a href="#ch_build.makefiles_hierarch">Makefile Hierarchy</a></li><li><a href="#ch_build.makefiles_meta">Meta-Makefiles</a></li><li><a href="#ch_build.build_proj_makefiles">Project Makefiles</a></li><li><a href="#ch_build.std_build_targets">Standard Build Targets</a></li><li><a href="#ch_build.build_make_macros">Makefile Macros and Makefile.mk</a></li><li><a href="#ch_build.build_make_examples">Example Makefiles</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Download</h3></div></div><div class="portlet_content"><ul><li><a href="pdf/ch_build.pdf">PDF version of this page</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Search</h3></div></div><div class="portlet_content"><form name="frmSymbolSearch" onsubmit="return SymbolSearch('toolkit')" action="/" id="frmSymbolSearch"><table><tbody><tr align="center" valign="middle"><td colspan="2" nowrap="nowrap"><input name="__symbol" size="22" style="vertical-align:                                          middle;" onkeypress="SymbolSearchKeyPress('toolkit',event)" type="text" />   <input value="Search" style="vertical-align: middle;" onclick="javasrcipt:SymbolSearch('toolkit');" type="button" /></td></tr><tr class="internal-only"><th style="text-align:left">Public</th><th style="text-align:left">Internal</th></tr><tr><td><input id="pToolkitAll" name="__symboloc" type="radio" checked="checked" /><span title="Search in the C/C++ source code and in this Book">All</span></td><td class="internal-only"><input id="iToolkitAll" name="__symboloc" type="radio" /><span title="Search in the C/C++ source code,  this Book, and Wiki">All</span></td></tr><tr><td><input id="pLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td><td class="internal-only"><input id="iLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td></tr><tr><td><input id="pLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td><td class="internal-only"><input id="iLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td></tr></tbody></table></form></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Source Browsers</h3></div></div><div class="portlet_content"><ul><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">LXR</a></li><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">Doxygen</a></li><li class="internal-only">LXR: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/lxr/ident">internal</a></li><li class="internal-only">Doxygen: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/doxyhtml">internal</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>SVN Source Repository</h3></div></div><div class="portlet_content"><ul><li><a href="http://www.ncbi.nlm.nih.gov/bookshelf/br.fcgi?book=toolkit&amp;part=ch_getcode_svn#ch_getcode_svn.code_retrieval">Server</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/c++">Web
                            (dev)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/internal/c++">Web
                            (extra)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/production/components">Web (prod)</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Resources</h3></div></div><div class="portlet_content"><ul><li class="internal-only"><a href="http://intranet.ncbi.nlm.nih.gov/wiki-private/CxxToolkit">Wiki</a></li><li class="internal-only"><a href="http://jira/browse/CXX">JIRA</a></li><li class="internal-only"><a href="http://intranet/ieb/ToolBox/STAT/test_stat/test_stat_ext.cgi"><span title="View results of testsuite runs on the automatic C++ Toolkit builds">Testsuite</span></a></li><li><a href="release_notes.html">Release Notes</a></li><li><a href="ch_getcode_svn.html#ch_getcode_svn.ftp_download">Download</a></li><li><a href="pdf/TOC.pdf">PDF of the book</a></li><li><a href="ch_style.html">Coding Style</a></li><li><a href="ch_faq.html#ch_faq.mailing_lists">Mailing Lists</a></li><li><a href="mailto:CPP-CORE@NCBI.NLM.NIH.GOV"><span title="Contact C++ Toolkit group">Help and Support</span></a></li></ul></div></div></div></div></div></div></body></html>
