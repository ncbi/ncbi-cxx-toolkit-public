<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>CGI and Fast-CGI - The NCBI C++ Toolkit Book [Internet] - NCBI</title><meta name="description" content="A comprehensive manual on the NCBI C++ toolkit, including its design and development framework, a C++ library reference, software examples and demos, FAQs and release notes." /><meta name="robots" content="index,nofollow,noarchive" /><meta name="page_id" content="ch_cgi" /><meta name="page_type" content="chapter" /><meta name="ncbipopper" content="triggerPosition:'bottom left',destPosition:'top left',openEvent:'click',closeEvent:'click'" /><script type="text/javascript" src="js/jig/1.7/js/jig.min.js"></script><script type="text/javascript" src="js/toolkitSymbolSearch.js"></script><link type="text/css" rel="stylesheet" href="css/ptbooks.css" /><link type="text/css" rel="stylesheet" href="css/toolkit.css" /></head><body><div class="grid no_max_width"><div class="col twelve_col nomargin shadow"><div class="content"><div class="col eight_col"><div class="nvgtn"><a href="#__nav_cntnt" class="jig-ncbipopper">Contents â–¾</a><div style="display:none;width:700px;height:500px;overflow:auto;" id="__nav_cntnt"><a class="right" href="toc.html">Table of Contents Page</a><ul class="simple-list"><li class="half_rhythm"><a href="toolkit.fm.html">Book Information</a></li><li class="half_rhythm"><a href="part1.html">Part 1. Overview</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_intro.html">1. Introduction to the C++ Toolkit</a></li><li class="half_rhythm"><a href="ch_start.html">2. Getting Started</a></li></ul></li><li class="half_rhythm"><a href="part2.html">Part 2. Development Framework</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_getcode_svn.html">3. Retrieve the Source Code (FTP and Subversion)</a></li><li class="half_rhythm"><a href="ch_config.html">4. Configure, Build, and Use the Toolkit</a></li><li class="half_rhythm"><a href="ch_build.html">5. Working with Makefiles</a></li><li class="half_rhythm"><a href="ch_proj.html">6. Project Creation and Management</a></li><li class="half_rhythm"><a href="ch_style.html">7. Programming Policies and Guidelines</a></li></ul></li><li class="half_rhythm"><a href="part3.html">Part 3. C++ Toolkit Library Reference</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_core.html">8. Portability, Core Functionality and Application Framework</a></li><li class="half_rhythm"><a href="ch_conn.html">9. Networking and IPC</a></li><li class="half_rhythm"><a href="ch_dbapi.html">10. Database Access - SQL, Berkley DB</a></li><li class="half_rhythm"><a href="ch_cgi.html">11. CGI and Fast-CGI </a></li><li class="half_rhythm"><a href="ch_html.html">12. HTML</a></li><li class="half_rhythm"><a href="ch_ser.html">13. Data Serialization (ASN.1, XML)</a></li><li class="half_rhythm"><a href="ch_datamod.html">14. Biological Sequence Data Model</a></li><li class="half_rhythm"><a href="ch_objmgr.html">15. Biological Object Manager</a></li><li class="half_rhythm"><a href="ch_blast.html">16. BLAST API</a></li><li class="half_rhythm"><a href="ch_dataaccess.html">17. Access to NCBI data</a></li><li class="half_rhythm"><a href="ch_algoalign.html">18. Biological Sequence Alignment</a></li><li class="half_rhythm"><a href="ch_gui.html">19. GUI and Graphics</a></li><li class="half_rhythm"><a href="ch_boost.html">20. Using the Boost Unit Test Framework</a></li></ul></li><li class="half_rhythm"><a href="part4.html">Part 4. Wrappers for 3rd-Party Packages</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_xmlwrapp.html">21. XmlWrapp (XML parsing and handling, XSLT, XPath)</a></li></ul></li><li class="half_rhythm"><a href="part5.html">Part 5. Software</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_debug.html">22. Debugging, Exceptions, and Error Handling</a></li><li class="half_rhythm"><a href="ch_grid.html">23. Distributed Computing</a></li><li class="half_rhythm"><a href="ch_app.html">24. Applications</a></li><li class="half_rhythm"><a href="ch_demo.html">25. Examples and Demos</a></li><li class="half_rhythm"><a href="ch_res.html">26. C Toolkit Resources for C++ Toolkit Users</a></li></ul></li><li class="half_rhythm"><a href="part6.html">Part 6. Help and Support</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_browse.html">27. NCBI C++ Toolkit Source Browser</a></li><li class="half_rhythm"><a href="ch_devtools.html">28. Software Development Tools</a></li><li class="half_rhythm"><a href="ch_xmlauthor.html">29. XML Authoring using Word</a></li><li class="half_rhythm"><a href="ch_faq.html">30. FAQs, Useful Documentation Links, and Mailing Lists</a></li></ul></li><li class="half_rhythm"><a href="part7.html">Part 7. Library and Applications Configuration</a><ul class="simple-list"><li class="half_rhythm"><a href="ch_libconfig.html">31. Library Configuration</a></li></ul></li><li class="half_rhythm"><a href="part8.html">Release Notes</a><ul class="simple-list"><li class="half_rhythm"><a href="release_notes.html">Release Notes (Version 9, May 2012)</a></li><li class="half_rhythm"><a href="release_notes_7-05_2011.html">Release Notes (Version 7, May 2011)</a></li><li class="half_rhythm"><a href="release_notes_06_29_2010.html">Release Notes (June, 2010)</a></li><li class="half_rhythm"><a href="release_notes_05_15_2009.html">Release Notes (May, 2009)</a></li><li class="half_rhythm"><a href="release_notes_12_24_2008.html">Release Notes (December, 2008)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2008.html">Release Notes (March, 2008)</a></li><li class="half_rhythm"><a href="release_notes_08_27_2007.html">Release Notes (August, 2007)</a></li><li class="half_rhythm"><a href="release_notes_03_12_2007.html">Release Notes (March, 2007)</a></li><li class="half_rhythm"><a href="release_notes_08_14_2006.html">Release Notes (August, 2006)</a></li><li class="half_rhythm"><a href="release_notes_04_30_2006.html">Release Notes (April 30, 2006)</a></li><li class="half_rhythm"><a href="release_notes_12_31_2005.html">Release Notes (December 31, 2005)</a></li><li class="half_rhythm"><a href="release_notes_10_03_2005.html">Release Notes (August, 2005)</a></li><li class="half_rhythm"><a href="release_notes_05_05_2005.html">Release Notes (April, 2005)</a></li><li class="half_rhythm"><a href="release_notes_03_09_2005.html">Release Notes (February, 2005)</a></li><li class="half_rhythm"><a href="release_notes_11_22_2004.html">Release Notes (November 22, 2004)</a></li><li class="half_rhythm"><a href="release_notes_10_2_2004.html">Release Notes (October 2, 2004)</a></li><li class="half_rhythm"><a href="release_notes_7_8_2004.html">Release Notes (July 8, 2004)</a></li><li class="half_rhythm"><a href="release_notes_april_16_2004.html">Release Notes (April 16, 2004)</a></li><li class="half_rhythm"><a href="release_notes_12_08_2003.html">Release Notes (December 8, 2003)</a></li><li class="half_rhythm"><a href="release_notes_08_01_2003.html">Release Notes (August 1, 2003)</a></li></ul></li><li class="half_rhythm"><a href="app1.appendix1.html">Appendix - Books and Styles</a></li></ul></div><div class="pagination"><a class="pagelink active prev" title="Previous page" href="ch_dbapi.html">&lt; Prev</a><a class="pagelink active next" title="Next page" href="ch_html.html">Next &gt;</a></div></div><div class="meta_content"><h1><span class="label">11</span><span class="title">CGI and Fast-CGI </span></h1><p class="small">Created: January 1, 2005; Last Update: March 21, 2011.</p></div><div class="body_content"><div class="sec"><h2><span class="title">Overview </span></h2><p>The overview for this chapter consists of the following topics: </p><ul><li><p>Introduction </p></li><li><p>Chapter Outline </p></li></ul><div class="sec"><h3><span class="title">Introduction</span></h3> <p><b>CGI and Fast-CGI </b> [Libraries <span class="nctnt ncbi-path">xcgi</span> and <span class="nctnt ncbi-path">xfcgi</span>: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi">include </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi">src </a>]  </p><p>These library classes represent an <a href="ch_cgi.html#ch_cgi.cgi_class_overview">integrated framework </a> with which to write CGI applications and are designed to help retrieve and parse an HTTP request and then to compose and deliver an HTTP response. (See also this additional <a href="ch_cgi.html#ch_cgi.">class reference documentation </a>). <span class="nctnt ncbi-path">xfcgi</span> is a FastCGI version of <span class="nctnt ncbi-path">xcgi</span>. </p><p><span class="nctnt highlight">Hint:</span> Requires the target executable to be linked with a third-party FastCGI library, as in: </p><p><a href="ch_proj.html#ch_proj.make_proj_app">LIBS </a><span class="nctnt ncbi-code"> = $(FASTCGI_LIBS) $(ORIG_LIBS)</span>. </p><p><span class="nctnt highlight">Hint:</span> On non-FastCGI capable platforms (or if run as a plain CGI on a FastCGI-capable platform), it works the same as a plain CGI. </p><p>CGI Interface </p><ul><li><p><a href="ch_cgi.html#ch_cgi.cgi_app_class">Basic CGI Application Class </a> (includes <a href="ch_cgi.html#ch_cgi.cgi_diag.html">CGI Diagnostic Handling </a>) cgiapp[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/cgiapp.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/cgiapp.cpp">.cpp </a>]  </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_app_context">CGI Application Context Classes </a> cgictx[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/cgictx.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/cgictx.cpp">.cpp </a>]  </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_req">HTTP Request Parser </a> ncbicgi[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/ncbicgi.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/ncbicgi.cpp">.cpp </a>]  </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_cookies">HTTP Cookies </a> ncbicgi[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/ncbicgi.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/ncbicgi.cpp">.cpp </a>]  </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_resp">HTTP Response Generator </a> ncbicgir[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/ncbicgir.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/ncbicgir.cpp">.cpp </a>]  </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_res_class">Basic CGI Resource Class </a> ncbires[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/include/cgi/ncbires.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/ncbires.cpp">.cpp </a>]  </p></li></ul><p><span class="nctnt ncbi-type">FastCGI</span> CGI Interface </p><ul><li><p>Adapter Between C++ and FastCGI Streams fcgibuf[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/fcgibuf.hpp">.hpp </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/fcgibuf.cpp">.cpp </a>]  </p></li><li><p>Fast-CGI Loop Function fcgi_run[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/fcgi_run.cpp">.cpp </a>]  </p></li><li><p>Plain CGI Stub for the Fast-CGI Loop Function cgi_run[<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/cgi_run.cpp">.cpp </a>]  </p></li></ul><p><b>Demo Cases </b> [<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/demo">src/cgi/demo </a> | <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/sample/app/cgi/">C++/src/sample/app/cgi/ </a>] </p><p><b>Test Cases </b> [<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/test">src/cgi/test </a>] </p><p>.  </p></div><div class="sec"><h3><span class="title">Chapter Outline</span></h3> <p>The following is an outline of the topics presented in this chapter: </p></div><p><a href="#ch_cgi.cg_develop_apps">Developing CGI applications </a> </p><ul><li><p><a href="#ch_cgi.cgi_class_overview">Overview of the CGI classes  </a> </p></li><li><p><a href="#ch_cgi.cgi_app_class">The CCgiApplication class  </a> </p></li><li><p><a href="#ch_cgi.cgi_res_class">The CNcbiResource and CNcbiCommand classes  </a> </p></li><li><p><a href="#ch_cgi.cgi_http_req">The CCgiRequest class  </a> </p></li><li><p><a href="#ch_cgi.cgi_http_resp">The CCgiResponse class  </a> </p></li><li><p><a href="#ch_cgi.cgi_http_cookies">The CCgiCookie class  </a> </p></li><li><p><a href="#ch_cgi.cgi_cookies_class">The CCgiCookies class  </a> </p></li><li><p><a href="#ch_cgi.cgi_app_context">The CCgiContext class  </a> </p></li><li><p><a href="#ch_cgi.The_CCgiUserAgent_cl">The CCgiUserAgent class </a> </p></li><li><p><a href="#ch_cgi.cgi_examples">Example code using the CGI classes  </a> </p></li><li><p><a href="#ch_cgi.cgi_reg_config">CGI Registry configuration</a></p></li><li><p><a href="#ch_cgi.appendix">Supplementary Information</a></p></li></ul><p><a href="#ch_cgi.cgi_diag.html">CGI Diagnostic Handling </a> </p><ul><li><p><a href="#ch_cgi.cgi_diag.html_ref_destination">diag-destination </a> </p></li><li><p><a href="#ch_cgi.cgi_diag.html_ref_threshold">diag-threshold </a> </p></li><li><p><a href="#ch_cgi.cgi_diag.html_ref_format">diag-format </a> </p></li></ul><p><a href="#ch_cgi.">NCBI C++ CGI Classes </a> </p><ul><li><p><a href="#ch_cgi.prog_man_cgi_1_14">CCgiRequest </a> </p></li><li><p><a href="#ch_cgi.prog_man_cgi_1_15">CCgiResponse </a> </p></li><li><p><a href="#ch_cgi.prog_man_cgi_1_16">CCgiCookie </a> </p></li><li><p><a href="#ch_cgi.prog_man_cgi_1_17">CCgiCookies </a> </p></li></ul><p><a href="#ch_cgi.html">An example web-based CGI application </a> </p><ul><li><p><a href="#ch_cgi.intro">Introduction </a> </p></li><li><p><a href="#ch_cgi.descrip">Program description </a> </p></li><li><p><a href="#ch_cgi.design">Program design: Distributing the work </a> </p></li></ul><p><a href="#ch_cgi.cgi_response_codes">CGI Response Codes</a></p><p><a href="#ch_cgi.FCGI_Redirection_and_Debugging_C">FCGI Redirection and Debugging C++ Toolkit CGI Programs</a></p></div><div class="sec" id="ch_cgi.cg_develop_apps"><h2><span class="title">Developing CGI applications </span></h2><ul><li><p><a href="ch_cgi.html#ch_cgi.cgi_class_overview">Overview of the CGI classes  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_app_class">The CCgiApplication class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_res_class">The CNcbiResource and CNcbiCommand classes  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_req">The CCgiRequest class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_resp">The CCgiResponse class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_http_cookies">The CCgiCookie class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_cookies_class">The CCgiCookies class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_app_context">The CCgiContext class  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.The_CCgiUserAgent_cl">The CCgiUserAgent class </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_examples">Example code using the CGI classes  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.cgi_reg_config">CGI Registry configuration</a></p></li><li><p><a href="ch_cgi.html#ch_cgi.appendix">Supplementary Information</a></p></li></ul><p>Although CGI programs are generally run as web applications with HTML interfaces, this section of the Programming Manual places emphasis on the CGI side of things, omitting HTML details of the implementation where possible. Similarly, the section on <a href="ch_html.html#ch_html.webpgs.html">Generating web pages </a> focuses largely on the usage of HTML components independent of CGI details. The two branches of the NCBI C++ Toolkit hierarchy are all but independent of one another - with but one explicit hook between them: the constructors for HTML <a href="ch_html.html#ch_html.page_classes">page </a> components accept a <span class="nctnt ncbi-class">CCgiApplication</span> as an optional argument. This <span class="nctnt ncbi-class">CCgiApplication</span> argument provides the HTML page component with access to all of the CGI objects used in the application.  </p><p>Further discussion of combining a CGI application with the HTML classes can be found in the section on <a href="ch_cgi.html#ch_cgi.html">An example web-based CGI application </a>. The focus in this chapter is on the CGI classes only. For additional information about the CGI classes, the reader is also referred to the discussion of <a href="ch_cgi.html#ch_cgi.">NCBI C++ CGI Classes </a> in the Reference Manual. </p><div class="sec" id="ch_cgi.cgi_class_overview"><h3><span class="title">The CGI classes </span></h3><p><a href="ch_cgi.html#ch_cgi.F1">Figure 1 </a> illustrates the layered design of the CGI classes. </p><div class="figure" id="ch_cgi.F1"><div class="graphic"><img src="img/cgi.gif" alt="Figure 1. Layered design of the CGI classes" /></div><div class="caption"><p>Figure 1. Layered design of the CGI classes </p></div></div><p>This design is best described by starting with a consideration of the capabilities one might need to implement a CGI program, including:  </p><ul><li><p>A way to retrieve and store the current values of environment variables </p></li><li><p>A means of retrieving and interpreting the client's query request string </p></li><li><p>Mechanisms to service and respond to the requested query </p></li><li><p>Methods and data structures to obtain, store, modify, and send cookies </p></li><li><p>A way to set/reset the context of the application (for Fast-CGI)  </p></li></ul><p>The <span class="nctnt ncbi-class">CCgiContext</span> class unifies these diverse capabilities under one aggregate structure. As their names suggest, the <span class="nctnt ncbi-class">CCgiRequest</span> class receives and parses the request, and the <span class="nctnt ncbi-class">CCgiResponse</span> class outputs the response on an output stream. All incoming <span class="nctnt ncbi-class">CCgiCookie</span>s are also parsed and stored by the <span class="nctnt ncbi-class">CCgiRequest</span> object, and the outgoing cookies are sent along with the response by the <span class="nctnt ncbi-class">CCgiResponse</span> object. The request is actually processed by the application's <span class="nctnt ncbi-class">CNcbiResource</span>. The list of <span class="nctnt ncbi-class">CNcbiCommand</span>s stored with that resource object are scanned to find a matching command, which is then executed.  </p><p>The <span class="nctnt ncbi-class">CCgiContext</span> object, which is a <span class="nctnt ncbi-code">friend</span> to the <span class="nctnt ncbi-class">CCgiApplication</span> class, orchestrates this sequence of events in coordination with the application object. The same application may be run in many different contexts, but the <span class="nctnt ncbi-monospace">resource</span> and defined set of <span class="nctnt ncbi-monospace">commands</span> are invariant. What changes with each context is the request and its associated response. </p><p>The <span class="nctnt ncbi-class">CCgiApplication</span> class is a specialization of <span class="nctnt ncbi-class">CNcbiApplication</span>. <a href="ch_cgi.html#ch_cgi.F2">Figure 2 </a> illustrates the adaptation of the <span class="nctnt ncbi-func">Init()</span> and <span class="nctnt ncbi-func">Run()</span> member functions inherited from the <span class="nctnt ncbi-class">CNcbiApplication</span> class to the requirements of CGI programming. Although the application is <span class="nctnt ncbi-monospace">contained</span> in the context, it is the application which creates and initializes each context in which it participates. The program arguments and environmental variables are passed along to the context, where they will be stored, thus freeing the application to be restarted in a new context, as in Fast-CGI.  </p><div class="figure" id="ch_cgi.F2"><div class="graphic"><img src="img/cgirun.gif" alt="Figure 2. Adapting the init() and run() methods inherited from CNcbiApplication" /></div><div class="caption"><p>Figure 2. Adapting the init() and run() methods inherited from CNcbiApplication </p></div></div><p>The application's <span class="nctnt ncbi-func">ProcessRequest</span> member function is an abstract function that must be implemented for each application project. In most cases, this function will access the query and the environment variables via the <span class="nctnt ncbi-class">CCgiContext</span>, using <span class="nctnt ncbi-func">ctx.GetRequest()</span> and <span class="nctnt ncbi-func">ctx.GetConfig()</span>. The application may then service the request using its resource's <span class="nctnt ncbi-func">HandleRequest()</span> method. The context's response object can then be used to send an appropriate response. </p><p>These classes are described in more detail below, along with abbreviated synopses of the class definitions. These are included here to provide a conceptual framework and are not intended as reference materials. For example, constructor and destructor declarations that operate on void arguments, and <span class="nctnt ncbi-code">const</span> methods that duplicate non-const declarations are generally not included here. Certain virtual functions and data members that have no meaning outside of a web application are also omitted. For complete definitions, refer to the header files via the source browsers. </p></div><div class="sec" id="ch_cgi.cgi_app_class"><h3><span class="title">The CCgiApplication Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiApplication.html">* </a>) </span></h3><p>As mentioned, the <span class="nctnt ncbi-class">CCgiApplication</span> class implements its own version of <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=Init">Init() </a>, where it instantiates a <a href="ch_cgi.html#ch_cgi.cgi_res_class">CNcbiResource </a> object using <span class="nctnt ncbi-func">LoadResource()</span>. <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=Run">Run() </a> is no longer a pure virtual function in this subclass, and its implementation now calls <span class="nctnt ncbi-func">CreateContext(), ProcessRequest()</span>, and <span class="nctnt ncbi-func">CCgiContext::GetResponse()</span>. The <span class="nctnt ncbi-class">CCgiApplication</span> class does <b>not </b> have a <span class="nctnt ncbi-class">CCgiContext</span> data member, because the application object can participate in multiple <span class="nctnt ncbi-class">CCgiContext</span>s. Instead, a local variable in each <span class="nctnt ncbi-func">Run()</span> invocation stores a pointer to the context created there. The <span class="nctnt ncbi-func">LoadServerContext()</span> member function is used in Web applications, such as the <a href="ch_devtools.html">query </a> program, where it is necessary to store more complex run-time data with the context object. The <span class="nctnt ncbi-class">CCgiServerContext</span> object returned by this function is stored as a data member of a <span class="nctnt ncbi-class">CCgiContext</span> and is application specific.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiApplication : public CNcbiApplication <br />{ <br />    friend class CCgiContext; <br /><br />public: <br />    void Init(void); <br />    void Exit(void); <br />    int Run(void); <br /><br />    CNcbiResource&amp; GetResource(void); <br />    virtual int ProcessRequest(CCgiContext&amp;) = 0; <br />    CNcbiResource* LoadResource(void); <br />    virtual CCgiServerContext* LoadServerContext(CCgiContext&amp; context); <br /><br />    bool RunFastCGI(unsigned def_iter=3); <br /><br />protected: <br />    CCgiContext* CreateContext(CNcbiArguments*, CNcbiEnvironment*, <br />                               CNcbiIstream*, CNcbiOstream*); <br /><br />private: auto_ptr&lt;CNcbiResource&gt; m_resource; <br />};</span></pre><p>If the program was <b>not </b> compiled as a FastCGI application (or the environment does not support FastCGI), then <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=RunFastCGI">RunFastCGI() </a> will return <span class="nctnt ncbi-monospace">false</span>. Otherwise, a "FastCGI loop" will be iterated over <span class="nctnt ncbi-var">def_iter</span> times, with the initialization methods and <span class="nctnt ncbi-func">ProcessRequest()</span> function being executed on each iteration. The value returned by <span class="nctnt ncbi-func">RunFastCGI()</span> in this case is <span class="nctnt ncbi-monospace">true</span>. <span class="nctnt ncbi-func">Run()</span> first calls <span class="nctnt ncbi-func">RunFastCGI()</span>, and if that returns <span class="nctnt ncbi-monospace">false</span>, the application is run as a plain CGI program. </p></div><div class="sec" id="ch_cgi.cgi_res_class"><h3><span class="title">The CNcbiResource (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCNcbiResource.html">* </a>) and CNcbiCommand (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCNcbiCommand.html">* </a>) Classes </span></h3><p>The resource class is at the heart of the application, and it is here that the program's functionality is defined. The single argument to the resource class's constructor is a <a href="ch_core.html#ch_core.CNcbiRegistry">CNcbiRegistry </a> object, which defines data paths, resources, and possibly environmental variables for the application. This information is stored in the resource class's data member, <span class="nctnt ncbi-var">m_config</span>. The only other data member is a <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=TCmdList">TCmdList </a> (a list of <span class="nctnt ncbi-class">CNcbiCommand</span>s) called <span class="nctnt ncbi-var">m_cmd</span>.  </p><pre><span class="nctnt-pre ncbi-code">class CNcbiResource <br />{ <br />public: <br /><br />    CNcbiResource(CNcbiRegistry&amp; config); <br /><br />    CNcbiRegistry&amp;  GetConfig(void); <br />    const TCmdList&amp; GetCmdList(void) const; <br />    virtual CNcbiCommand* GetDefaultCommand(void) const = 0; <br />    virtual const CNcbiResPresentation* GetPresentation(void) const; <br /><br />    void AddCommand(CNcbiCommand* command); <br />    virtual void HandleRequest(CCgiContext&amp; ctx);<br /><br />protected: <br /><br />    CNcbiRegistry&amp; m_config; <br />    TCmdList m_cmd; <br />};</span></pre><p>The <span class="nctnt ncbi-func">AddCommand()</span> method is used when a resource is being initialized, to add commands to the command list. Given a <span class="nctnt ncbi-class">CCgiRequest</span> object defined in a particular context <span class="nctnt ncbi-var">ctx</span>, <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=HandleRequest">HandleRequest(ctx) </a> compares entries in the context's request to commands in <span class="nctnt ncbi-var">m_cmd</span>. The first command in <span class="nctnt ncbi-var">m_cmd</span> that matches an entry in the request is then executed (see below), and the request is considered "handled". If desired, a default command can be installed that will execute when no matching command is found. The default command is defined by implementing the pure virtual function <span class="nctnt ncbi-func">GetDefaultCommand()</span>. The <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCNcbiResPresentation.html">CNcbiResPresentation </a> class is an abstract base class, and the member function, <span class="nctnt ncbi-func">GetPresentation()</span>, returns 0. It is provided as a hook for implementing interfaces between information resources (e.g., databases) and CGI applications.  </p><pre><span class="nctnt-pre ncbi-code">class CNcbiCommand <br />{ <br />public: <br />    CNcbiCommand(CNcbiResource&amp; resource); <br /><br />    virtual CNcbiCommand* Clone(void) const = 0; <br />    virtual string GetName() const = 0; <br />    virtual void Execute(CCgiContext&amp; ctx) = 0; <br />    virtual bool IsRequested(const CCgiContext&amp; ctx) const; <br /><br />protected: <br />    virtual string GetEntry() const = 0; <br />    CNcbiResource&amp; GetResource() const { return m_resource; } <br /><br />private: <br />    CNcbiResource&amp; m_resource; <br />};</span></pre><p><span class="nctnt ncbi-class">CNcbiCommand</span> is an abstract base class; its only data member is a reference to the resource it belongs to, and most of its methods - with the exception of <span class="nctnt ncbi-func">GetResource()</span> and <span class="nctnt ncbi-func">IsRequested()</span> - are pure virtual functions. <span class="nctnt ncbi-func">IsRequested()</span> examines the <span class="nctnt ncbi-monospace">key=value</span> entries stored with the context's request object. When an entry is found where <span class="nctnt ncbi-code">key==GetEntry()</span> and <span class="nctnt ncbi-code">value==GetName()</span>, <span class="nctnt ncbi-func">IsRequested()</span> returns <span class="nctnt ncbi-monospace">true</span>. </p><p>The resource's <span class="nctnt ncbi-func">HandleRequest()</span> method iterates over its command list, calling <span class="nctnt ncbi-func">CNcbiCommand::IsRequested()</span> until the first match between a command and a request entry is found. When <span class="nctnt ncbi-func">IsRequested()</span> returns <span class="nctnt ncbi-monospace">true</span>, the command is <span class="nctnt ncbi-monospace">cloned</span>, and the cloned command is then <span class="nctnt ncbi-monospace">executed</span>. Both the <span class="nctnt ncbi-func">Execute()</span> and <span class="nctnt ncbi-func">Clone()</span> methods are pure virtual functions that must be implemented by the user. </p></div><div class="sec" id="ch_cgi.cgi_http_req"><h3><span class="title">The CCgiRequest Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiRequest.html">* </a>) </span></h3><p>The <span class="nctnt ncbi-class">CCgiRequest</span> class serves as an interface between the user's query and the CGI program. Arguments to the constructor include a <span class="nctnt ncbi-class">CNcbiArguments</span> object, a <span class="nctnt ncbi-class">CNcbiEnvironment</span> object, and a <span class="nctnt ncbi-class">CNcbiIstream</span> object. The class constructors do little other than invoke <span class="nctnt ncbi-func">CCgiRequest::x_Init()</span>, where the actual initialization takes place.  </p><p><span class="nctnt ncbi-func">x_Init()</span> begins by examining the environment argument, and if it is <span class="nctnt ncbi-monospace">NULL</span>, <span class="nctnt ncbi-var">m_OwnEnv</span> (an auto_ptr) is reset to a dummy environment. Otherwise, <span class="nctnt ncbi-var">m_OwnEnv</span> is reset to the passed environment, making the request object the effective owner of that environment. The environment is then used to cache network information as "gettable" properties. Cached properties include: </p><ul><li><p>server properties, such as the server name, gateway interface, and server port </p></li><li><p>client properties (the remote host and remote address) </p></li><li><p>client data properties (content type and content length of the request) </p></li><li><p>request properties, including the request method, query string, and path information </p></li><li><p>authentication information, such as the remote user and remote identity </p></li><li><p>standard HTTP properties (from the HTTP header)  </p></li></ul><p>These properties are keyed to an enumeration named <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/group__CGIReqRes.html#a8">ECgiProp </a> and can be retrieved using the request object's <span class="nctnt ncbi-func">GetProperty()</span> member function. For example, <span class="nctnt ncbi-code">GetProperty(eCgi_HttpCookie)</span> is used to access cookies from the HTTP Header, and <span class="nctnt ncbi-code">GetProperty(eCgi_RequestMethod)</span> is used to determine from where the query string should be read.  </p><p><span class="nctnt highlight">NOTE:</span> Setting <span class="nctnt ncbi-var">$QUERY_STRING</span> without also setting <span class="nctnt ncbi-var">$REQUEST_METHOD</span> will result in a failure by <span class="nctnt ncbi-func">x_init()</span> to read the input query. <span class="nctnt ncbi-func">x_init()</span> first looks for the definition of <span class="nctnt ncbi-var">$REQUEST_METHOD</span>, and depending on if it is <span class="nctnt ncbi-type">GET</span> or <span class="nctnt ncbi-type">POST</span>, reads the query from the environment or the input stream, respectively. If the environment does not define <span class="nctnt ncbi-var">$REQUEST_METHOD</span>, then <span class="nctnt ncbi-func">x_Init()</span> will try to read the query string from the command line only.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiRequest { <br />public: <br />    CCgiRequest(const CNcbiArguments*, const CNcbiEnvironment*, <br />        CNcbiIstream*, TFlags); <br /><br />    static const string&amp; GetPropertyName(ECgiProp prop); <br />    const string&amp; GetProperty(ECgiProp prop) const; <br />    size_t GetContentLength(void) const; <br />    const CCgiCookies&amp; GetCookies(void) const; <br />    const TCgiEntries&amp; GetEntries(void) const; <br />    static SIZE_TYPE ParseEntries(const string&amp; str, TCgiEntries&amp; entries); <br />private: <br />    void x_Init(const CNcbiArguments*, const CNcbiEnvironment*, <br />        CNcbiIstream*, TFlags); <br /><br />    const CNcbiEnvironment* m_Env; <br />    auto_ptr&lt;CNcbiEnvironment&gt; m_OwnEnv; <br />    TCgiEntries m_Entries; <br />    CCgiCookies m_Cookies; <br />};</span></pre><p>This abbreviated definition of the <span class="nctnt ncbi-class">CCgiRequest</span> class highlights its primary functions:  </p><p>To parse and store the <span class="nctnt ncbi-monospace">&lt;key=value&gt;</span> pairs contained in the query string (stored in <span class="nctnt ncbi-var">m_Entries</span>). </p><p>To parse and store the cookies contained in the HTTP header (stored in <span class="nctnt ncbi-var">m_Cookies</span>). </p><p>As implied by the "T" prefix, <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=TCgiEntries">TCgiEntries </a> is a type definition, and defines <span class="nctnt ncbi-var">m_Entries</span> to be an STL multimap of <span class="nctnt ncbi-monospace">&lt;string,string&gt;</span> pairs. The <span class="nctnt ncbi-class">CCgiCookies</span> class (described <a href="ch_cgi.html#ch_cgi.cgi_cookies_class">below </a>) contains an STL set of <a href="ch_cgi.html#ch_cgi.cgi_http_cookies">CCgiCookie </a> and implements an interface to this set. </p></div><div class="sec" id="ch_cgi.cgi_http_resp"><h3><span class="title">The CCgiResponse Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiResponse.html">* </a>) </span></h3><p>The <span class="nctnt ncbi-class">CCgiResponse</span> class provides an interface to the program's output stream (usually <span class="nctnt ncbi-var">cout</span>), which is the sole argument to the constructor for <span class="nctnt ncbi-class">CCgiResponse</span>. The output stream can be accessed by the program using <span class="nctnt ncbi-func">CCgiResponse::GetOutput()</span>, which returns a pointer to the output stream, or, by using <span class="nctnt ncbi-func">CCgiResponse::out()</span>, which returns a reference to that stream.  </p><p>In addition to implementing controlled access to the output stream, the primary function of the response class is to generate appropriate HTML headers that will precede the rest of the response. For example, a typical sequence in the implementation of a particular command's execute function might be:  </p><pre><span class="nctnt-pre ncbi-code">MyCommand::Execute(CCgiContext&amp; ctx) <br />{ <br />    // ... generate the output and store it in MyOutput <br /><br />    ctx.GetResponse().WriteHeader(); <br />    ctx.GetResponse().out() &lt;&lt; MyOutput; <br />    ctx.GetResponse.out() &lt;&lt; "&lt;/body&gt;&lt;/html&gt;" &lt;&lt; endl; <br />    ctx.GetResponse.Flush(); <br />}</span></pre><p>Any cookies that are to be sent with the response are included in the headers generated by the response object.  </p><p>Two member functions are provided for outputting HTML headers: <span class="nctnt ncbi-func">WriteHeader()</span> and <span class="nctnt ncbi-func">WriteHeader(CNcbiOstream&amp;)</span>. The second of these is for writing to a specified stream other than the default stream stored with the response object. Thus, <span class="nctnt ncbi-code">WriteHeader(out())</span> is equivalent to <span class="nctnt ncbi-code">WriteHeader()</span>. </p><p>The <span class="nctnt ncbi-func">WriteHeader()</span> function begins by invoking <span class="nctnt ncbi-func">IsRawCgi()</span> to see whether the application is a <a href="http://www.wdvl.com/Authoring/Scripting/Tutorial/nph.html">non-parsed header </a> program. If so, then the first header put on the output stream is an HTTP status line, taken from the private static data member, <span class="nctnt ncbi-var">sm_HTTPStatusDefault</span>. Next, unless the content type has been set by the user (using <span class="nctnt ncbi-func">SetContentType()</span>), a default content line is written, using <span class="nctnt ncbi-var">sm_ContentTypeDefault</span>. Any cookies stored in <span class="nctnt ncbi-var">m_Cookies</span> are then written, followed by any additional headers stored with the request in <span class="nctnt ncbi-var">m_HeaderValues</span>. Finally, a new line is written to separate the body from the headers.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiResponse { <br />public: <br />    CCgiResponse(CNcbiOstream* out = 0); <br /><br />    void SetRawCgi(bool raw); <br />    bool IsRawCgi(void) const; <br />    void SetHeaderValue(const string&amp; name, const string&amp; value); <br />    void SetHeaderValue(const string&amp; name, const tm&amp; value); <br />    void RemoveHeaderValue(const string&amp; name); <br />    void SetContentType(const string &amp;type); <br />    string GetHeaderValue(const string&amp; name) const; <br />    bool HaveHeaderValue(const string&amp; name) const; <br />    string GetContentType(void) const; <br /><br />    CCgiCookies&amp; Cookies(void);                 // Get cookies set <br />    CNcbiOstream* SetOutput(CNcbiOstream* out); // Set default output stream <br />    CNcbiOstream* GetOutput(void) const;        // Query output stream <br />    CNcbiOstream&amp; out(void) const;              // Conversion to ostream <br />                                                // to enable &lt;&lt; <br /><br />    void Flush() const; <br /><br />    CNcbiOstream&amp; WriteHeader(void) const;  // Write HTTP response header <br />    CNcbiOstream&amp; WriteHeader(CNcbiOstream&amp; out) const; <br />protected: <br />    typedef map&lt;string, string&gt; TMap; <br />    static const string sm_ContentTypeName; <br />    static const string sm_ContentTypeDefault; <br />    static const string sm_HTTPStatusDefault; <br />    bool m_RawCgi; <br />    CCgiCookies m_Cookies; <br />    TMap m_HeaderValues;    // Additional header lines in alphabetical order <br />    CNcbiOstream* m_Output; // Default output stream };</span></pre></div><div class="sec" id="ch_cgi.cgi_http_cookies"><h3><span class="title">The CCgiCookie Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiCookie.html">* </a>) </span></h3><p>The traditional means of maintaining state information when servicing a multi-step request has been to include <span class="nctnt ncbi-type">hidden</span> input elements in the query strings passed to subsequent URLs. The newer, preferred method uses HTTP cookies, which provide the server access to client-side state information stored with the client. The cookie is a text string consisting of four key=value pairs:  </p><ul><li><p>name (required) </p></li><li><p>expires (optional) </p></li><li><p>domain (optional) </p></li><li><p>path (optional)  </p></li></ul><p>The <span class="nctnt ncbi-class">CCgiCookie</span> class provides a means of creating, modifying, and sending cookies. The constructor requires at least two arguments, specifying the <span class="nctnt ncbi-monospace">name</span> and <span class="nctnt ncbi-monospace">value</span> of the cookie, along with the optional <span class="nctnt ncbi-var">domain</span> and <span class="nctnt ncbi-var">path</span> arguments. Format errors in the arguments to the constructor (see <a href="ch_cgi.html#ch_cgi.appendix">Supplementary Information </a>) will cause the invalid argument to be thrown. The <span class="nctnt ncbi-func">CCgiCookie::Write(CNcbiOstream&amp;)</span> member function creates a <span class="nctnt ncbi-monospace">Set-Cookie</span> directive using its private data members and places the resulting string on the specified output stream:  </p><pre><span class="nctnt-pre ncbi-monospace">Set-Cookie: <br />m_Name=<br />m_Value; expires=<br />m_Expires; path=<br />m_Path; <br />domain=<br />m_Domain; <br />m_Secure</span></pre><p>As with the constructor, and in compliance with the proposed standard (<a href="http://www.ietf.org/rfc/rfc2109.txt">RFC 2109 </a>), only the name and value are mandatory in the directive.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiCookie {<br />public:<br />    CCgiCookie(const string&amp; name, const string&amp; value,<br />               const string&amp; domain = NcbiEmptyString,<br />               const string&amp; path   = NcbiEmptyString);<br />    const string&amp; GetName(void) const;<br />    CNcbiOstream&amp; Write(CNcbiOstream&amp; os) const;<br />    void Reset(void);<br />    void CopyAttributes(const CCgiCookie&amp; cookie);<br />    void SetValue  (const string&amp; str);<br />    void SetDomain (const string&amp; str);<br />    void SetPath   (const string&amp; str);<br />    void SetExpDate(const tm&amp; exp_date);<br />    void SetSecure (bool secure);<br />    const string&amp; GetValue  (void) const;<br />    const string&amp; GetDomain (void) const;<br />    const string&amp; GetPath   (void) const;<br />    string        GetExpDate(void) const;<br />    bool GetExpDate(tm* exp_date) const;<br />    bool GetSecure(void)          const;<br />    bool operator&lt;(const CCgiCookie&amp; cookie) const;<br />    typedef const CCgiCookie* TCPtr;<br />    struct PLessCPtr {<br />        bool operator() (const TCPtr&amp; c1, const TCPtr&amp; c2) const {<br />            return (*c1 &lt; *c2);<br />        }<br />    };<br />private:<br />    string m_Name;<br />    string m_Value;<br />    string m_Domain;<br />    string m_Path;<br />    tm     m_Expires;<br />    bool   m_Secure;<br />};</span></pre><p>With the exception of <span class="nctnt ncbi-var">m_Name</span>, all of the cookie's data members can be reset using the <span class="nctnt ncbi-func">SetXxx(), Reset()</span>, and <span class="nctnt ncbi-func">CopyAttributes()</span> member functions; <span class="nctnt ncbi-var">m_Name</span> is non-mutable. As with the constructor, format errors in the arguments to these functions will cause the invalid argument to be thrown. By default, <span class="nctnt ncbi-var">m_Secure</span> is <span class="nctnt ncbi-monospace">false</span>. The <span class="nctnt ncbi-func">GetXxx()</span> methods return the stored value for that attribute or, if no value has been set, a reference to <span class="nctnt ncbi-class">NcbiEmptyString</span>. <span class="nctnt ncbi-code">GetExpDate(tm*)</span> returns <span class="nctnt ncbi-monospace">false</span> if no expiration date was previously set. Otherwise, <span class="nctnt ncbi-var">tm</span> is reset to <span class="nctnt ncbi-var">m_Expire</span>, and <span class="nctnt ncbi-monospace">true</span> is returned.  </p></div><div class="sec" id="ch_cgi.cgi_cookies_class"><h3><span class="title">The CCgiCookies Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiCookies.html">* </a>) </span></h3><p>The <span class="nctnt ncbi-class">CCgiCookies</span> class provides an interface to an STL set of <span class="nctnt ncbi-class">CCgiCookie</span>s (<span class="nctnt ncbi-var">m_Cookies</span>). Each cookie in the set is uniquely identified by its name, domain, and path values and is stored in ascending order using the <span class="nctnt ncbi-type">CCgiCookie::PLessCPtr</span> construct. Two constructors are provided, allowing the user to initialize <span class="nctnt ncbi-var">m_Cookies</span> to either an empty set or to a set of <span class="nctnt ncbi-var">N</span> new cookies created from the string "name1=value1; name2=value2; ...; nameN=valuenN". Many of the operations on a <span class="nctnt ncbi-class">CCgiCookies</span> object involve iterating over the set, and the class's type definitions support these activities by providing built-in iterators and a typedef for the set, <span class="nctnt ncbi-type">TSet</span>.  </p><p>The <span class="nctnt ncbi-func">Add()</span> methods provide a variety of options for creating and adding new cookies to the set. As with the constructor, a single string of name-value pairs may be used to create and add <span class="nctnt ncbi-var">N</span> cookies to the set at once. Previously created cookies can also be added to the set individually or as sets. Similarly, the <span class="nctnt ncbi-func">Remove()</span> methods allow individual cookies or sets of cookies (in the specified range) to be removed. All of the remove functions destroy the removed cookies when <span class="nctnt ncbi-code">destroy=true</span>. <span class="nctnt ncbi-func">CCgiCookies::Write(CNcbiOstream&amp;)</span> iteratively invokes the <span class="nctnt ncbi-func">CCgiCookie::Write()</span> on each element.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiCookies {<br />public:<br />    typedef set&lt;CCgiCookie*, CCgiCookie::PLessCPtr&gt;  TSet;<br />    typedef TSet::iterator         TIter;<br />    typedef TSet::const_iterator   TCIter;<br />    typedef pair&lt;TIter,  TIter&gt;    TRange;<br />    typedef pair&lt;TCIter, TCIter&gt;   TCRange;<br />    CCgiCookies(void);           // create empty set of cookies<br />    CCgiCookies(const string&amp; str);<br />    // str = "name1=value1; name2=value2; ..."<br />    bool Empty(void) const;<br />    CCgiCookie* Add(const string&amp; name, const string&amp; value,<br />                    const string&amp; domain = NcbiEmptyString,<br />                    const string&amp; path   = NcbiEmptyString);<br />    CCgiCookie* Add(const CCgiCookie&amp; cookie);<br />    void Add(const CCgiCookies&amp; cookies);<br />    void Add(const string&amp; str);<br />    // "name1=value1; name2=value2; ..."<br />   CCgiCookie* Find(const string&amp; name, const string&amp; domain,<br />                    const string&amp; path);<br />    CCgiCookie* Find(const string&amp; name, TRange*  range=0);<br />    bool Remove(CCgiCookie* cookie, bool destroy=true);<br />    size_t Remove(TRange&amp; range, bool destroy=true);<br />    size_t Remove(const string&amp; name, bool destroy=true);<br />    void Clear(void);<br />    CNcbiOstream&amp; Write(CNcbiOstream&amp; os) const;<br />private:<br />    TSet m_Cookies;<br />};</span></pre></div><div class="sec" id="ch_cgi.cgi_app_context"><h3><span class="title">The CCgiContext Class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiContext.html">* </a>) </span></h3><p>As depicted in <a href="ch_cgi.html#ch_cgi.cgi_class_overview">Figure 1 </a>, a <span class="nctnt ncbi-class">CCgiContext</span> object contains an application object, a request object, and a response object, corresponding to its data members <span class="nctnt ncbi-var">m_app, m_request</span>, and <span class="nctnt ncbi-var">m_response</span>. Additional data members include a string encoding the URL for the context (<span class="nctnt ncbi-var">m_selfURL</span>), a message buffer (<span class="nctnt ncbi-var">m_lmsg</span>), and a <span class="nctnt ncbi-class">CCgiServerContext</span>. These last three data members are used only in complex Web applications, such as the <a href="ch_devtools.html">query </a> program, where it is necessary to store more complex run-time data with the context object. The message buffer is essentially an STL list of string objects the class definition of which (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=CCtxMsgString">CCtxMsgString </a>) includes a <span class="nctnt ncbi-func">Write()</span> output function. <span class="nctnt ncbi-func">GetServCtx()</span> returns <span class="nctnt ncbi-var">m_srvCtx</span> if it has been defined and, otherwise, calls the application's <span class="nctnt ncbi-func">CCgiApplication::LoadServerContext()</span> to obtain it.  </p><pre><span class="nctnt-pre ncbi-code">class CCgiContext<br />{<br />public:<br />    CCgiContext(CCgiApplication&amp;        app,<br />                const CNcbiArguments*   args = 0,<br />                const CNcbiEnvironment* env  = 0,<br />                CNcbiIstream*           inp  = 0,<br />                CNcbiOstream*           out  = 0);<br />    const CCgiApplication&amp; GetApp(void) const;<br />    CNcbiRegistry&amp;     GetConfig(void);<br />    CCgiRequest&amp;       GetRequest(void);<br />    CCgiResponse&amp;      GetResponse(void);<br />    const string&amp;      GetSelfURL(void) const;<br />    CNcbiResource&amp;     GetResource(void);<br />    CCgiServerContext&amp;     GetServCtx(void);<br />    // output all msgs in m_lmsg to os<br />    CNcbiOstream&amp; PrintMsg(CNcbiOstream&amp; os);   <br />    void PutMsg(const string&amp; msg);     // add message to m_lmsg<br />    void PutMsg(CCtxMsg* msg);          // add message to m_lmsg<br />    bool EmptyMsg(void);            // true iff m_lmsg is empty<br />    void ClearMsg(void);            // delete all messages in m_lmsg<br />    string GetRequestValue(const string&amp; name) const;<br />    void AddRequestValue(const string&amp; name, const string&amp; value);<br />    void RemoveRequestValues(const string&amp; name);<br />    void ReplaceRequestValue(const string&amp; name, const string&amp; value);<br />private:<br />    CCgiApplication&amp;      m_app;<br />    auto_ptr&lt;CCgiRequest&gt; m_request;<br />    CCgiResponse      m_response;<br />    mutable string    m_selfURL;<br />    list&lt;CCtxMsg*&gt;        m_lmsg;        // message buffer<br />    auto_ptr&lt;CCgiServerContext&gt; m_srvCtx;<br />    // defined by CCgiApplication::LoadServerContext()<br />    friend class CCgiApplication;<br />};</span></pre></div><div class="sec" id="ch_cgi.The_CCgiUserAgent_cl"><h3><span class="title">The CCgiUserAgent class (<a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCCgiUserAgent.html">* </a>) </span></h3><p>The <span class="nctnt ncbi-class">CCgiUserAgent</span> class is used to gather information about the client's user agent - i.e. browser type, browser name, browser version, browser engine type, browser engine version, Mozilla version (if applicable), platform, and robot information. The default constructor looks for the user agent string first in the <span class="nctnt ncbi-class">CCgiApplication</span> context using the <span class="nctnt ncbi-var">eCgi_HttpUserAgent</span> request property, then in the <span class="nctnt ncbi-class">CNcbiApplication</span> instance <span class="nctnt ncbi-var">HTTP_USER_AGENT</span> environment variable, and finally in the operating system <span class="nctnt ncbi-var">HTTP_USER_AGENT</span> environment variable. </p><pre><span class="nctnt-pre ncbi-code">class CCgiUserAgent<br />{<br />public:<br />    CCgiUserAgent(void);<br />    CCgiUserAgent(const string&amp; user_agent);<br /><br />    void Reset(const string&amp; user_agent);<br /><br />    string           GetUserAgentStr(void) const;<br />    EBrowser         GetBrowser(void) const;<br />    const string&amp;    GetBrowserName(void) const;<br />    EBrowserEngine   GetEngine(void) const;<br />    EBrowserPlatform GetPlatform(void) const;<br /><br />    const TUserAgentVersion&amp; GetBrowserVersion(void) const;<br />    const TUserAgentVersion&amp; GetEngineVersion(void) const;<br />    const TUserAgentVersion&amp; GetMozillaVersion(void) const;<br /><br />    typedef unsigned int TBotFlags;<br />    bool IsBot(TBotFlags flags = fBotAll, const string&amp; patterns = kEmptyStr) const;<br /><br />protected:<br />    void x_Init(void);<br />    void x_Parse(const string&amp; user_agent);<br />    bool x_ParseToken(const string&amp; token, int where);<br /><br />protected:<br />    string            m_UserAgent;<br />    EBrowser          m_Browser;<br />    string            m_BrowserName;<br />    TUserAgentVersion m_BrowserVersion;<br />    EBrowserEngine    m_Engine;<br />    TUserAgentVersion m_EngineVersion;<br />    TUserAgentVersion m_MozillaVersion;<br />    EBrowserPlatform  m_Platform;<br />};</span></pre></div><div class="sec" id="ch_cgi.cgi_examples"><h3><span class="title">Example Code Using the CGI Classes </span></h3><p>The <a href="ch_cgi.html#ch_cgi.html">sample CGI program</a> demonstrates a simple application that combines the NCBI C++ Toolkit's CGI and HTML classes. <a href="ch_cgi.html#ch_cgi.cgi_cpp.html">justcgi.cpp</a> is an adaptation of that program, stripped of all HTML references and with additional request-processing added (see <a href="ch_cgi.html#ch_cgi.cgi_cpp.html">Box 1</a> and <a href="ch_cgi.html#ch_cgi.cgi_hpp.html">Box 2</a>). </p><div class="box" id="ch_cgi.cgi_cpp.html"><h4><span class="title">Box 1 </span></h4><pre>// File name: justcgi.cpp<br />// Description: Demonstrate the basic CGI classes and functions<br />#include "<a href="ch_cgi.html#ch_cgi.cgi_hpp.html">justcgi.hpp</a>"<br />#include &lt;cgi/cgictx.hpp&gt;<br />#include &lt;corelib/ncbistd.hpp&gt;<br />#include &lt;corelib/ncbireg.hpp&gt;<br />#include &lt;memory&gt;<br />USING_NCBI_SCOPE;<br />/////////////////////////////////////////////////////////////////////////<br />// Implement the application's LoadResource() and ProcessRequest() methods<br />CNcbiResource* CCgiApp::LoadResource(void)<br />{<br />    auto_ptr&lt;CCgiResource&gt; resource(new CCgiResource(GetConfig()));<br />    resource-&gt;AddCommand(new CCgiBasicCommand(*resource));<br />    resource-&gt;AddCommand(new CCgiReplyCommand(*resource));<br />    return resource.release();<br />}<br />// forward declarations <br />void ShowCommands (const TCmdList&amp; cmds, CCgiContext&amp; ctx);<br />void ShowEntries (const TCgiEntries&amp; entries);<br />int CCgiApp::ProcessRequest(CCgiContext&amp; ctx)<br />{<br />    ShowCommands (GetResource().GetCmdList(), ctx);<br />    ShowEntries (const_cast&lt;TCgiEntries&amp;&gt;(ctx.GetRequest().GetEntries()));<br />    GetResource().HandleRequest(ctx);<br />    return 0;<br />}<br />/////////////////////////////////////////////////////////////<br />// Define the resource's default command if none match queryCNcbiCommand* CCgiResource::GetDefaultCommand(void) const<br />{<br />    cerr &lt;&lt; "    executing CCgiResource::GetDefaultCommand()" &lt;&lt; endl;<br />    return new CCgiBasicCommand(const_cast&lt;CCgiResource&amp;&gt;(*this));<br />}<br />///////////////////////////////////////////////////////////////<br />// Define the Execute() and Clone() methods for the commands <br />void CCgiCommand::Execute(CCgiContext&amp; ctx)<br />{<br />    cerr &lt;&lt; "    executing CCgiCommand::Execute " &lt;&lt; endl;<br />    const CNcbiRegistry&amp; reg = ctx.GetConfig();<br />    ctx.GetResponse().WriteHeader();<br />}<br />CNcbiCommand* CCgiBasicCommand::Clone(void) const<br />{<br />    cerr &lt;&lt; "    executing CCgiBasicCommand::Clone()" &lt;&lt; endl;<br />    return new CCgiBasicCommand(GetCgiResource());<br />}<br />CNcbiCommand* CCgiReplyCommand::Clone(void) const<br />{<br />    cerr &lt;&lt; "    executing CCgiReplyCommand::Clone" &lt;&lt; endl;<br />    return new CCgiReplyCommand(GetCgiResource());<br />}<br />// Show what commands have been installed<br />void ShowCommands (const TCmdList&amp; cmds, CCgiContext&amp; ctx)<br />{<br />    cerr &lt;&lt; "Commands defined for this application are: \n";<br />    for (TCmdList::const_iterator it = cmds.begin();<br />         it != cmds.end(); it++) {<br />         cerr &lt;&lt; (*it)-&gt;GetName();<br />         if ((*it)-&gt;IsRequested(ctx)) {<br />            cerr &lt;&lt; " (requested)" &lt;&lt; endl;<br />         } else {<br />            cerr &lt;&lt; " (not requested)" &lt;&lt; endl;<br />         }<br />    }<br />}<br />// Show the &lt;key=value&gt; pairs in the request string <br />void ShowEntries (const TCgiEntries&amp; entries)<br />{<br />    cerr &lt;&lt; "The entries in the request string were: \n";<br />    for (TCgiEntries::const_iterator it = entries.begin();<br />         it != entries.end(); it++) {<br />         if (! (it-&gt;first.empty() &amp;&amp; it-&gt;second.empty()))<br />            cerr &lt;&lt; it-&gt;first &lt;&lt; "=" &lt;&lt; it-&gt;second &lt;&lt; endl;<br />    }<br />}<br />static CCgiApp theCgiApp;<br />int main(int argc, const char* argv[])<br />{<br />    SetDiagStream(&amp;cerr);<br />    return theCgiApp.AppMain(argc, argv);<br />}<br /></pre></div><div class="box" id="ch_cgi.cgi_hpp.html"><h4><span class="title">Box 2 </span></h4><pre>// File name: justcgi.hpp<br />// Description: Demonstrate the basic CGI classes and functions<br />#ifndef CGI_HPP<br />#define CGI_HPP<br />#include &lt;cgi/cgiapp.hpp&gt;<br />#include &lt;cgi/ncbires.hpp&gt;<br />USING_NCBI_SCOPE;<br />class CCgiApp : public CCgiApplication<br />{<br />public:<br />    virtual CNcbiResource* LoadResource(void);<br />    virtual int ProcessRequest(CCgiContext&amp; context);<br />};<br />class CCgiResource : public CNcbiResource<br />{<br />public:<br />    CCgiResource(CNcbiRegistry&amp; config)<br />      : CNcbiResource(config) {}<br />    virtual ~CCgiResource() {};<br />    // defines the command to be executed when no other command matches<br />    virtual CNcbiCommand* GetDefaultCommand( void ) const;<br />};<br />class CCgiCommand : public CNcbiCommand<br />{<br />public:<br />    CCgiCommand( CNcbiResource&amp; resource ) : CNcbiCommand(resource) {};<br />    virtual ~CCgiCommand( void ) {};<br />    virtual void Execute( CCgiContext&amp; ctx );<br />    virtual string GetLink(CCgiContext&amp;) const { return NcbiEmptyString; }<br />protected:<br />    CCgiResource&amp; GetCgiResource() const<br />        {<br />  return dynamic_cast&lt;CCgiResource&amp;&gt;( GetResource() );<br />}<br />    virtual string GetEntry() const { return string("cmd"); }<br />};<br />class CCgiBasicCommand : public CCgiCommand<br />{<br />public:<br />    CCgiBasicCommand(CNcbiResource&amp; resource) : CCgiCommand(resource) {};<br />    virtual ~CCgiBasicCommand(void) {};<br />    virtual CNcbiCommand* Clone( void ) const;<br />    virtual string GetName( void ) const { return string("init"); };<br />protected:<br />    virtual string GetEntry() const { return string("cmd1"); }<br />};<br />class CCgiReplyCommand : public CCgiBasicCommand<br />{<br />public:<br />    CCgiReplyCommand( CNcbiResource&amp; resource) : CCgiBasicCommand(resource) {};<br />    virtual ~CCgiReplyCommand(void) {};<br />    virtual CNcbiCommand* Clone( void ) const;<br />    virtual string GetName( void ) const { return string("reply"); };<br />protected:<br />    virtual string GetEntry() const { return string("cmd2"); }<br />};<br />#endif /* CGI_HPP */<br /><br /></pre></div><p>Executing  </p><pre><span class="nctnt-pre ncbi-cmd">./cgi 'cmd1=init&amp;cmd2=reply'</span></pre><p> results in execution of only <span class="nctnt ncbi-var">cmd1</span>, as does executing  </p><pre><span class="nctnt-pre ncbi-cmd">./cgi 'cmd2=reply&amp;cmd1=init'</span></pre><p>The commands are matched in the order that they are registered with the resource, not according to the order in which they occur in the request. The assumption is that only the first entry (if any) in the query actually specifies a command, and that the remaining entries provide optional arguments to that command. The Makefile (see <a href="ch_cgi.html#ch_cgi.make_">Box 3 </a>) for this example links to both the <span class="nctnt ncbi-path">xncbi</span> and <span class="nctnt ncbi-path">xcgi</span> libraries. Additional examples using the CGI classes can be found in <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/source/src/cgi/test">src/cgi/test </a>. (For Makefile.fastcgi.app, see <a href="ch_cgi.html#ch_cgi.make_f">Box 4 </a>.)  </p><div class="box" id="ch_cgi.make_"><h4><span class="title">Box 3 </span></h4><pre><span class="nctnt-pre ncbi-code"># Author: Diane Zimmerman <br /># Build CGI application "CGI" <br /># NOTE: see  to build Fast-CGI <br />################################# <br />APP = cgi <br />OBJ = cgiapp <br />LIB = xcgi xncbi</span></pre></div><div class="box" id="ch_cgi.make_f"><h4><span class="title">Box 4 </span></h4><pre><span class="nctnt-pre ncbi-code"># Author: Diane Zimmerman <br /># Build test Fast-CGI application "FASTCGI" <br /># NOTES:  - it will be automagically built as a plain CGI application if <br />#           Fast-CGI libraries are missing on your machine. <br />#         - also, it auto-detects if it is run as a FastCGI or a plain <br />#           CGI, and behave appropriately. <br />################################# <br />APP = fastcgi <br />OBJ = cgiapp <br />LIB = xfcgi xncbi <br />LIBS = $(FASTCGI_LIBS) $(ORIG_LIBS)</span></pre></div></div><div class="sec" id="ch_cgi.cgi_reg_config"><h3><span class="title">CGI Registry Configuration </span></h3><p>The application registry defines CGI-related configuration settings in the <span class="nctnt ncbi-var">[CGI]</span> section (see <a href="ch_libconfig.html#ch_libconfig.T8">this table</a>). </p><div class="table" id="ch_libconfig.T8"><div class="caption"><p>Table 8. CGI-related configuration parameters</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Purpose</th><th align="left" valign="top" rowspan="1" colspan="1">[Registry section]<br />Registry name<br /><br />Environment variable</th><th align="left" valign="top" rowspan="1" colspan="1">Valid values</th><th align="left" valign="top" rowspan="1" colspan="1">Default</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set to the user agent string you would like to be used by the web server.</td><td align="left" valign="top" rowspan="1" colspan="1">[N/A]<br />N/A<br /><br /><span class="nctnt ncbi-var">HTTP_USER_AGENT</span></td><td align="left" valign="top" rowspan="1" colspan="1">A valid user agent string.</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Add to the user agent list of bot names. This parameter affect only <span class="nctnt ncbi-func">CCgiUserAgent::IsBot()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Bots</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__BOTS</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">Delimited listÂ <a href="ch_libconfig.html#ch_libconfig.TF.24"><sup>b</sup></a> of bot names, e.g. "Googlebot Scooter WebCrawler Slurp".</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">According to RFC-2109, cookies should not be encoded. Instead, they should be just quoted. However, for backward compatibility with code that decodes incoming cookies, both quoted cookies and encoded cookies can be parsed. This setting controls which method of encoding/decoding is used.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Cookie_Encoding</span><br /><br /><span class="nctnt ncbi-var">CGI_COOKIE_ENCODING</span></td><td align="left" valign="top" rowspan="1" colspan="1">"Url", "Quote"</td><td align="left" valign="top" rowspan="1" colspan="1">"Url"</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Severity level for cookie-related error messages.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Cookie_Error_Severity</span><br /><br /><span class="nctnt ncbi-var">CGI_Cookie_Error_Severity</span></td><td align="left" valign="top" rowspan="1" colspan="1">CIÂ <a href="ch_libconfig.html#ch_libconfig.TF.27"><sup>e</sup></a>: Info, Warning, Error, Critical, Fatal, Trace</td><td align="left" valign="top" rowspan="1" colspan="1">Error</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Defines which characters cannot be used in cookie names.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Cookie_Name_Banned_Symbols</span><br /><br /><span class="nctnt ncbi-var">CGI_Cookie_Name_Banned_Symbols</span></td><td align="left" valign="top" rowspan="1" colspan="1">A string of banned characters.</td><td align="left" valign="top" rowspan="1" colspan="1">"Â ,;="</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set to true to make the application count the amount of data read/sent. The numbers are then printed in request stop log messages.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Count_Transfered</span><br /><br /><span class="nctnt ncbi-var">CGI_COUNT_TRANSFERED</span></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set the name of an environment variable, which in turn specifies a prefix that will be added to all diagnostic messages issued during HTTP request processing.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">DiagPrefixEnv</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__DIAGPREFIXENV</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">a valid environment variable name</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set to true to disable the creation of a tracking cookie during session initialization.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">DisableTrackingCookie</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__DISABLETRACKINGCOOKIE</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set to true to enable logging.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Log</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__LOG</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">CIÂ <a href="ch_libconfig.html#ch_libconfig.TF.27"><sup>e</sup></a>:<br />On =&gt; enabled;<br />True =&gt; enabled;<br />OnError =&gt; enabled for errors;<br />OnDebug =&gt; enabled (debug builds only)</td><td align="left" valign="top" rowspan="1" colspan="1">disabled</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">An ampersand-delimited string of GET and/or POST arguments to exclude from the log (helps limit the size of the log file)</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">LOG_EXCLUDE_ARGS</span><br /><br /><span class="nctnt ncbi-var">CGI_LOG_EXCLUDE_ARGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">valid format: arg1&amp;arg2...</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Allows specifying limits for multiple GET and/or POST arguments in one parameter string.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">LOG_LIMIT_ARGS</span><br /><br /><span class="nctnt ncbi-var">CGI_LOG_LIMIT_ARGS</span></td><td align="left" valign="top" rowspan="1" colspan="1">valid format: arg1:size1&amp;arg2:size2...&amp;*:size<br />special argument:<br />* means all unspecified arguments;<br />special limits:<br />-2 means exclude;<br />-1 means no limit</td><td align="left" valign="top" rowspan="1" colspan="1">*:1000000</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Enable logging of CGI request parameters. Only the specified parameters will be logged.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">LogArgs</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__LOGARGS</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">Delimited listÂ <a href="ch_libconfig.html#ch_libconfig.TF.24"><sup>b</sup></a> of environment variables (optionally aliased on output for shortening logs, e.g. envvar=1).</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify additional mobile device names. This parameter affect only <span class="nctnt ncbi-func">CCgiUserAgent::IsMobileDevice()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">MobileDevices</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__MobileDevices</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">Delimited listÂ <a href="ch_libconfig.html#ch_libconfig.TF.24"><sup>b</sup></a> of additional device names.</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set to true to merge log lines.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Merge_Log_Lines</span><br /><br /><span class="nctnt ncbi-var">CGI_MERGE_LOG_LINES</span></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">true</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Add to the user agent list of names that aren't bots. This parameter affect only <span class="nctnt ncbi-func">CCgiUserAgent::IsBot()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">NotBots</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__NotBots</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">Delimited listÂ <a href="ch_libconfig.html#ch_libconfig.TF.24"><sup>b</sup></a> of names that aren't bots.</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Add to the user agent list of names that aren't mobile devices. This parameter affect only <span class="nctnt ncbi-func">CCgiUserAgent::IsMobileDevice()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">NotMobileDevices</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__NotMobileDevices</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">Delimited listÂ <a href="ch_libconfig.html#ch_libconfig.TF.24"><sup>b</sup></a> of names that aren't bots.</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Control error handling of incoming cookies (doesn't affect outgoing cookies set by application).</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">On_Bad_Cookie</span><br /><br /><span class="nctnt ncbi-var">CGI_ON_BAD_COOKIE</span></td><td align="left" valign="top" rowspan="1" colspan="1">CIÂ <a href="ch_libconfig.html#ch_libconfig.TF.27"><sup>e</sup></a>: Throw, SkipAndError, Skip, StoreAndError, Store</td><td align="left" valign="top" rowspan="1" colspan="1">Store</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specifies whether to print the referer during <span class="nctnt ncbi-func">LogRequest()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Print_Http_Referer</span><br /><br /><span class="nctnt ncbi-var">CGI_PRINT_HTTP_REFERER</span></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">true</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specifies whether to print the URL during <span class="nctnt ncbi-func">LogRequest()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Print_Self_Url</span><br /><br /><span class="nctnt ncbi-var">CGI_PRINT_SELF_URL</span></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">true</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specifies whether to print the user agent during <span class="nctnt ncbi-func">LogRequest()</span>.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">Print_User_Agent</span><br /><br /><span class="nctnt ncbi-var">CGI_PRINT_USER_AGENT</span></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">true</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Set the size of CGI request buffer that is printed when the request cannot be parsed.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">RequestErrBufSize</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__REQUESTERRBUFSIZE</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">buffer size in bytes</td><td align="left" valign="top" rowspan="1" colspan="1">256</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the registry section name for the result cache.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">ResultCacheSectionName</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__RESULTCACHESECTIONNAME</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">valid section name</td><td align="left" valign="top" rowspan="1" colspan="1">result_cache</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Enable statistics logging.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">StatLog</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__STATLOG</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.26"><sup>d</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Controls whether the output stream will throw for bad states.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">ThrowOnBadOutput</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__THROWONBADOUTPUT</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.25"><sup>c</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">true</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Log start time, end time, and elapsed time.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TimeStamp</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__TIMESTAMP</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.26"><sup>d</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Disable statistics logging if the CGI request took less than the specified number of seconds.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TimeStatCutOff</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__TIMESTATCUTOFF</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">non-negative integer (zero enables logging)</td><td align="left" valign="top" rowspan="1" colspan="1">0</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the domain for the tracking cookie.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TrackingCookieDomain</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__TRACKINGCOOKIEDOMAIN</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">valid domain</td><td align="left" valign="top" rowspan="1" colspan="1">.nih.gov</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the tracking cookie name.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TrackingCookieName</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__TRACKINGCOOKIENAME</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">valid cookie name</td><td align="left" valign="top" rowspan="1" colspan="1">ncbi_sid</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the path for the tracking cookie.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TrackingCookiePath</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI__TRACKINGCOOKIEPATH</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.28"><sup>f</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">valid path</td><td align="left" valign="top" rowspan="1" colspan="1">/</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Defines the <b>name</b> of the NCBI tracking cookie (session ID cookie).</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI]</span><br /><span class="nctnt ncbi-var">TrackingTagName</span><br /><br /><span class="nctnt ncbi-var">CGI_TrackingTagName</span></td><td align="left" valign="top" rowspan="1" colspan="1">Any valid cookie name.</td><td align="left" valign="top" rowspan="1" colspan="1">"NCBI-SID"</td></tr></tbody></table><div class="table-wrap-foot"><div class="small" id="ch_libconfig.TF.23"><p><sup>a</sup> List may be delimited by semicolon, space, tab, or comma.</p></div><div class="small" id="ch_libconfig.TF.24"><p><sup>b</sup> List may be delimited by semicolon, space, tab, vertical bar, or tilde.</p></div><div class="small" id="ch_libconfig.TF.25"><p><sup>c</sup> case-insensitive: true, t, yes, y, 1, false, f, no, n, 0</p></div><div class="small" id="ch_libconfig.TF.26"><p><sup>d</sup> case-insensitive: true, t, yes, y, false, f, no, n</p></div><div class="small" id="ch_libconfig.TF.27"><p><sup>e</sup> CI = case-insensitive</p></div><div class="small" id="ch_libconfig.TF.28"><p><sup>f</sup> <a href="ch_libconfig.html#ch_libconfig.Environment">environment variable name</a> formed from registry section and entry name</p></div></div></div><p>FastCGI settings. <span class="nctnt ncbi-var">[FastCGI]</span> section (see <a href="ch_libconfig.html#ch_libconfig.T9">this table</a>). </p><div class="table" id="ch_libconfig.T9"><div class="caption"><p>Table 9. FCGI-related configuration parameters</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Purpose</th><th align="left" valign="top" rowspan="1" colspan="1">[Registry section]<br />Registry name<br /><br />Environment variable</th><th align="left" valign="top" rowspan="1" colspan="1">Valid values</th><th align="left" valign="top" rowspan="1" colspan="1">Default</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">A true value enables logging of current iteration, max iterations, and process ID during the FastCGI run.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">Debug</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__DEBUG</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.29"><sup>a</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">A true value enables termination of a FastCGI application by the presence of the request entry "exitfastcgi".</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">HonorExitRequest</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__HONOREXITREQUEST</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.29"><sup>a</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the number of requests that the FCGI application will process before exiting.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">Iterations</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__ITERATIONS</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">positive integer</td><td align="left" valign="top" rowspan="1" colspan="1">10</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Make the FastCGI application run as a stand-alone server on a local port. The value is a UNIX domain socket or a MS Windows named pipe, or a colon followed by a port number</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">StandaloneServer</span><br /><br /><span class="nctnt ncbi-var">FCGI_STANDALONE_SERVER</span></td><td align="left" valign="top" rowspan="1" colspan="1">valid local port or named socket</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Make the FastCGI application stop if an error is encountered.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">StopIfFailed</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__STOPIFFAILED</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.29"><sup>a</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Make the FastCGI application exit if the named file changes.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">WatchFile.Name</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__WATCHFILE_DOT_NAME</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">valid file name</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">The number of bytes to read from the watch file to see if it has changed.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">WatchFile.Limit</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__WATCHFILE_DOT_LIMIT</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">positive integer (non-positives trigger default)</td><td align="left" valign="top" rowspan="1" colspan="1">1024</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">The period in seconds between checking the watch file for changes.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[FastCGI]</span><br /><span class="nctnt ncbi-var">WatchFile.Timeout</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__FASTCGI__WATCHFILE_DOT_TIMEOUT</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.30"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">positive integer (non-positives trigger default, which is to disable the watch file checking)</td><td align="left" valign="top" rowspan="1" colspan="1">0</td></tr></tbody></table><div class="table-wrap-foot"><div class="small" id="ch_libconfig.TF.29"><p><sup>a</sup> case-insensitive: true, t, yes, y, false, f, no, n</p></div><div class="small" id="ch_libconfig.TF.30"><p><sup>b</sup> <a href="ch_libconfig.html#ch_libconfig.Environment">environment variable name</a> formed from registry section and entry name</p></div></div></div><p>CGI load balancing settings. <span class="nctnt ncbi-var">[CGI-LB]</span> section (see <a href="ch_libconfig.html#ch_libconfig.T10">this table</a>). </p><div class="table" id="ch_libconfig.T10"><div class="caption"><p>Table 10. CGI Load balancing configuration parameters</p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Purpose</th><th align="left" valign="top" rowspan="1" colspan="1">[Registry section]<br />Registry name<br /><br />Environment variable</th><th align="left" valign="top" rowspan="1" colspan="1">Valid values</th><th align="left" valign="top" rowspan="1" colspan="1">Default</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the internet domain.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">Domain</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__DOMAIN</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">a valid domain</td><td align="left" valign="top" rowspan="1" colspan="1">.ncbi.nlm.nih.gov</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the host IP address.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">Host</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__HOST</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">a valid host IP</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the cookie expiration period in seconds.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">LifeSpan</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__LIFESPAN</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">integer</td><td align="left" valign="top" rowspan="1" colspan="1">0</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the name of the load balancing cookie in the HTTP response.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">Name</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__NAME</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">a valid cookie name</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the cookie path.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">Path</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__PATH</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">a valid path</td><td align="left" valign="top" rowspan="1" colspan="1">(none)</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">Specify the cookie security mode.</td><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-var">[CGI-LB]</span><br /><span class="nctnt ncbi-var">Secure</span><br /><br /><span class="nctnt ncbi-var">NCBI_CONFIG__CGI-LB__SECURE</span>Â <a href="ch_libconfig.html#ch_libconfig.TF.32"><sup>b</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">BooleanÂ <a href="ch_libconfig.html#ch_libconfig.TF.31"><sup>a</sup></a></td><td align="left" valign="top" rowspan="1" colspan="1">false</td></tr></tbody></table><div class="table-wrap-foot"><div class="small" id="ch_libconfig.TF.31"><p><sup>a</sup> case-insensitive: true, t, yes, y, false, f, no, n</p></div><div class="small" id="ch_libconfig.TF.32"><p><sup>b</sup> <a href="ch_libconfig.html#ch_libconfig.Environment">environment variable name</a> formed from registry section and entry name</p></div></div></div></div><div class="sec" id="ch_cgi.appendix"><h3><span class="title">Supplementary Information </span></h3><p>Restrictions on arguments to the <span class="nctnt ncbi-class">CCgiCookie</span> constructor. </p><p> See <a href="ch_cgi.html#ch_cgi.T5">Table 1</a>.</p><div class="table" id="ch_cgi.T5"><div class="caption"><p>Table 1. Restrictions on arguments to the CCgiCookie constructor </p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Field </th><th align="left" valign="top" rowspan="1" colspan="1">Restrictions </th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">name (required)  </td><td align="left" valign="top" rowspan="1" colspan="1">No spaces; must be printable ASCII; cannot contain = , or ;  </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">value (required)  </td><td align="left" valign="top" rowspan="1" colspan="1">No spaces; must be printable ASCII; cannot contain , or ;  </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">domain (optional) </td><td align="left" valign="top" rowspan="1" colspan="1">No spaces; must be printable ASCII; cannot contain , or ;  </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">path (optional)  </td><td align="left" valign="top" rowspan="1" colspan="1">Case sensitive  </td></tr></tbody></table></div></div></div><div class="sec" id="ch_cgi.cgi_diag.html"><h2><span class="title">CGI Diagnostic Handling </span></h2><p>By default, CGI applications support three query parameters affecting <a href="ch_core.html#ch_core.diag">diagnostic output </a>: <a href="ch_cgi.html#ch_cgi.cgi_diag.html_ref_destination">diag-destination </a>, <a href="ch_cgi.html#ch_cgi.cgi_diag.html_ref_threshold">diag-threshold </a>, and <a href="ch_cgi.html#ch_cgi.cgi_diag.html_ref_format">diag-format </a>. It is possible to modify this behavior by overriding the virtual function <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=ConfigureDiagnostics">CCgiApplication::ConfigureDiagnostics </a>. (In particular, production applications may wish to disable these parameters by defining <span class="nctnt ncbi-func">ConfigureDiagnostics</span> to be a no-op.) </p><div class="sec" id="ch_cgi.cgi_diag.html_ref_destination"><h3><span class="title">diag-destination </span></h3><p>The parameter <span class="nctnt ncbi-var">diag-destination</span> controls where diagnostics appear. By default, there are two possible values (see <a href="ch_cgi.html#ch_cgi.T6">Table 2 </a>). </p><div class="table" id="ch_cgi.T6"><div class="caption"><p>Table 2. Effect of setting the diag-destination parameter </p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">value </th><th align="left" valign="top" rowspan="1" colspan="1">effects </th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">stderr </td><td align="left" valign="top" rowspan="1" colspan="1">Send diagnostics to the standard error stream (default behavior) </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">asbody </td><td align="left" valign="top" rowspan="1" colspan="1">Send diagnostics to the client in place of normal output </td></tr></tbody></table></div><p>However, an application can make other options available by calling <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=RegisterDiagFactory">RegisterDiagFactory </a> from its <span class="nctnt ncbi-func">Init</span> routine. In particular, calling  </p><pre><span class="nctnt-pre ncbi-code">#include &lt;connect/email_diag_handler.hpp&gt; <br />... <br />RegisterDiagFactory("email", new CEmailDiagFactory);</span></pre><p>and linking against <span class="nctnt ncbi-lib">xconnect</span> and <span class="nctnt ncbi-lib">connect</span> enables destinations of the form <span class="nctnt ncbi-monospace">email:user@host</span>, which will cause the application to e-mail diagnostics to the specified address when done.  </p><p>Similarly, calling  </p><pre><span class="nctnt-pre ncbi-code">#include &lt;html/commentdiag.hpp&gt; <br />... <br />RegisterDiagFactory("comments", new CCommentDiagFactory);</span></pre><p>and linking against <span class="nctnt ncbi-lib">xhtml</span> will enable the destination <span class="nctnt ncbi-monospace">comments</span>. With this destination, diagnostics will take the form of comments in the generated HTML, provided that the application has also used <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=SetDiagNode">SetDiagNode </a> to indicate where they should go. (Applications may call that function repeatedly; each invocation will affect all diagnostics until the next invocation. Also, <span class="nctnt ncbi-func">SetDiagNode</span> is effectively a no-op for destinations other than <span class="nctnt ncbi-monospace">comments</span>, so applications may call it unconditionally.)  </p><p>Those destinations are not available by default because they introduce additional dependencies; however, either may become a standard possibility in future versions of the toolkit. </p></div><div class="sec" id="ch_cgi.cgi_diag.html_ref_threshold"><h3><span class="title">diag-threshold </span></h3><p>The parameter <span class="nctnt ncbi-var">diag-threshold</span> sets the minimum <a href="ch_core.html#ch_core.diag_severity">severity level </a> of displayed diagnostics; its value can be either <span class="nctnt ncbi-monospace">fatal</span>, <span class="nctnt ncbi-monospace">critical</span>, <span class="nctnt ncbi-monospace">error</span>, <span class="nctnt ncbi-monospace">warning</span>, <span class="nctnt ncbi-monospace">info</span>, or <span class="nctnt ncbi-monospace">trace</span>. For the most part, setting this parameter is simply akin to calling <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=SetDiagPostLevel">SetDiagPostLevel </a>. However, setting <span class="nctnt ncbi-var">diag-threshold</span> to <span class="nctnt ncbi-monospace">trace</span> is <b>not </b> equivalent to calling <span class="nctnt ncbi-code">SetDiagPostLevel(eDiag_Trace)</span>; the former reports all diagnostics, whereas the latter reports only traces.  </p></div><div class="sec" id="ch_cgi.cgi_diag.html_ref_format"><h3><span class="title">diag-format </span></h3><p>Finally, the parameter <span class="nctnt ncbi-var">diag-format</span> controls diagnostics' default appearance; setting it is akin to calling <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=SetDiagPostFlag">{Set,Unset}DiagPostFlag </a>. Its value is a list of flags, delimited by spaces (which appear as "+" signs in URLs); possible flags are <span class="nctnt ncbi-monospace">file</span>, <span class="nctnt ncbi-monospace">path</span>, <span class="nctnt ncbi-monospace">line</span>, <span class="nctnt ncbi-monospace">prefix</span>, <span class="nctnt ncbi-monospace">severity</span>, <span class="nctnt ncbi-monospace">code</span>, <span class="nctnt ncbi-monospace">subcode</span>, <span class="nctnt ncbi-monospace">time</span>, <span class="nctnt ncbi-monospace">omitinfosev</span>, <span class="nctnt ncbi-monospace">all</span>, <span class="nctnt ncbi-monospace">trace</span>, <span class="nctnt ncbi-monospace">log</span>, and <span class="nctnt ncbi-monospace">default</span>. Every flag but <span class="nctnt ncbi-monospace">default</span> corresponds to a value in <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident?i=EDiagPostFlag">EDiagPostFlag </a>, and can be turned off by preceding its name with an exclamation point ("!"). <span class="nctnt ncbi-monospace">default</span> corresponds to the four flags which are on by default: <span class="nctnt ncbi-monospace">line</span>, <span class="nctnt ncbi-monospace">prefix</span>, <span class="nctnt ncbi-monospace">code</span>, and <span class="nctnt ncbi-monospace">subcode</span>, and may not be subtracted. </p></div></div><div class="sec" id="ch_cgi."><h2><span class="title">NCBI C++ CGI Classes </span></h2><p>The Common Gateway Interface (CGI) is a method used by web servers to pass information from forms displayed in a web browser to a program running on the server and then allow the program to pass a web page back. The NCBI C++ CGI Classes are used by the program running on the server to decode the CGI input from the server and to send a response. The library also supports cookies, which is a method for storing information on the user's machine. The library supports the http methods GET and POST via application/x-www-form-urlencoded, and supports the POST via multipart/form-data (often used for file upload).  In the POST via multipart/form-data, the data gets read into a <span class="nctnt ncbi-type">TCgiEntries</span>; you also can get the filename out of it (the name of the entry is as specified by "name=" of the data-part header).  For more information on CGI, see the book <b>HTML Sourcebook </b> by Ian Graham or http://hoohoo.ncsa.uiuc.edu/cgi/ </p><p>There are 5 main classes:  </p><p><span class="nctnt ncbi-class">CCgiRequest</span>â€“what the CGI program is getting from the client. </p><p><span class="nctnt ncbi-class">CCgiResponse</span>â€“what the CGI program is sending to the client. </p><p><span class="nctnt ncbi-class">CCgiEntry</span>â€“a single field value, optionally accompanied by a filename. </p><p><span class="nctnt ncbi-class">CCookie</span>â€“a single cookie </p><p><span class="nctnt ncbi-class">CCookies</span>â€“a cookie container </p><p>Note: In the following libraries you will see references to the following typedefs: <span class="nctnt ncbi-class">CNcbiOstream</span> and <span class="nctnt ncbi-class">CNcbiIstream</span>. On Solaris and NT, these are identical to the standard library output stream (ostream) and input stream (istream) classes. These typedefs are used on older computers to switch between the old stream library and the new standard library stream classes. Further details can be found in an accompanying document (to be written).  </p><p>A demo program, cgidemo.cpp, can be found in internal/c++/src/corelib/demo. </p><div class="sec" id="ch_cgi.prog_man_cgi_1_14"><h3><span class="title">CCgiRequest </span></h3><p><span class="nctnt ncbi-class">CCgiRequest</span> is the class that reads in the input from the web server and makes it accessible to the CGI program. </p><p><span class="nctnt ncbi-class">CCgiRequest</span> uses the following typedefs to simplify the code:  </p><pre><span class="nctnt-pre ncbi-code">typedef map&lt;string, string&gt;         TCgiProperties<br />typedef multimap&lt;string, CCgiEntry&gt; TCgiEntries<br />typedef TCgiEntries::iterator       TCgiEntriesI<br />typedef list&lt;string&gt;                TCgiIndexes</span></pre><p>All of the basic types come from the C++ Standard library (<span class="nctnt ncbi-monospace">http://www.sgi.com/Technology/STL/</span>) </p><p><b>CCgiRequest(int argc, char* argv[], CNcbiIstream* istr=0, bool indexes_as_entries=true) </b> </p><p>A CGI program can receive its input from three sources: the command line, environment variables, and an input stream. Some of this input is given to the <span class="nctnt ncbi-class">CCgiRequest</span> class by the following arguments to the constructor: </p><p><span class="nctnt ncbi-code">int argc, char* argv[]</span> : standard command line arguments. </p><p><span class="nctnt ncbi-code">CNcbiIstream* istr=0</span> : the input stream to read from. If 0, reads from stdin, which is what most web servers use. </p><p><span class="nctnt ncbi-code">bool indexes_as_entries=true</span> : if query has any ISINDEX like terms (i.e. no "=" sign), treat it as a form query (i.e. as if it had an "=" sign). </p><p>Example:  </p><pre><span class="nctnt-pre ncbi-code">CCgiRequest * MyRequest = new CCgiRequest(argc, argv);</span></pre><p><b>const TCgiEntries&amp; GetEntries(void) const </b> </p><p>Get a set of decoded form entries received from the web browser. So if you sent a cgi query of the form ?name=value, the multimap referenced by TCgiEntries&amp; includes "name" as a .first member and &lt;"value", ""&gt; as a .second member.  </p><p>TCgiEntries&amp; also includes "indexes" if "indexes_as_entries" in the constructor was "true". </p><p><b>const TCgiIndexes&amp; GetIndexes(void) const </b> </p><p>This performs a similar task as <span class="nctnt ncbi-func">GetEntries()</span>, but gets a set of decoded entries received from the web browser that are ISINDEX like terms (i.e. no "=" sign),. It will always be empty if "indexes_as_entries" in the constructor was "true"(default).  </p><p><b>const string&amp; GetProperty(ECgiProp prop) const </b> </p><p>Get the value of a standard property (empty string if not specified). See the "Standard properties" list below.  </p><p><b>static const string&amp; GetPropertyName(ECgiProp prop) </b> </p><p>The web server sends the CGI program properties of the web server and the http headers received from the web browser (headers are simply additional lines of information sent in a http request and response). This API gets the name(not value!) of standard properties. See the "Standard properties" list below.  </p><p><b>Standard properties: </b> </p><pre><span class="nctnt-pre ncbi-code">eCgi_ServerSoftware ,<br />eCgi_ServerName,<br />eCgi_GatewayInterface,<br />eCgi_ServerProtocol,<br />eCgi_ServerPort,        // see also "GetServerPort()"<br />// client properties<br />eCgi_RemoteHost,<br />eCgi_RemoteAddr,        // see also "GetRemoteAddr()"<br />// client data properties<br />eCgi_ContentType,<br />eCgi_ContentLength,     // see also "GetContentLength()"<br />// request properties<br />eCgi_RequestMethod,<br />eCgi_PathInfo,<br />eCgi_PathTranslated,<br />eCgi_ScriptName,<br />eCgi_QueryString,<br />// authentication info<br />eCgi_AuthType,<br />eCgi_RemoteUser,<br />eCgi_RemoteIdent,<br />// semi-standard properties(from HTTP header)<br />eCgi_HttpAccept,<br />eCgi_HttpCookie,<br />eCgi_HttpIfModifiedSince,<br />eCgi_HttpReferer,<br />eCgi_HttpUserAgent</span></pre><p><b>const string&amp; GetRandomProperty(const string&amp; key) const </b> </p><p>Gets value of any http header that is passed to the CGI program using environment variables of the form <span class="nctnt ncbi-var">"$HTTP_&lt;key&gt;"</span>. In general, these are special purpose http headers not included in the list above.  </p><p><b>Uint2 GetServerPort(void) const </b> </p><p>Gets the server port used by web browser to access the server.  </p><p><b>size_t GetContentLength(void) const </b> </p><p>Returns the length of the http request.  </p><p><b>const CCgiCookies&amp; GetCookies(void) const </b> </p><p>Retrieve the cookies that were sent with the request. Cookies are text buffers that are stored in the user's web browsers and can be set and read via http headers. See the CCookie and CCookies classes defined below.  </p><p><b>static SIZE_TYPE ParseEntries(const string&amp; str, TCgiEntries&amp; entries) </b> </p><p>This is a helper function that isn't normally used by CGI programs. It allows you to decode the URL-encoded string "str" into a set of entries &lt;"name", "value"&gt; and add them to the "entries" multimap. The new entries are added without overriding the original ones, even if they have the same names. If the "str" is in ISINDEX format then the entry "value" will be empty. On success, return zero; otherwise return location(1-base) of error.  </p><p><b>static SIZE_TYPE ParseIndexes(const string&amp; str, TCgiIndexes&amp; indexes) </b> </p><p>This is also a helper function not usually used by CGI programs. This function decodes the URL-encoded string "str" into a set of ISINDEX-like entries (i.e. no "=" signs in the query) and adds them to the "indexes" set. On success, return zero, otherwise return location(1-base) of error.  </p></div><div class="sec" id="ch_cgi.prog_man_cgi_1_15"><h3><span class="title">CCgiResponse </span></h3><p><span class="nctnt ncbi-class">CCgiResponse</span> is the object that takes output from the CGI program and sends it to the web browser via the web server.  </p><p><b>CNcbiOstream&amp; WriteHeader() const </b> </p><p><b>CNcbiOstream&amp; WriteHeader(CNcbiOstream&amp; out) const </b> </p><p>This writes the MIME header necessary for all documents sent back to the web browser. By default, this function assumes that the "Content-type" is "text/html". Use the second form of the function if you want to use a stream other that the default.  </p><p><b>void SetContentType(const string &amp;type) </b> </p><p>Sets the content type. By default this is "text/html". For example, if you were to send plaintext back to the client, you would set type to "text/plain". </p><p><b>string GetContentType(void) const </b> </p><p>Retrieves the content type.  </p><p><b>CNcbiOstream&amp; out(void) const </b> </p><p>This returns a reference to the output stream being used by the <span class="nctnt ncbi-class">CCgiResponse</span> object. Example:  </p><pre><span class="nctnt-pre ncbi-code"><br />CCgiResponse Response; <br />Response.WriteHeader(); <br />Response.out() &lt;&lt; "hello, world" &lt;&lt; flush;</span></pre><p><b>CNcbiOstream* SetOutput(CNcbiOstream* out) </b> </p><p>Sets the default output stream. By default this is stdout, which is what most web servers use.  </p><p><b>CNcbiOstream* GetOutput(void) const </b> </p><p>Get the default output stream.  </p><p><b>void Flush() const </b> </p><p>Flushes the output stream.  </p><p><b>void SetRawCgi(bool raw) </b> </p><p>Turns on non-parsed cgi mode. When this is turned on AND the name of the cgi program begins with "nph-", then the web server does no processing of the data sent back to the client. In this situation, the client must provide all appropriate http headers. This boolean switch causes some of these headers to be sent.  </p><p><b>bool IsRawCgi(void) const </b> </p><p>Check to see if non-parsed cgi mode is on.  </p><p><b>void SetHeaderValue(const string&amp; name, const string&amp; value) </b> </p><p>Sets an http header with given name and value. For example, SetHeaderValue("Mime-Version", "1.0"); will create the header "Mime-Version: 1.0".  </p><p><b>void SetHeaderValue(const string&amp; name, const tm&amp; value) </b> </p><p>Similar to the above, but sets a header value using a date. See time.h for the definition of tm.  </p><p><b>void RemoveHeaderValue(const string&amp; name) </b> </p><p>Remove the header with name name.  </p><p><b>string GetHeaderValue(const string&amp; name) const </b> </p><p>Get the value of the header with name name.  </p><p><b>bool HaveHeaderValue(const string&amp; name) const </b> </p><p>Check to see if the header with name name exists.  </p><p><b>void AddCookie(const string&amp; name, const string&amp; value) void AddCookie(const CCgiCookie&amp; cookie) </b> </p><p>Add a cookie to the response. This can either be a name, value pair or use the CCookie class described below.  </p><p><b>void AddCookies(const CCgiCookies&amp; cookies) </b> </p><p>Add a set of cookies to the response. See the CCookies class described below. </p><p><b>const CCgiCookies&amp; Cookies(void) const CCgiCookies&amp; Cookies(void) </b> </p><p>Return the set of cookies to be sent in the response.  </p><p><b>void RemoveCookie(const string&amp; name) </b> </p><p>Remove the cookie with the name name.  </p><p><b>void RemoveAllCookies(void) </b> </p><p>Remove all cookies.  </p><p><b>bool HaveCookies(void) const </b> </p><p>Are there cookies?  </p><p><b>bool HaveCookie(const string&amp; name) const </b> </p><p>Is there a cookie with the given name?  </p><p><b>CCgiCookie* FindCookie(const string&amp; name) const </b> </p><p>Return a cookie with the given name.  </p></div><div class="sec" id="ch_cgi.prog_man_cgi_1_16"><h3><span class="title">CCgiCookie </span></h3><p>A cookie is a name, value string pair that can be stored on the user's web browser. Cookies are allocated per site and have restrictions on size and number. Cookies have attributes, such as the domain they originated from. <span class="nctnt ncbi-class">CCgiCookie</span> is used by the <span class="nctnt ncbi-class">CCgiRequest</span> and <span class="nctnt ncbi-class">CCgiResponse</span> classes.  </p><p><b>CCgiCookie(const string&amp; name, const string&amp; value) </b> </p><p>Creates a cookie with the given name and value. Throw the "invalid_argument" if "name" or "value" have invalid format:  </p><ul><li><p>the "name" must not be empty; it must not contain '=' </p></li><li><p>both "name" and "value" must not contain: ";, "  </p></li></ul><p><b>const string&amp; GetName (void) const </b> </p><p>Get the cookie name. The cookie name cannot be changed.  </p><p><b>CNcbiOstream&amp; Write(CNcbiOstream&amp; os) const </b> </p><p>Write the cookie out to ostream os. Normally this is handled by <span class="nctnt ncbi-class">CCgiResponse</span>. </p><p><b>void Reset(void) </b> </p><p>Reset everything but the name to the default state </p><p><b>void CopyAttributes(const CCgiCookie&amp; cookie) </b> </p><p>Set all attribute values(but name!) to those from "cookie"  </p><p><b>void SetValue (const string&amp; str) void SetDomain (const string&amp; str) void SetValidPath (const string&amp; str) void SetExpDate (const tm&amp; exp_date) void SetSecure (bool secure) // "false" by default </b> </p><p>These function set the various properties of a cookie. These functions will throw "invalid_argument" if "str" has invalid format. For the definition of tm, see time.h.  </p><p><b>bool GetValue (string* str) const bool GetDomain (string* str) const bool GetValidPath (string* str) const bool GetExpDate (string* str) const bool GetExpDate (tm* exp_date) const bool GetSecure (void) const </b> </p><p>These functions return true if the property is set. They also return value of the property in the argument. If the property is not set, str is emptied. These functions throw the "invalid_argument" exception if the argument is a zero pointer.  </p><p>The string version of <span class="nctnt ncbi-func">GetExpDate</span> will return a string of the form "Wed Aug 9 07:49:37 1994" </p></div><div class="sec" id="ch_cgi.prog_man_cgi_1_17"><h3><span class="title">CCgiCookies </span></h3><p><span class="nctnt ncbi-class">CCgiCookies</span> aggregates a collection of <span class="nctnt ncbi-class">CCgiCookie</span>  </p><p><b>CCgiCookies(void) CCgiCookies(const string&amp; str) </b> </p><p>Creates a <span class="nctnt ncbi-class">CCgiCookies</span> container. To initialize it with a cookie string, use the format: "name1=value1; name2=value2; ..."  </p><p><b>CCgiCookie* Add(const string&amp; name, const string&amp; value) </b> </p><p>Add a cookie with the given name, value pair. Note the above requirements on the string format. Overrides any previous cookie with same name.  </p><p><b>CCgiCookie* Add(const CCgiCookie&amp; cookie) </b> </p><p>Add a <span class="nctnt ncbi-class">CCgiCookie</span>.  </p><p><b>void Add(const CCgiCookies&amp; cookies) </b> </p><p>Adds a <span class="nctnt ncbi-class">CCgiCookie</span> of cookies.  </p><p><b>void Add(const string&amp; str) </b> </p><p>Adds cookies using a string of the format "name1=value1; name2=value2; ..." Overrides any previous cookies with same names.  </p><p><b>CCgiCookie* Find(const string&amp; name) const </b> </p><p>Looks for a cookie with the given name. Returns zero not found.  </p><p><b>bool Empty(void) const </b> </p><p>"true" if contains no cookies.  </p><p><b>bool Remove(const string&amp; name) </b> </p><p>Find and remove a cookie with the given name. Returns "false" if one is not found.  </p><p><b>void Clear(void) </b> </p><p>Remove all stored cookies  </p><p><b>CNcbiOstream&amp; Write(CNcbiOstream&amp; os) const </b> </p><p>Prints all cookies into the stream "os" (see also <span class="nctnt ncbi-class">CCgiCookie::</span><span class="nctnt ncbi-func">Write()</span>). Normally this is handled by <span class="nctnt ncbi-class">CCgiResponse</span>. </p></div></div><div class="sec" id="ch_cgi.html"><h2><span class="title">An example web-based CGI application </span></h2><ul><li><p><a href="ch_cgi.html#ch_cgi.intro">Introduction  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.descrip">Program description  </a> </p></li><li><p><a href="ch_cgi.html#ch_cgi.design">Program design: Distributing the work  </a> </p></li></ul><div class="sec" id="ch_cgi.intro"><h3><span class="title">Introduction </span></h3><p>The previous two chapters described the NCBI C++ Toolkit's <a href="ch_cgi.html#ch_cgi.cg_develop_apps">CGI </a> and <a href="ch_html.html#ch_html.webpgs.html">HTML </a> classes, with an emphasis on their independence from one another. In practice however, a real application must employ both types of objects, with a good deal of inter-dependency.  </p><p>As described in the description of the CGI classes, the <a href="ch_cgi.html#ch_cgi.cgi_res_class">CNcbiResource </a> class can be used to implement an application whose functionality varies with the query string. Specifically, the resource class contains a list of <span class="nctnt ncbi-class">CNcbiCommand</span> objects, each of which has a defined <span class="nctnt ncbi-func">GetName()</span> and <span class="nctnt ncbi-func">GetEntry()</span>method. The only command selected for execution on a given query is the one whose <span class="nctnt ncbi-func">GetName()</span> and <span class="nctnt ncbi-func">GetEntry()</span> values match the leading <span class="nctnt ncbi-monospace">key=value</span> pair in the query string. </p><p>The <span class="nctnt ncbi-class">CHelloResource</span> class has different commands which will be executed depending on whether the query string invoked an <span class="nctnt ncbi-monospace">init</span> or a <span class="nctnt ncbi-monospace">reply</span> command. For many applications however, this selection mechanism adds unnecessary complexity to the interface, as the application always performs the same function, albeit on different input. In these cases, there is no need to use a <span class="nctnt ncbi-class">CNcbiResource</span> object, or <span class="nctnt ncbi-class">CNcbiCommand</span> objects, as the necessary functionality can be encoded directly in the application's <span class="nctnt ncbi-func">ProcessRequest()</span> method. The example program described in this section uses this simpler approach. </p></div><div class="sec" id="ch_cgi.descrip"><h3><span class="title">Program description </span></h3><p>The <span class="nctnt ncbi-app">car.cgi</span> program presents an HTML form for ordering a custom color car with selected features. The form includes a group of checkboxes (listing individual features) and a set of radio buttons listing possible colors. Initially, no features are selected, and the default color is black. Following the form, a summary stating the currently selected features and color, along with a price quote, is displayed. When the <span class="nctnt ncbi-monospace">submit</span> button is clicked, the form generates a new query string (which includes the selected features and color), and the program is restarted.  </p><p>The program uses a <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml/classCHTMLPage.html">CHTMLPage </a> object with a template file (<a href="ch_demo.html#ch_demo.carhtml">car.html </a>) to create the display. The template file contains three &lt;@tag@&gt; locations, which the program uses to map <span class="nctnt ncbi-class">CNCBINode</span>s to the page, using the <span class="nctnt ncbi-func">AddTagMap()</span> method. Here is an outline of the execution sequence: </p><p>Create an instance of class <span class="nctnt ncbi-class">CCar</span> named <span class="nctnt ncbi-var">car</span>. </p><p>Load <span class="nctnt ncbi-var">car</span> with the color and features specified in the query string. </p><p>Create a <span class="nctnt ncbi-class">CHTMLPage</span> named <span class="nctnt ncbi-var">page</span>. </p><p>Generate a <span class="nctnt ncbi-class">CHTML_form</span> object using the features and color currently selected for <span class="nctnt ncbi-var">car</span>, and map that HTML form to the &lt;@FORM@&gt; tag in <span class="nctnt ncbi-var">page</span>. </p><p>Generate the summary statement and save it in a <span class="nctnt ncbi-class">CHTMLText</span> node mapped to the &lt;@SUMMARY@&gt; tag. </p><p>Generate a price quote and save it in a <span class="nctnt ncbi-class">CHTMLText</span> node mapped to the &lt;@PRICE@&gt; tag. </p><p>Output <span class="nctnt ncbi-var">page</span> and exit.  </p><p>The <span class="nctnt ncbi-class">CCar</span> created in step 1 initially has the default color (black) and no features. Any features or colors specified in the query string with which the program was invoked are added to <span class="nctnt ncbi-var">car</span> in step 2, prior to generating the HTML display elements. In step 4, the form element is created using the set of possible features and the set of possible colors. These sets of attributes are stored as static data members in an external utility class, <span class="nctnt ncbi-class">CCarAttr</span>. Each feature corresponds to a <span class="nctnt ncbi-class">CHTML_checkbox</span> element in the form, and each color corresponds to a <span class="nctnt ncbi-class">CHTML_radio</span> button. The selected color, along with all currently selected features, will be displayed as selected in the form. </p><p>The summary statement uses a <span class="nctnt ncbi-class">CHTML_ol</span> list element to itemize the selected features in <span class="nctnt ncbi-var">car</span>. The price is calculated as <span class="nctnt ncbi-var">CCar::m_BasePrice</span> plus an additional $1000 per feature. The <span class="nctnt ncbi-monospace">submit</span> button generates a fresh page with the new query string, as the <span class="nctnt ncbi-code">action</span> attribute of the form is the URL of <span class="nctnt ncbi-app">car.cgi</span>. </p></div><div class="sec" id="ch_cgi.design"><h3><span class="title">Program design: Distributing the work </span></h3><p>The program uses three classes: <span class="nctnt ncbi-class">CCar</span>, <span class="nctnt ncbi-class">CCarAttr</span>, and <span class="nctnt ncbi-class">CCarCgi</span>. The <span class="nctnt ncbi-class">CCar</span> class knows nothing about HTML nodes or CGI objects - its only functions are to store the currently selected color and features, and compute the resulting price:  </p><pre><span class="nctnt-pre ncbi-code">class CCar<br />{<br />public:<br />    CCar(unsigned base_price = 12000) { m_BasePrice = base_price; }<br />    // Mutating member functions<br />    void AddFeature(const string&amp; feature_name);<br />    void SetColor(const string&amp; color_name);<br />    // Access member functions<br />    bool HasFeature(const string&amp; feature_name) const;<br />    string GetColor(void) const;<br />    string GetPrice(void) const;<br />    const set&lt;string&gt;&amp; GetFeatures() const;<br />private:<br />    set&lt;string&gt; m_Features;<br />    string      m_Color;<br />    unsigned    m_BasePrice;<br />};</span></pre><p>Instead, the <span class="nctnt ncbi-class">CCar</span> class provides an interface to all of its data members, thus allowing the application to get/set features of the car as needed. The static utility class, <span class="nctnt ncbi-class">CCarAttr</span>, simply provides the sets of possible features and colors, which will be used by the application in generating the HTML form for submission:  </p><pre><span class="nctnt-pre ncbi-code">class CCarAttr {<br />public:<br />    CCarAttr(void);<br />    static const set&lt;string&gt;&amp; GetFeatures(void) { return sm_Features; }<br />    static const set&lt;string&gt;&amp; GetColors  (void) { return sm_Colors; }<br />private:<br />    static set&lt;string&gt; sm_Features;<br />    static set&lt;string&gt; sm_Colors;<br />};</span></pre><p>Both of these classes are defined in a header file which is <span class="nctnt ncbi-code">#include</span>'d in the <span class="nctnt ncbi-path">*.cpp</span> files. Finally, the application class does most of the actual work, and this class must know about <span class="nctnt ncbi-class">CCar</span>, <span class="nctnt ncbi-class">CCarAttr</span>, <span class="nctnt ncbi-lib">HTML</span>, and <span class="nctnt ncbi-lib">CGI</span> objects. The <span class="nctnt ncbi-class">CCarCgi</span> class has the following interface:   </p><pre><span class="nctnt-pre ncbi-code">class CCarCgi : public CCgiApplication<br />{<br />public:<br />    virtual int ProcessRequest(CCgiContext&amp; ctx);<br />private:<br />    CCar* CreateCarByRequest(const CCgiContext&amp; ctx);<br />    void PopulatePage(CHTMLPage&amp; page, const CCar&amp; car);<br />    static CNCBINode* ComposeSummary(const CCar&amp; car);<br />    static CNCBINode* ComposeForm   (const CCar&amp; car);<br />    static CNCBINode* ComposePrice  (const CCar&amp; car);<br />    static const char sm_ColorTag[];<br />    static const char sm_FeatureTag[];<br />};</span></pre><p>The source code is distributed over three files:  </p><p>car.hpp </p><p>car.cpp </p><p>car_cgi.cpp </p><p>The <span class="nctnt ncbi-class">CCar</span> and <span class="nctnt ncbi-class">CCarAttr</span> classes are defined in <span class="nctnt ncbi-path">car.hpp</span>, and implemented in <span class="nctnt ncbi-path">car.cpp</span>. Both the class definition and implementation for the CGI application class are in <span class="nctnt ncbi-path">car_cgi.cpp</span>. With this design, only the application class will be affected by changes made to either the HTML or CGI class objects. The additional files needed to compile and run the program are:  </p><p><a href="ch_demo.html#ch_demo.carhtml">car.html </a> </p><p>Makefile.car_app </p></div></div><div class="sec" id="ch_cgi.cgi_response_codes"><h2><span class="title">CGI Response Codes </span></h2><p>Wherever possible the client when encountering errors should return an appropriate response code consisting of the three digits <i>DDD </i>. In the case of client error codes, these begin with a "4" (4xx). <a href="ch_cgi.html#ch_cgi.T7">Table 7 </a> contains a summary of these codes. </p><blockquote id="idp30552640"><p>Note that error code 404 should be reserved for situations when the requested file does not exist. It should not be used as a "catch-all" such as when the client simply uses bogus parameters. </p></blockquote><div class="table" id="ch_cgi.T7"><div class="caption"><p>Table 7. CGI Client Error Codes (4XX) </p></div><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">Error Code </th><th align="left" valign="top" rowspan="1" colspan="1">Description </th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">400 </td><td align="left" valign="top" rowspan="1" colspan="1">Bad request; the client erred in the request and should not reattempt it without modifications. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">401 </td><td align="left" valign="top" rowspan="1" colspan="1">Unauthorized; the page is password protected but required credentials were not presented. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">402 </td><td align="left" valign="top" rowspan="1" colspan="1">Payment required; reserved. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">403 </td><td align="left" valign="top" rowspan="1" colspan="1">Forbidden; the client is not allowed here. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">404 </td><td align="left" valign="top" rowspan="1" colspan="1">Not found; the requested resource (as indicated in the path) does not exist on the server, temporarily or permanently. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">405 </td><td align="left" valign="top" rowspan="1" colspan="1">Method not allowed; the server must supply allowedrequest methods in "Allow:" HTTP header. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">406 </td><td align="left" valign="top" rowspan="1" colspan="1">Not acceptable; content characteristics are unacceptable to produce the response. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">407 </td><td align="left" valign="top" rowspan="1" colspan="1">Proxy authentication required; similar to 401, but for proxy. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">408 </td><td align="left" valign="top" rowspan="1" colspan="1">Request timeout; the client does not furnish the entire request within the allotted time. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">409 </td><td align="left" valign="top" rowspan="1" colspan="1">Conflict; usually means bad form submission via PUT method. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">410 </td><td align="left" valign="top" rowspan="1" colspan="1">Gone; the resource is and will be no longer available and forwarding address is and will not be known. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">411 </td><td align="left" valign="top" rowspan="1" colspan="1">Length required; the client must use content-length in the request. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">412 </td><td align="left" valign="top" rowspan="1" colspan="1">Precondition failed; request header inquired for a condition that doesn't hold. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">413 </td><td align="left" valign="top" rowspan="1" colspan="1">Request too big; self-explanatory. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">414 </td><td align="left" valign="top" rowspan="1" colspan="1">Request too long; query-line element is exceeding the maximal size(but the body, if any, can be okay). </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">415 </td><td align="left" valign="top" rowspan="1" colspan="1">Unsupported media; resource does not support requested format. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">416 </td><td align="left" valign="top" rowspan="1" colspan="1">Bad range; pertains to multi-part messages when the client requested a fragment that is out of allowed range. </td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1">417 </td><td align="left" valign="top" rowspan="1" colspan="1">Expectation failed; "Expect:" from the HTTP/1.1 header is not met. </td></tr></tbody></table></div></div><div class="sec" id="ch_cgi.FCGI_Redirection_and_Debugging_C"><h2><span class="title">FCGI Redirection and Debugging C++ Toolkit CGI Programs</span></h2><p>Development, testing, and debugging of CGI applications can be greatly facilitated by making them FastCGI-capable and using an FCGI redirector script.</p><p>Applications that were written to use the C++ Toolkit CGI framework (see <a href="ch_cgi.html#ch_cgi.html">example above</a>) can easily be made to run under your account, on your development machine, and in a number of ways (e.g. standalone, with special configuration, under a debugger, using a memory checker, using <span class="nctnt ncbi-cmd">strace</span>, etc.). This is accomplished by "tunneling" through a simple FCGI redirector script that forwards HTTP requests to your application and returns the HTTP responses.</p><p>The process is described in the following sections:</p><ul><li><p><a href="ch_cgi.html#ch_cgi.Creating_and_debugging_a_sample_F">Creating and debugging a sample FastCGI application</a></p></li><li><p><a href="ch_cgi.html#ch_cgi.Debugging_an_existing_CGI_or_FCGI">Debugging an existing CGI or FCGI application</a></p></li></ul><div class="sec" id="ch_cgi.Creating_and_debugging_a_sample_F"><h3><span class="title">Creating and debugging a sample FastCGI application</span></h3><p>If you are starting from scratch, use the <a href="ch_proj.html#ch_proj.new_project_Starting">new_project</a> script to create a CGI that is already set up for FCGI redirection:</p><pre><span class="nctnt-pre ncbi-cmd">new_project foobar app/cgi<br />cd foobar<br />make</span></pre><p>This creates the following files:</p><div class="table" id="ch_cgi.T.nc_filepurposefmy_debug_fcgithi"><table><tbody><tr><th align="left" valign="top" rowspan="1" colspan="1">File</th><th align="left" valign="top" rowspan="1" colspan="1">Purpose</th></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-path">ffoobar.fcgi</span></td><td align="left" valign="top" rowspan="1" colspan="1">This is the FCGI version of the <span class="nctnt ncbi-path">foobar.cgi</span> application and should be run when debugging.</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-path">ffoobar.cgi</span></td><td align="left" valign="top" rowspan="1" colspan="1">This is the FCGI redirector script. It is the CGI called from the browser, and it is the only file that needs to be copied to the web server for FCGI redirection.</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-path">ffoobar.ini</span></td><td align="left" valign="top" rowspan="1" colspan="1">This can be edited as desired (e.g. setting <span class="nctnt ncbi-monospace">[FCGI] Iterations = 1</span>). <span class="nctnt highlight">Note:</span> Unlike â€œplainâ€ CGIs, FastCGI applications usually handle more than one HTTP request. While they do it sequentially, and there are no multithreading issues, additional care should still be taken to ensure that there is no unwanted interference between different HTTP requests, and that operation is correct under more strict resource (such as heap) accounting. So, to verify how a FastCGI application will work in real life you should test it with the number of iterations greater than 1.</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-path">foobar.cgi</span></td><td align="left" valign="top" rowspan="1" colspan="1">This is the CGI application. Use it if you want to directly invoke your application as a CGI. It isn't used in the FCGI redirection process.</td></tr><tr><td align="left" valign="top" rowspan="1" colspan="1"><span class="nctnt ncbi-path">foobar.html</span></td><td align="left" valign="top" rowspan="1" colspan="1">This is the web page that your CGI / FCGI applications will load. The name is the same for both CGI and FCGI. <span class="nctnt highlight">Note:</span> By default, the HTML page must be located with your application and it must match your project name (but with the <span class="nctnt ncbi-path">.html</span> extension). The HTML page name can be changed in the <span class="nctnt ncbi-func">ProcessRequest()</span> method.</td></tr></tbody></table></div><p>The steps to debugging your new application using FCGI redirection are:</p><dl class="labeled-list"><dt>1</dt><dd><p class="no_top_margin">Install the <span class="nctnt ncbi-path">ffoobar.cgi</span> redirector script on the web server.</p></dd><dt>2</dt><dd><p class="no_top_margin">Set up the application:</p><dl class="labeled-list"><dt>a</dt><dd><p class="no_top_margin">Configure with <span class="nctnt ncbi-path">ffoobar.ini</span> - set <span class="nctnt ncbi-monospace">[FastCGI] Iterations = 1</span>.</p></dd><dt>b</dt><dd><p class="no_top_margin">Set a breakpoint on <span class="nctnt ncbi-func">ProcessRequest()</span> and run <span class="nctnt ncbi-path">ffoobar.fcgi</span> under the debugger (or run under a memory checker or other tool).</p></dd></dl></dd><dt>3</dt><dd><p class="no_top_margin">From your web browser (or using <span class="nctnt ncbi-cmd">GET</span>/<span class="nctnt ncbi-cmd">POST</span> command-line utilities), submit a web request to <span class="nctnt ncbi-path">ffoobar.cgi</span>. The request/response will be tunneled to/from <span class="nctnt ncbi-path">ffoobar.fcgi</span>.</p></dd></dl></div><div class="sec" id="ch_cgi.Debugging_an_existing_CGI_or_FCGI"><h3><span class="title">Debugging an existing CGI or FCGI application</span></h3><p>The steps to debugging an existing CGI or FCGI application using FCGI redirection are (assuming the name is <span class="nctnt ncbi-path">foobar.cgi</span>):</p><dl class="labeled-list"><dt>1</dt><dd><p class="no_top_margin">If it's a "plain" CGI, then make it FastCGI-capable - change the makefile to build <span class="nctnt ncbi-path">ffoobar.fcgi</span> instead of <span class="nctnt ncbi-path">foobar.cgi</span> and to link with <span class="nctnt ncbi-lib">xfcgi.lib</span> instead of <span class="nctnt ncbi-lib">xcgi.lib</span>. <span class="nctnt highlight">Note:</span> the application must use the C++ Toolkit's CGI framework (as in the above <a href="ch_cgi.html#ch_cgi.html">example</a>).</p></dd><dt>2</dt><dd><p class="no_top_margin">Rebuild the application.</p></dd><dt>3</dt><dd><p class="no_top_margin">Install the <span class="nctnt ncbi-path">ffoobar.cgi</span> redirector script on the web server (in place of the existing CGI).</p></dd><dt>4</dt><dd><p class="no_top_margin">Set up the application:</p><dl class="labeled-list"><dt>a</dt><dd><p class="no_top_margin">Copy the application <span class="nctnt ncbi-path">ffoobar.fcgi</span> to a development host.</p></dd><dt>b</dt><dd><p class="no_top_margin">Configure with <span class="nctnt ncbi-path">ffoobar.ini</span> - set <span class="nctnt ncbi-monospace">[FastCGI] Iterations = 1</span>.</p></dd><dt>c</dt><dd><p class="no_top_margin">Set a breakpoint on <span class="nctnt ncbi-func">ProcessRequest()</span> and run <span class="nctnt ncbi-path">ffoobar.fcgi</span> under the debugger (or run under a memory checker or other tool). </p></dd></dl></dd><dt>5</dt><dd><p class="no_top_margin">From your web browser (or using <span class="nctnt ncbi-cmd">GET</span>/<span class="nctnt ncbi-cmd">POST</span> command-line utilities), submit a web request to <span class="nctnt ncbi-path">ffoobar.cgi</span>. The request/response will be tunneled to/from <span class="nctnt ncbi-path">ffoobar.fcgi</span>.</p></dd></dl></div></div></div></div><div class="col four_col last"><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>In this page</h3></div></div><div class="portlet_content"><ul><li><a href="#ch_cgi.cg_develop_apps">Developing CGI applications </a></li><li><a href="#ch_cgi.cgi_diag.html">CGI Diagnostic Handling </a></li><li><a href="#ch_cgi.">NCBI C++ CGI Classes </a></li><li><a href="#ch_cgi.html">An example web-based CGI application </a></li><li><a href="#ch_cgi.cgi_response_codes">CGI Response Codes </a></li><li><a href="#ch_cgi.FCGI_Redirection_and_Debugging_C">FCGI Redirection and Debugging C++ Toolkit CGI Programs</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Download</h3></div></div><div class="portlet_content"><ul><li><a href="pdf/ch_cgi.pdf">PDF version of this page</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Search</h3></div></div><div class="portlet_content"><form name="frmSymbolSearch" onsubmit="return SymbolSearch('toolkit')" action="/" id="frmSymbolSearch"><table><tbody><tr align="center" valign="middle"><td colspan="2" nowrap="nowrap"><input name="__symbol" size="22" style="vertical-align:                                          middle;" onkeypress="SymbolSearchKeyPress('toolkit',event)" type="text" />Â Â  <input value="Search" style="vertical-align: middle;" onclick="javasrcipt:SymbolSearch('toolkit');" type="button" /></td></tr><tr class="internal-only"><th style="text-align:left">Public</th><th style="text-align:left">Internal</th></tr><tr><td><input id="pToolkitAll" name="__symboloc" type="radio" checked="checked" /><span title="Search in the C/C++ source code and in this Book">All</span></td><td class="internal-only"><input id="iToolkitAll" name="__symboloc" type="radio" /><span title="Search in the C/C++ source code,  this Book, and Wiki">All</span></td></tr><tr><td><input id="pLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td><td class="internal-only"><input id="iLXR" name="__symboloc" type="radio" /><span title="Search the symbol in the source code using LINUX Cross-Reference browser">LXR</span></td></tr><tr><td><input id="pLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td><td class="internal-only"><input id="iLib" name="__symboloc" type="radio" /><span title="Locate the Toolkit library(es) where the symbol is defined">Library</span></td></tr></tbody></table></form></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Source Browsers</h3></div></div><div class="portlet_content"><ul><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">LXR</a></li><li class="external-only"><a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">Doxygen</a></li><li class="internal-only">LXR: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/lxr/ident">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/lxr/ident">internal</a></li><li class="internal-only">Doxygen: <a href="http://www.ncbi.nlm.nih.gov/IEB/ToolBox/CPP_DOC/doxyhtml">public</a> / <a href="http://intranet.ncbi.nlm.nih.gov/ieb/ToolBox/CPP_DOC/doxyhtml">internal</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>SVN Source Repository</h3></div></div><div class="portlet_content"><ul><li><a href="http://www.ncbi.nlm.nih.gov/bookshelf/br.fcgi?book=toolkit&amp;part=ch_getcode_svn#ch_getcode_svn.code_retrieval">Server</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/c++">Web
                            (dev)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/trunk/internal/c++">Web
                            (extra)</a></li><li><a href="https://svn.ncbi.nlm.nih.gov/viewvc/toolkit/production/components">Web (prod)</a></li></ul></div></div><div class="portlet"><div class="portlet_head"><div class="portlet_title"><h3>Resources</h3></div></div><div class="portlet_content"><ul><li class="internal-only"><a href="http://intranet.ncbi.nlm.nih.gov/wiki-private/CxxToolkit">Wiki</a></li><li class="internal-only"><a href="http://jira/browse/CXX">JIRA</a></li><li class="internal-only"><a href="http://intranet/ieb/ToolBox/STAT/test_stat/test_stat_ext.cgi"><span title="View results of testsuite runs on the automatic C++ Toolkit builds">Testsuite</span></a></li><li><a href="release_notes.html">Release Notes</a></li><li><a href="ch_getcode_svn.html#ch_getcode_svn.ftp_download">Download</a></li><li><a href="pdf/TOC.pdf">PDF of the book</a></li><li><a href="ch_style.html">Coding Style</a></li><li><a href="ch_faq.html#ch_faq.mailing_lists">Mailing Lists</a></li><li><a href="mailto:CPP-CORE@NCBI.NLM.NIH.GOV"><span title="Contact C++ Toolkit group">Help and Support</span></a></li></ul></div></div></div></div></div></div></body></html>
