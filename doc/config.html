<!--#set var="TITLE" value="Installation and configuration" -->
<!--#set var="DOCROOT" value="." -->
<!--#include virtual="./ssi/header.shtml" -->

<h1>Installation and configuration</h1>

<ul>
  <li> <a href="#ref_Source">
       NCBI C++ source code repository</a> 
  <li> <a href="#ref_Configure">
       Configuration and installation script <b><i>configure</i></b></a>
  <li> <a href="#ref_Build">
		  Structure of the <i>build tree</i> produced by <b><i>configure</i></b></a>
  <li> <a href="#ref_Running">
       Running the <b><i>configure</i></b> script</a>
		 <ul>
		   <li> <a href="#ref_GetHelp">
			Getting synopsis of available configuration options</a>
		   <li> <a href="#ref_DebugVsRelease">
			<i>Debug</i> vs. <i>Release</i> configuration</a>
		   <li> <a href="#ref_DLL">
			Building shared libraries (DLLs)</a>
		   <li> <a href="#ref_RunPath">
			Hard-coding run-time DLL path into the executables and DLLs</a>
		   <li> <a href="#ref_MT">
			Multi-Thread safe compilation, and linking with MT libraries</a>
		   <li> <a href="#ref_64">
			Building in 64-bit mode</a>
		   <li> <a href="#ref_GnuMakeAutodep">
			Automatic generation of dependencies (for GNU <i>make</i> only)</a>
		   <li> <a href="#ref_NamingBuildTree">
			Naming the <i>build tree</i></a>
		   <li> <a href="#ref_AfterConf">
			After-configure user callback script</a>
		   <li> <a href="#ref_ToolsAndFlags">
			Tools and Flags</a>
         <li> <a href="#ref_Localization">
         Localization for the system and third-party packages</a>
         <li> <a href="#ref_ProhibitPackage">
         Prohibiting the use of some of the system and third-party packages</a>
         <li> <a href="#ref_Optional">
         Optional projects</a>
		 <li> <a href="#ref_ProjectList">
         Finer-grained control of projects: <i>--with-projects</i></a> 
         <li> <a href="#ref_Misc">
         Miscellaneous: <i>--without-exe, --without-execopy,
	 --with-lib-rebuilds(=ask)</i></a>
         <li> <a href="#ref_Wrappers">
         Compiler-specific <b><i>configure</i></b> wrappers
         (<i>compilers/*.sh</i>) </a>
         <li> <a href="#ref_PreBuiltHeaders">
         Pre-built configuration headers
         (<i>compilers/ncbiconf.*</i>) </a>
		 </ul>
  <li> <a href="#ref_Reconf">
       Quick reconfiguration</a>
	 </a>
  <li> <a href="#ref_Example">
       An example of configuration, installation and build</a>
  <li> <a href="#ref_Compilers">
       List of supported compilers</a>
  <li> <a href="#ref_AdHoc">
       Ad-hoc installations</a>
	 <ul>
		<li> <a href="#ref_MsvcProj">
		  MS Visual C++</a>
	   <ul>
		  <li> <a href="#ref_MsvcProjDownload">
		    Getting the Toolkit sources</a>
		  <li> <a href="#ref_MsvcProjFiles">
		    Working with project files</a>		    
		  <li> <a href="#ref_MsvcProjTree">
		    Building the whole NCBI C++ tree locally</a>
		  <li> <a href="#ref_MsvcProjCXX">
		    Using pre-built NCBI C++ Toolkit in your projects</a>
		  <li> <a href="#ref_MsvcProjWxwin">
		    Using wxWindows</a>
		  <li> <a href="#ref_MsvcProjC">
		    Using NCBI C Toolkit</a>
		  <li> <a href="#ref_MsvcProjSettings">
		    Mandatory project settings (RTTI, MT-safety)</a>
	   </ul>
      </li>
		<li> <a href="#ref_Mac">
		  Macintosh</a>
	   <ul>
		  <li> <a href="#ref_MacProjDownload">
		    Getting the Toolkit sources</a>
		  <li> <a href="#ref_MacProjTree">
		    Building the whole NCBI C++ tree locally</a>
	   </ul>
      </li>
	 </ul>
</ul>

<p>
This page describes how to get the NCBI C++ sources, and how to
configure/deploy a build directory with the <i>ncbiconf.h</i> header and
all makefiles configured to work on the specified platform with
the specified compiler (and other tools) and flags.

<br></br>
<a name="ref_Source"></a>
<h2>NCBI C++ source code repository</h2>

<p>
The NCBI C++ Toolkit sources and data can be
<a href="new_proj.html#ref_Checkout">retrieved</a> from the internal NCBI
CVS tree -- either directly from <i><b>"$CVSROOT/internal/c++/"</b></i>, or using
auxiliary scripts <b><i>scripts/cvs_core.sh</i></b></a> and
<b><i>scripts/cvs_core_msvc.bat</i></b>.

The resultant <a href="src_tree.gif"><i>NCBI C++  source tree</i></a> will contain:
<ul>
  <li> set of files needed for the platform-specific
		 <a href="#ref_Running">configuration and installation</a>:
       <ul>
         <li>  <i><b>configure</b></i> -- a multi-platform configuration shell
               script (generated from template <i>configure.in</i> using
               <a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">
               autoconf</a>)
         <li>  various scripts and template files used by
               <i><b>configure</b></i>,
               <a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">
               autoconf</a> and
               <a href="http://sunland.gsfc.nasa.gov/info/autoconf/Invoking_autoheader.html"> autoheader</a>
         <li>  <i><b>compilers/</b></i> -- directory containing
               <a href="#ref_Wrappers">
               compiler-specific <b><i>configure</i></b> wrappers</a>
               (<i>*.sh</i>) and
               <a href="#ref_PreBuiltHeaders">
               pre-built configuration headers</a>
               (<i>ncbiconf.*</i>) for some platforms
       </ul>

  <li> <i><b>doc/</b></i> -- NCBI C++ documentation, manuals (including
       this one, <i>doc/config.html</i>) and guidelines
       for <b>everybody</b> writing on C++ in NCBI SWG

  <li> <i><b>scripts/</b></i> -- auxiliary scripts, such as
		  <a href="new_proj.html#ref_OutsideImport">
			 <b><i>import_project.sh</i></b></a>,
		  <a href="new_proj.html#ref_OutsideCreate">
			 <b><i>new_project.sh</i></b></a>,
		  <a href="new_proj.html#ref_Checkout">
			 <b><i>cvs_core.sh</i></b></a>,
        etc.

  <li> <i><b>src/</b></i> -- a hierarchical directory tree of
       <a href="new_proj.html">NCBI C++ projects</a>. Here go
       all source files (<i>*.cpp, *.c</i>), private header and inline files
       (<i>*.hpp, *.inl, *.h</i>), makefiles (<i>Makefile.*</i>, including
       <a href="new_proj.html#ref_MakeProjMk"><i>Makefile.mk</i></a>),
       scripts (<i>*.sh</i>), and maybe some project-specific data

  <li> <i><b>include/</b></i> -- a hierarchical directory tree whose
       structure mirrors the <i><b>src/</b></i> directory tree. It
       contains only public header and inline files (<i>*.hpp, *.inl, *.h</i>).
       <br><i>Example:</i> <i><b>include/corelib/</b></i> contains public headers for the sources
       located in <i><b>src/corelib/</b></i>
</ul>


<a name="ref_Configure"></a>
<h2>Configuration and installation script <b><i>configure</i></b></h2>

<p>
Different compilers compile C++ (and even C!) code differently --
they may vary in the OS standard libraries and header files,
completeness of the C++ implementation, and... in compiler bugs.
There are also different <b>make</b> and other tools and
file naming conventions on different platforms.

<p>
Thus, a configuration is needed to encounter the platform-
and compiler-specific features.
For this purpose, we are using the GNU
<a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">autoconf</a> 
utility to automatically generate compiler-specific header file
<i>ncbiconf.h</i> and makefiles that would work for the given platform.

<p>
User performs both configuration and installation by merely running
platform-independent(<i>sh, bash</i>) shell script
<b><i>configure</i></b> (we pre-generate it in-house from template
<i>configure.in</i> using
<a href="http://sunland.gsfc.nasa.gov/info/autoconf/Top.html">
autoconf</a>).

<p>
During the configuration process, many compiler features are tested,
and the results of this testing are recorded in the configuration header
<i>ncbiconf.h</i> by the means of C preprocessor variables. E.g., the
preprocessor variable <i>"NO_INCLASS_TMPL"</i> indicates whether the
compiler supports template class methods; another example of the information 
contained in <i>ncbiconf.h</i> are preprocessor variables used to
define <a href="types.html#ref_IntFixed">sized integer</a> and
<a href="types.html#ref_BigScalar"><i>BigScalar</i></a> types.

<p>
The <b><i>configure</i></b> script will create so-called
<a href="bld_tree.gif"><i>build tree</i></a>
-- a hierarchy of directories where
object modules, libraries and executables are to be built.
<br>
It will also configure all <i>*.in</i> template files located
in the NCBI C++  source tree(<b><i>src/</i></b>) and deploy
the resultant configured files in the relevant places of the
<a href="bld_tree.gif"><i>build tree</i></a>.

This way, all platform- and compiler-specific tools and flags will be "frozen"
inside the configured makefiles in the
<a href="bld_tree.gif"><i>build tree</i></a>.
And, the <i>ncbiconf.h</i> (described above, also configured for
the given compiler), will be put to the <b><i>inc/</i></b> sub-directory
of the resultant
<a href="bld_tree.gif"><i>build tree</i></a>.

<p>
User can create as many such build trees as he needs.  All these
trees would refer to just the same (origin) NCBI C++ 
<a href="src_tree.gif"><i>source tree</i></a> and <i>include tree</i>,
while each
<a href="bld_tree.gif"><i>build tree</i></a>
can contain its own (platform/compiler-specific)
<i>ncbiconf.h</i> header, and/or different set of compilation/linking/etc.
flags and tools ("frozen" in the makefiles, especially in
<a href="new_proj.html#ref_MakeProjMk"><i>Makefile.mk</i></a>).
This is to allow one to build
libraries and executables using different compilers and/or flags, yet from
the same sources, and in a uniform way.


<br></br>
<a name="ref_Build"></a>
<h2>Structure of the <i>build tree</i> produced by <b><i>configure</i></b></h2>

<p>
Each configuration process results in a new <i>build tree</i>.
The structure of the tree is as follows (see also in
<a href="bld_tree.gif">chart</a>):
<ul>
  <li> <i><b>inc/</b></i> -- contains
       <i>ncbiconf.h</i> configuration header generated by the
       <b><i>configure</i></b> script.
  <li> <i><b>build/</b></i> -- contains a hierarchy of directories that
       correspond to those in the <i><b>src/</b></i> (in NCBI C++ original
       sources). These directories will contain makefiles (<i>Makefile.*</i>)
       generated by the <b><i>configure</i></b> script from the makefile
       templates (<i>Makefile.*.in</i>) of corresponding project located in the
		 <i>source tree</i>.
       <br>
       The resultant scripts and makefile will keep referencies
       to the original NCBI C++ source directories.
       <br>
       There is a "very special" file
       <a href="new_proj.html#ref_MakeProjMk"><i>Makefile.mk</i></a>
       that contains all configured
       <a href="#ref_ToolsAndFlags">tools, flags</a>
       and
       <a href="#ref_Localization">local paths</a>.
       This file is usually included by other makefiles.
       <br>
       Later, all build results (object modules, libraries and executables
       as well as any auxiliary files and directories created during the build)
       will go exclusively into the <i>build tree</i>, and not
       to the original NCBI C++ source directories. This allows one to
       have several <i>build trees</i> that use just the same sources, but
       compile and link them with different flags and/or compilers.
  <li> <i><b>lib/</b></i> -- here go all public libraries built by the
       <i><b>build/</b></i>-located projects.
  <li> <i><b>bin/</b></i> -- here go all public executables built by the
       <i><b>build/</b></i>-located projects.
  <li> <i><b>status/</b></i> -- contains cache (<i>config.cache</i>),
       log file (<i>config.log</i>), and secondary configuration script
       (<i>config.status</i>) produced by <b><i>configure</i></b> during
       the configuration process.
</ul>


<a name="ref_Running"></a>
<h2>Running the <b><i>configure</i></b> script</h2>

<p>
<a name="ref_GetHelp"></a>
<h4>Getting synopsis of available configuration options</h4>

To get the list of available configuration options, just run
<i><b>configure --help</b></i>.
You can see the NCBI-specific options at the very end of the printout.
<br>
<i>NOTE:</i> Do not use the "standard" <i><b>configure</b></i> options listed
in the <i>"Directory and file names:"</i> section of the help printout (such as
<i><b>--prefix=, --bindir=</b></i>, etc.), as they are not used by the NCBI
<i><b>configure</b></i> script.

<p>
<a name="ref_DebugVsRelease"></a>
<h4><i>Debug</i> vs. <i>Release</i> configuration</h4>

The following two <i><b>configure</b></i> flags control whether to target for
the <i>Debug</i> or <i>Release</i> version. These options (default is
<i><b>--with-debug</b></i>) control the appearance of preprocessor
flags <b>-D_DEBUG</b> and <b>-DNDEBUG</b>, and compiler/linker flags
<b>-g</b> and <b>-O</b>, respectively:
<ul>
  <li> <i><b>--with-debug</b></i> --
       engage <b>-D_DEBUG</b> and <b>-g</b>,
       <br>strip <b>-DNDEBUG</b> and <b>-O</b>
       (if not <i><b>--with-optimization</b></i>)
  <li> <i><b>--without-debug</b></i> --
       strip <b>-D_DEBUG</b> and <b>-g</b>,
       <br>engage <b>-DNDEBUG</b> and <b>-O</b>
		 (if not <i><b>--without-optimization</b></i>)
  <li> <i><b>--with-optimization</b></i> --
       unconditionally engage <b>-DNDEBUG</b> and <b>-O</b>
  <li> <i><b>--without-optimization</b></i> --
       unconditionally strip <b>-DNDEBUG</b> and <b>-O</b>
  <li> default: <i><b>--with-debug --without-optimization</b></i>
</ul>


<p>
<br>
<a name="ref_DLL"></a>
<h4>Building shared libraries (DLLs)</h4>

On the capable platforms, you can build libraries as <i>shared (dynamic)</i>.
<ul>
  <li> <i><b>--with-dll --with-static</b></i> --
       build libraries as both <i>dynamic</i> and <i>static</i>; <br>
		 however, if the library project makefile specifies
		 <a href="new_proj.html#ref_MakeProjLib"><i>LIB_OR_DLL = lib</i></a>,
       then build the library as <i>static</i> only, and if the
       library project makefile specifies
		 <a href="new_proj.html#ref_MakeProjLib"><i>LIB_OR_DLL = dll</i></a>
       then build the library as <i>dynamic</i> only. <br>
       Note that the resulting static libraries consist of
       position-independent objects.
  <li> <i><b>--with-dll</b></i> --
       build libraries as <i>dynamic</i>; <br>
		 however, if the library project makefile specifies
		 <a href="new_proj.html#ref_MakeProjLib"><i>LIB_OR_DLL = lib</i></a>,
       then build the library as <i>static</i>		  
  <li> <i><b>--without-dll</b></i> --
       always build <i>static</i> libraries, <br>
		 even if the library project makefile specifies
		 <a href="new_proj.html#ref_MakeProjLib"><i>LIB_OR_DLL = dll</i></a>
  <li> default:
       build libraries as <i>static</i>; <br>
		 however, if the library project makefile specifies
		  <a href="new_proj.html#ref_MakeProjLib"><i>LIB_OR_DLL = dll</i></a>,
       then build the library as <i>dynamic</i>
</ul>

We have succeeded in building NCBI C++ Toolkit libs as DLLs on at least
the following platforms:
<ul>
  <li> <a href="http://gcc.gnu.org/">
       <b>GCC 2.95.[1,2]</b></a>
    <ul>
      <li> Linux RedHat 5.2 and higher --- <i>PC-Intel</i> </li>
      <li> IRIX64 6.5 --- <i>SGI-Mips</i> </li>
      <li> Solaris 2.6, 2.7, 2.8 --- <i>SUN-Sparc</i> and <i>PC-Intel</i>
           (requires <i><b>libstd++.so</b></i>!) </li>
    </ul>
		</li>

  <li> <a href="http://gcc.gnu.org/">
       <b>GCC 3.0.1</b></a>
    <ul>
      <li> Linux RedHat 6.2 and higher --- <i>PC-Intel</i> </li>
      <li> Solaris 2.8 and higher --- <i>SUN-Sparc</i> </li>
    </ul>
		</li>

  <li> <a href="http://www.sun.com/workshop/visual/">
       <b>Sun WorkShop 5.0, 5.1, 5.2 and 5.3</b></a>
    <ul>
      <li> <i>All configurations listed in the <a href="#ref_Compilers">List of supported compilers</a>
				(see below)</i> </li>
    </ul>
  </li>

  <li> <u><b>MIPSpro 7.3.1.1m (-n32)</b></u>
    <ul>
      <li> IRIX64 6.5 --- <i>SGI-Mips</i> </li>
    </ul>
  </li>

  <li> <a href="http://www.kai.com/C_plus_plus/">
       <b>KAI C++ (KCC) 4.0</b></a>
    <ul>
      <li> Solaris 2.7 and higher --- <i>SUN-Sparc</i> </li>
      <li> Linux RedHat 6.2 --- <i>PC-Intel</i></li>
    </ul>

  <li> <a href="http://developer.intel.com/software/products/compilers/c50/linux/">
       <b>IntelC++ (ICC) 5.0 (beta)</b></a>
    <ul>
      <li> Linux RedHat 6.2 and higher --- <i>PC-Intel</i></li>
    </ul>
  </li>
</ul>

On any other platform, the <i><b>--without-dll</b></i> scenario will be
enforced unconditionally (even if you explicitly specified
<i><b>--with-dll</b></i>).


<p>
<br>
<a name="ref_RunPath"></a>
<h4>Hard-coding run-time DLL path into the executables and DLLs</h4>


In order to be able to <i>run</i> executables linked against
dynamic libraries (DLLs), you have to specify these DLLs' location
(<i>runpath</i>). It can be done by hard-coding (using linker flags like
<b>-R.....</b>) the <i>runpath</i> into the executables.
<ul>
  <li><i><b>--with-runpath</b></i> --
    hard-code the path to the <i><b>lib/</b></i> dir
    of the Toolkit <i>build tree</i> 
  </li>
  <li><i><b>--with-runpath=</b>/foo/bar</i> --
    hard-code the path to the user-defined <i><b>/foo/bar</b></i> dir
  </li>
  <li><i><b>--without-runpath</b></i> --
    do not hard-code any <i>runpath</i>
  </li>
  <li>default:
    if <i><b>--without-dll</b></i> flag is specified, then
    act as if <i><b>--without-runpath</b></i> was specified;
    otherwise engage the <i><b>--with-runpath</b></i> scenario.
  </li>
</ul>
<p>The preprocessor macro NCBI_RUNPATH will be set to the resulting
runpath, if any, as a (possibly empty) string.

<p><b>NOTE:</b>
You also can use environment variable <i>$LD_LIBRARY_PATH</i> to specify
the <i>runpath</i>, like this:
<pre>
  setenv LD_LIBRARY_PATH "/home/USERNAME/c++/WorkShop6-ReleaseDLL/lib"
  /home/USERNAME/c++/WorkShop6-ReleaseDLL/bin/coretest
</pre>


<b>HINT:</b>
The <i><b>--with-runpath=</b>....</i> option can be useful for the
building of production DLLs and executables, which are meant to use
production DLLs. The latter are usually installed <b>not</b> in the
<b><i>lib/</i></b> dir of your development tree (<i>build tree</i>),
but at some well-known dir of your production site.<br>

Thus, you can do the development in a "regular" manner (i.e.
in a <i>build tree</i> configured using just <i><b>--with-runpath</b></i>),
and then when you want to build a production version (which is to use lets say
DLLs installed in "/some_path/foo/") you must re-configure your
C++ build tree with just the same options as before, plus
"<i><b>--with-runpath=</b>/some_path/foo</i>", then re-build the DLLs and
executables and install them into production. <br>

Then you can re-re-configure your build tree back with its original flags
(without the "<i><b>--with-runpath=</b>/some_path/foo</i>"), and continue with
your development cycle, again using local in-tree DLLs.


<p>
<br>
<a name="ref_MT"></a>
<h4>Multi-Thread safe compilation, and linking with MT libraries</h4>

<ul>
  <li> <i><b>--with-mt</b></i> --
		  compile all code in an MT-safe manner; link with
        the system thread library
  <li> <i><b>--without-mt</b></i> --
		  compile with no regard to the MT-safety
<!-- ; also, unset makefile variable
		  <a href="#ref_TableLocalization"><b><i>$(THREAD_LIBS)</i></b></a> -->
  <li> default: <i><b>--without-mt</b></i>
</ul>



<p>
<br>
<a name="ref_64"></a>
<h4>Building in 64-bit mode</h4>

<ul>
  <li> <i><b>--with-64</b></i> --
		  compile all code and build executables in 64-bit mode
  <li> default: <i><b>--without-64</b></i>
</ul>



<p>
<br>
<a name="ref_GnuMakeAutodep"></a>
<h4>Automatic generation of dependencies (for GNU <i>make</i> only)</h4>

<ul>
  <li> <i><b>--with-autodep</b></i> --
		  add build rules to automagically generate dependencies for the
		  compiled C/C++ sources
  <li> <i><b>--without-autodep</b></i> --
		  do not add these rules
  <li>  default:  detect if the <i>make</i> command actually calls
		  GNU <i>make</i>;  if it does, then <i><b>--with-autodep</b></i>, else
		  <i><b>--with-autodep</b></i>
</ul>
Also, you can always switch between these two variants "manually", after
the configuration is done, by setting the value of variable
<i><b>Rules</b></i> in
<a href="new_proj.html#ref_MakeProjMk"><i>Makefile.mk</i></a>
to either <i><b>rules</b></i> or <i><b>rules_with_autodep</b></i>. 

<p>
NOTE: You <b>must</b> use GNU <i>make</i> if you configured with
<i><b>--with-autodep</b></i>, as in this case the makefiles would use
very specific GNU <i>make</i> features!


<p>
<br>
<a name="ref_NamingBuildTree"></a>
<h4>Naming the <i>build tree</i></h4>

The configuration process will produce the new <i>build tree</i>
in some default subdirectory of the root source directory, and the base name
of this subdirectory will reflect the compiler name and a <i>Release/Debug</i>
suffix, e.g.:  <i><b>GCC-Release/</b></i>. The default <i>build tree</i>
name can be alternated by passing the following flags to the
<i><b>configure</b></i> script:
<ul>
  <li> <i><b>--without-suffix</b></i> --
       do not add <i>Release/Debug</i>, <i>MT</i>, and/or <i>DLL</i> suffix(es)
       to the <i>build tree</i> name
       <br><i>Example:</i>
       <i><b>GCC/</b></i> instead of <i><b>GCC-ReleaseMT/</b></i>
  <li> <i><b>--with-hostspec</b></i> --
       add full host specs to the <i>build tree</i> name
       <br><i>Example:</i> <i><b>GCC-Debug--i586-pc-linux-gnu/</b></i>
  <li> <i><b>--exec-prefix=</b>/home/foo/bar</i> --
       specify your own <i>build tree</i> path and name
</ul>

With <i><b>--exec-prefix=</b></i> you still can explicitly use
<i><b>--with-suffix</b></i> and <i><b>--with-hostspec</b></i>
to add suffix(es) to your <i>build tree</i> name in a manner described above.
<br><i>Example:</i>
<i><b>--exec-prefix=</b>/home/foo/bar</i>
<i><b>--with-mt </b></i>
<i><b>--with-suffix</b></i>
would deploy the new <i>build tree</i> in
<i><b>/home/foo/bar-DebugMT</b></i>.

<p>
There is also a special case with "<i><b>--exec_prefix=</b>.</i>"
for those who prefer to put object files, libraries and executables to where
the sources are located. But be advised that this will disallow you
to configure for other <i>build trees</i>.

<p>
<br>
<a name="ref_AfterConf"></a>
<h4>After-configure user callback script</h4>

You can specify your own script to call from the <i>configure</i>
script after the configuration is complete:
<ul>
  <li> <i><b>--with-extra-action=</b>"&lt;some_action&gt;"</i>
</ul>
where <i>&lt;some_action&gt;</i> can be some script with parameters.
The trick here is that in the &lt;some_action&gt; string, all
occurrences of "<i>{}</i>" will be replaced by the build dir name.
<br><i>Example:</i>
<br>&nbsp;&nbsp;&nbsp;<i>configure <b>--with-extra-action=</b>"echo foobar {}"</i>
<br>will execute (after the configuration is done):
<br>&nbsp;&nbsp;&nbsp;<i>echo foobar /home/user/c++/GCC-Debug</i>.


<p>
<br>
<a name="ref_ToolsAndFlags"></a>
<h4>Tools and flags</i></h4>

There is a predefined set of tools and flags used in the build process.
User can alternate these tools and flags by setting the following
environment variables for the <b><i>configure</i></b> script.

<br></br>
<a name="ref_TableToolsAndFlags"></a>
<table border=1 cellspacing=0>
  <tr>
	 <th>Name</th>
	 <th>Default</th>
	 <th>Synopsis</th>
  </tr>

  <tr>
	 <td><b>CC</b></td>
	 <td><i>gcc, cc</i></td>
	 <td>C compiler</td>
  </tr>

  <tr>
	 <td><b>CXX</b></td>
	 <td><i>c++, g++, gcc, CC, cxx, cc++</i></td>
	 <td>C++ compiler, also being used as a linker</td>
  </tr>

  <tr>
	 <td><b>CPP</b></td>
	 <td><i>$CC -E</i></td>
	 <td>C preprocessor</td>
  </tr>

  <tr>
	 <td><b>CXXCPP</b></td>
	 <td><i>$CXX -E</i></td>
	 <td>C++ preprocessor</td>
  </tr>

  <tr>
	 <td><b>AR</b></td>
	 <td><i>ar cru</i></td>
	 <td>Librarian</td>
  </tr>

  <tr>
	 <td><b>STRIP</b></td>
	 <td><i>strip</i></td>
	 <td>To discard symbolic info</td>
  </tr>

  <tr>
	 <td><b>CFLAGS</b></td>
	 <td><i>-g</i>
    <a href="#ref_DebugVsRelease">or/and/nor</a>
	 <i>-O</i></td>
	 <td>C compiler flags</td>
  </tr>

  <tr>
	 <td><b>CXXFLAGS</b></td>
	 <td><i>-g</i>
    <a href="#ref_DebugVsRelease">or/and/nor</a>
	 <i>-O</i></td>
	 <td>C++ compiler flags</td>
  </tr>

  <tr>
	 <td><b>CPPFLAGS</b></td>
	 <td><i>-D_DEBUG</i>
    <a href="#ref_DebugVsRelease">or/and/nor</a>
    <i>-DNDEBUG</i></td>
	 <td>C/C++ preprocessor flags</td>
  </tr>

  <tr>
	 <td><b>LDFLAGS</b></td>
	 <td>none</td>
	 <td>Linker flags</td>
  </tr>

  <tr>
	 <td><b>LIBS</b></td>
	 <td>none</td>
	 <td>Libraries to link to every executable</td>
  </tr>

  <tr>
	 <td><b>CONFIG_SHELL</b></td>
	 <td><i>/bin/sh</i></td>
	 <td>Command interpreter to use in the configuration scripts and makefiles
	     (it must be compatible with <b>sh</b>)</td>
  </tr>
</table>

<p>
<a href="new_proj.html#ref_MakeProjMk">Later</a>, these tools and flags will
be engaged in the makefiles:
<a name="ref_StdBuildRules"></a>
<ul>
  <li> To compile C sources:
    <br> <b><i>$(CC) -c $(CFLAGS) $(CPPFLAGS) .....</i></b>
  <li> To compile C++ sources:
    <br> <b><i>$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) .....</i></b>
  <li> To compose a library:
    <br> <b><i> $(AR)     </i></b> <i>libXXX.a xxx1.o xxx2.o xxx3.o .....</i> 
	 <br> <b><i> $(RANLIB) </i></b> <i>libXXX.a</i>
</i></b>
  <li> To link an executable:
    <br> <b><i>$(LINK) $(LDFLAGS) ..... $(LIBS)</i></b>
</ul>

For more info on these and other variables see in the
<a href="http://sunland.gsfc.nasa.gov/info/autoconf/Preset_Output_Variables.html">autoconf documentation</a>.
The specified tools and flags will then be "frozen" inside the makefiles of
<i>build tree</i> produced by this <b><i>configure</i></b> run.


<p>
<br>
<a name="ref_Localization"></a>
<h4>Localization for the system and third-party packages</h4>

<p>
There is some configuration info that usually cannot be guessed or detected
automatically, and thus in most cases it must be specified "manually" for
the given local host's working environment.

The following localization environment variables can be set in addition
to the "generic" ones
<a href="#ref_ToolsAndFlags">
<b>(CC, CXX, CPP, AR,RANLIB, STRIP, CFLAGS, CXXFLAGS, CPPFLAGS, LDFLAGS, LIBS)
</b></a>:

<br></br>
<a name="ref_TableLocalization"></a>
<table border=1 cellspacing=0>
  <caption>User-defined localization variables</caption>
  <tr>
	 <th>Name</th>
	 <th>Default</th>
	 <th>Synopsis</th>
  </tr>

  <tr>
	 <td><b>THREAD_LIBS</b></td>
	 <td><i>-lpthread</i></td>
	 <td>System thread library</td>
  </tr>

  <tr>
	 <td><b>NETWORK_LIBS</b></td>
	 <td><i>-lsocket -lnsl</i></td>
	 <td>System network libraries</td>
  </tr>

  <tr>
	 <td><b>MATH_LIBS</b></td>
	 <td><i>-lm</i></td>
	 <td>System math library</td>
  </tr>

  <tr>
	 <td><b>KSTAT_LIBS</b></td>
	 <td><i>-lkstat</i></td>
	 <td>System kernel statistics library</td>
  </tr>

  <tr>
	 <td><b>RPCSVC_LIBS</b></td>
	 <td><i>-lrpcsvc</i></td>
	 <td>System RPC services library</td>
  </tr>

  <tr>
	 <td><b>SYBASE_PATH</b></td>
	 <td><i>/netopt/Sybase/clients/current</i></td>
	 <td>Path to Sybase package
	 (but see <a name="ref_Sybase_NOTE">note</a> below)</td>
  </tr>

  <tr>
	 <td><b>FTDS_PATH</b></td>
	 <td><i>/netopt/Sybase/clients-mssql/current</i></td>
	 <td>Path to FreeTDS package</td>
  </tr>

  <tr>
	 <td><b>FASTCGI_PATH<br></b></td>
	 <td><i>$NCBI</i></td>
	 <td>Path to the in-house Fast-CGI client lib</td>
  </tr>

  <tr>
	 <td><b>WXWIN_PATH<br></b></td>
	 <td><i>$NCBI/wxwin</i></td>
	 <td>Path to the wxWindows package</td>
  </tr>

  <tr>
	 <td><b>NCBI_C_PATH</b></td>
	 <td><i>$NCBI</i></td>
	 <td>Path to the NCBI C Toolkit</td>
  </tr>

  <tr>
	 <td><b>NCBI_SSS_PATH</b></td>
	 <td><i>$NCBI/sss/BUILD</i></td>
	 <td>Path to the NCBI SSS package</td>
  </tr>

  <tr>
	 <td><b>NCBI_GEO_PATH</b></td>
	 <td><i>$NCBI/geo</i></td>
	 <td>Path to the NCBI GEO package</td>
  </tr>

  <tr>
	 <td><b>SP_PATH</b></td>
	 <td><i>$NCBI/SP</i></td>
	 <td>Path to the SP package</td>
  </tr>

  <tr>
	 <td><b>NCBI_PM_PATH</b></td>
	 <td><i>$NCBI/pubmed[64]</i></td>
	 <td>Path to the NCBI PubMed package</td>
  </tr>

  <tr>
	 <td><b>ORBACUS_PATH</b></td>
	 <td><i>$NCBI/corba/OB-4.0.1</i></td>
	 <td>Path to the ORBacus CORBA package</td>
  </tr>

</table>

<p>
<a name="ref_Sybase_NOTE"></a>
<b>Note:</b> It is also possible to make <b><i>configure</i></b> look
elsewhere for Sybase by means of <b><i>--with-sybase-local[=DIR]</i></b>.
If you specify a directory, it will override <b>SYBASE_PATH</b>;
otherwise, the default will change to
<i>/export/home/sybase/clients/current</i>, but <b>SYBASE_PATH</b>
will still take priority.
<p>
It is also possible to override <b>WXWIN_PATH</b> by
<b><i>--with-wxwin=DIR</i></b>, and <b>ORBACUS_PATH</b> by
<b><i>--with-orbacus=DIR</i></b>.
<p>
Based on the above, <b><i>configure</i></b> will derive the following variables
to use in the generated makefiles: 

<br></br>
<a name="ref_TableLocalization1"></a>
<table border=1 cellspacing=0>
  <caption>Derived localization variables for makefiles</caption>
  <tr>
	 <th>Name</th>
	 <th>Value</th>
	 <th>Used to...</th>
  </tr>

  <tr>
	 <td><i><b>THREAD_LIBS</b></i></td>
	 <td>$THREAD_LIBS</td>
	 <td>link with system thread lib</td>
  </tr>

  <tr>
	 <td><i><b>NETWORK_LIBS</b></i></td>
	 <td>$NETWORK_LIBS</td>
	 <td>link with system network libs</td>
  </tr>

  <tr>
	 <td><i><b>MATH_LIBS</b></i></td>
	 <td>$MATH_LIBS</td>
	 <td>link with system math lib</td>
  </tr>

  <tr>
	 <td><i><b>KSTAT_LIBS</b></i></td>
	 <td>$KSTAT_LIBS</td>
	 <td>link with system kernel stat lib</td>
  </tr>

  <tr>
	 <td><i><b>RPCSVC_LIBS</b></i></td>
	 <td>$RPCSVC_LIBS</td>
	 <td>link with system RPC lib</td>
  </tr>

  <tr>
	 <td><i><b>SYBASE_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$SYBASE_PATH<i>/include</i></td>
	 <td><i>#include</i> Sybase headers</td>
  </tr>

  <tr>
	 <td><i><b>SYBASE_LIBS</b></i></td>
	 <td><i><b>-L</b></i>$SYBASE_PATH<i>/lib[64] <br>
       <b>-l</b>blk[_r][64] <b>-l</b>ct[_r][64] <b>-l</b>cs[_r][64] <br>
       <b>-l</b>tcl[_r][64] <b>-l</b>comn[_r][64] <b>-l</b>intl[_r][64]
    </i></td>
	 <td>link with Sybase libs</td>
  </tr>

  <tr>
	 <td><i><b>SYBASE_DLLS</b></i></td>
	 <td><i><b>-l</b>tli[_r][64]</i></td>
	 <td>Sybase DLL-only libs</td>
  </tr>

  <tr>
	 <td><i><b>SYBASE_DBLIBS</b></i></td>
	 <td><i><b>-L</b></i>$SYBASE_PATH<i>/lib[64] <br>
       <b>-l</b>sybdb[64]
		</i></td>
	 <td>link with Sybase DB Lib API</td>
  </tr>

  <tr>
	 <td><i><b>FTDS_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$FTDS_PATH<i>/include</i></td>
	 <td><i>#include</i> FreeTDS headers</td>
  </tr>

  <tr>
	 <td><i><b>FTDS_LIBS</b></i></td>
	 <td><i><b>-L</b></i>$FTDS_PATH<i>/lib <br>
       <b>-l</b>sybdb <b>-l</b>tds
		</i></td>
	 <td>link with the FreeTDS API</td>
  </tr>

  <tr>
	 <td><i><b>FASTCGI_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$FASTCGI_PATH<i>/include[64]</i></td>
	 <td><i>#include</i> Fast-CGI headers</td>
  </tr>

  <tr>
	 <td><i><b>FASTCGI_LIBS</b></i></td>
	 <td><i><b>-L</b></i>$FASTCGI_PATH<i>/lib[64] <b>-l</b>fcgi</i>
        <br> or <br>
        <i><b>-L</b></i>$FASTCGI_PATH<i>/altlib[64] <b>-l</b>fcgi</i> </td>
	 <td>link with Fast-CGI lib</td>
  </tr>

  <tr>
	 <td><i><b>WXWIN_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$WXWIN_PATH<i>/include</i></td>
	 <td><i>#include</i> wxWindows headers</td>
  </tr>

  <tr>
	 <td><i><b>WXWIN_LIBS</b></i></td>
	 <td><i><b>-L</b></i>$WXWIN_PATH<i>/[GCC-]{Release|Debug}/lib <br>
        <b>-l</b>wx_gtk[d]</i>  <b>-l</b>gtk</i>  <b>-l</b>gdk</i>  <b>-l</b>gmodule</i>  <b>-l</b>glib</i>
        <br> or <br>
        <i><b>-L</b></i>$WXWIN_PATH<i>/lib ..... </td>
	 <td>link with wxWindows libs</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_C_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$NCBI_C_PATH<i>/include[64]</i></td>
	 <td><i>#include</i> NCBI C Toolkit headers</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_C_LIBPATH</b></i></td>
	 <td><i><b>-L</b></i>$NCBI_C_PATH<i>/lib[64]</i>
        <br> or <br>
        <i><b>-L</b></i>$NCBI_C_PATH<i>/altlib[64]</i></td>
	 <td>path to NCBI C Toolkit libs</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_C_ncbi</b></i></td>
	 <td><i><b>-l</b>ncbi</i></td>
	 <td>NCBI C Toolkit CoreLib</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_SSS_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$NCBI_SSS_PATH<i>/include</i></td>
	 <td><i>#include</i> NCBI SSS headers</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_SSS_LIBPATH</b></i></td>
	 <td><i><b>-L</b></i>$NCBI_SSS_PATH<i>/lib/.... <br>
					 ....{Release|Debug}[GNU][64][mt]</i>
    </td>
	 <td>link with NCBI SSS libs</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_GEO_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$NCBI_GEO_PATH<i>/include</i></td>
	 <td><i>#include</i> NCBI GEO headers</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_GEO_LIBPATH</b></i></td>
	 <td><i><b>-L</b></i>$NCBI_GEO_PATH<i>/lib/.... <br>
					 ...[GCC-|KCC-|ICC-]{Release|Debug}[64]</i>
    </td>
	 <td>link with NCBI GEO libs</td>
  </tr>

  <tr>
	 <td><i><b>SP_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$SP_PATH<i>/include</i></td>
	 <td><i>#include</i> SP headers</td>
  </tr>

  <tr>
	 <td><i><b>SP_LIBS</b></i></td>
	 <td><i><b>-L</b></i>$SP_PATH<i>/{Release|Debug}[MT][64] <br>
           <b>-l</b>sp</i></td>
	 <td>link with the SP lib</td>
  </tr>

  <tr>
	 <td><i><b>NCBI_PM_PATH</b></i></td>
	 <td>$NCBI_PM_PATH</td>
	 <td>path to the PubMed package</td>
  </tr>

  <tr>
	 <td><i><b>ORBACUS_INCLUDE</b></i></td>
	 <td><i><b>-I</b></i>$ORBACUS_PATH<i>/include</i><br>
         <i><b>-I</b></i>$ORBACUS_PATH<i>/{Release|Debug}[MT][64]/inc</i></td>
	 <td><i>#include</i> ORBacus CORBA headers</td>
  </tr>

  <tr>
	 <td><i><b>ORBACUS_LIBPATH</b></i></td>
	 <td><i><b>-L</b></i>$ORBACUS_PATH<i>/{Release|Debug}[MT][64]/lib</i>
    </td>
	 <td>link with ORBacus CORBA libs</td>
  </tr>

</table>

<p>
<br>
<a name="ref_ProhibitPackage"></a>
<h4>Prohibiting the use of some of the system and third-party packages</h4>

<p>
Some of the above system and third-party packages can
be prohibited to use -- using the following <b><i>configure</i></b>
flags:

<ul>
  <li> <i><b>--without-sybase</b></i> (Sybase) </li>
  <li> <i><b>--without-ftds</b></i> (FreeTDS) </li>
  <li> <i><b>--without-fastcgi</b></i> (Fast-CGI) </li>
  <li> <i><b>--without-wxwin</b></i> (wxWindows) </li>
  <li> <i><b>--without-ncbi-c</b></i> (NCBI C Toolkit) </li>
  <li> <i><b>--without-sssdb</b></i> (NCBI SSS DB) </li>
  <li> <i><b>--without-sssutils</b></i> (NCBI SSS UTILS) </li>
  <li> <i><b>--without-sss</b></i>
		  (both <i><b>--without-sssdb</b></i> and <i><b>--without-sssutils</b></i>) </li>
  <li> <i><b>--without-geo</b></i> (NCBI GEO) </li>
  <li> <i><b>--without-sp</b></i> (NCBI SP) </li>
  <li> <i><b>--without-pubmed</b></i> (NCBI PubMed) </li>
  <li> <i><b>--without-orbacus</b></i> (ORBacus CORBA) </li>
</ul>


<p>
<br>
<a name="ref_Optional"></a>
<h4>Optional projects</h4>

<p>
You can control whether to build the following core packages
using the following <b><i>configure</i></b> flags:
<ul>
  <li> <i><b>--without-serial</b></i> --
		  do not build C++ ASN.1 serialization library and
		  <a href="tools/datatool/datatool.html">datatool</a>;
		  <br> see in <i><b>internal/c++/{
				<a href="lxr/source/src/serial">src</a>
				|
				<a href="lxr/source/include/serial">include</a>
				}/serial</b></i> directories
  </li>
  <li> <i><b>--without-ctools</b></i> --
		  do not build projects that use NCBI C Toolkit
		  <br> see in <i><b>internal/c++/{
				<a href="lxr/source/src/ctools">src</a>
				|
				<a href="lxr/source/include/ctools">include</a>
				}/ctools</b></i> directories
  </li>
  <li> <i><b>--without-gui</b></i> --
		  do not build projects that use wxWindows GUI package
		  <br> see in <i><b>internal/c++/{
				<a href="lxr/source/src/gui">src</a>
				|
				<a href="lxr/source/include/gui">include</a>
				}/gui</b></i> directories
  </li>
</ul>

<ul>
  <li> <i><b>--with-objects</b></i> --
		  generate and build libraries to serialize ASN.1 objects;
		  <br> see in <i><b>internal/c++/{
				<a href="lxr/source/src/objects">src</a>
				|
				<a href="lxr/source/include/objects">include</a>
				}/objects</b></i> directories
  </li>
  <li> <i><b>--with-internal</b></i> --
		  build of internal projects is by default disabled on most platforms;
		  <br> see in <i><b>internal/c++/{
				<a href="lxr/source/src/internal">src</a>
				|
				<a href="lxr/source/include/internal">include</a>
				}/internal</b></i> directories
  </li>
</ul>


<p>
<br>
<a name="ref_ProjectList"></a>
<h4>Finer-grained control of projects: <i>--with-projects</i></h4>

If the above options aren't specific enough for you, you can also tell
<tt>configure</tt> which projects you want to build by passing the
flag <i><b>--with-projects=FILE</b></i>, where <b>FILE</b> contains a
list of
<a href="http://www.ciser.cornell.edu/info/regex.html"><i>extended
regular expressions</i></a> indicating which directories to build in.
For instance, a file containing the lines <pre>
corelib$
util
</pre>
would request a non-recursive build in corelib and a recursive build
in util.  With this option, the <tt>make</tt> target <tt>all_p</tt>
will build all selected projects under the current directory.
<p>
<b>NOTE:</b> The flags listed <a href="#ref_Optional">above</a> still
apply; for instance, you still need <i><b>--with-internal</b></i> to
enable internal projects.

<br>
<a name="ref_Misc"></a>
<h4>Miscellaneous: <i>--without-exe, --without-execopy, --with-lib-rebuilds(=ask)</i></h4>

<ul>
  <li> <i><b>--without-exe</b></i> --
		  do not build the executables enlisted in the <i>APP_PROJ</i>
  <li> <i><b>--without-execopy</b></i> --
		  do not copy (yet build) the executables enlisted in the <i>APP_PROJ</i>
  <li> <i><b>--with-lib-rebuilds</b></i> --
          When building an application, attempt to rebuild all of the
          libraries it uses in case they are out of date.
  <li> <i><b>--with-lib-rebuilds=ask</b></i> --
          As above, but prompt before any needed rebuilds.  (Do not
          prompt for libraries that are up-to-date.)
</ul>

Here's a more detailed explanation of
<i><b>--with-lib-rebuilds</b></i>:  There are three modes of operation.
<ul>
<li> In the default mode (<i><b>--without-lib-rebuilds</b></i>),
  starting a build from within a subtree (such as internal) will not
  attempt to build anything outside of that subtree.

<li> In the unconditional mode (<i><b>--with-lib-rebuilds</b></i>),
  building an application will make the system rebuild any libraries
  it requires that are older than their sources.  This can be useful
  if you have made a change that affects everything under objects but
  your project only needs a few of those libraries; in that case, you
  can save time by starting the build in your project's directory
  rather than at the top level.

<li> The conditional mode (<i><b>--with-lib-rebuilds=ask</b></i>) is like the
  unconditional mode, except that when the system discovers that a
  needed library is out of date, it asks you about it.  You can then
  choose between keeping your current version (because you prefer it
  or because nothing relevant has changed) and building an updated
  version.
</ul>


<p>
<br>
<a name="ref_Wrappers"></a>
<h4>Compiler-specific <b><i>configure</i></b> wrappers</h4>

<p>
Most of the non-GCC compilers require special tools and additional
mandatory flags to compile and link C++ code properly. That's why we
have to have special scripts that perform the required non-standard
compiler-specific pre-initialization for the used
<a href="#ref_ToolsAndFlags">tools and flags</a> before running
<b><i>configure</i></b>.
<br>
These wrapper scripts are located in the <i><b>compilers/</b></i>
directory, and now we have such wrappers for SUN WorkShop (5.0, 5.1 and 5.2)
MIPSpro 7.3, GCC/Cygwin-NT, KCC, and MSVC++ compilers:
  <ul>
    <li> <i><b>WorkShop.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>WorkShop5.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>WorkShop6.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>WorkShop52.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>MIPSpro73.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>KCC.sh</b></i> {32|64} [build_dir] [--configure-flags]
    <li> <i><b>ICC.sh</b></i> [build_dir] [--configure-flags]
    <li> <i><b>gcc_nt.bash</b></i> [--configure-flags]
    <li> <i><b>msvc_nt.bash</b></i> [--configure-flags]
  </ul>
Note, that these scripts accept all regular <b><i>configure</i></b> flags
and then pass them to the <b><i>configure</i></b> script.


<p>
<br>
<a name="ref_PreBuiltHeaders"></a>
<h4>Pre-built configuration headers</h4>

<p>
Although it is possible to run <b><i>configure</i></b> under Windows NT,
(as we do for the MSVC++ compiler), however it requires having a
<i>sh</i>-compatible command interpreter installed on your PC.
In-house, we run <i><b>msvc_nt.bash</b></i> using 
<a href="http://www.lns.cornell.edu/public/COMP/info/bash/bashref_toc.html">
<i>bash</i></a> in the
<a href="http://sourceware.cygnus.com/cygwin/">CYGWIN</a>
environment.

<p>
As soon as most of NT users do not usually "play" with the extensions
like <i>bash/CYGWIN</i> on their PCs but just want to use MSVC++
Development Studio, so there is a pre-build configuration header
for MSVC++ 6.0:
<i><b>compilers/ncbiconf.ms6</b></i>.

MSVC++ users can use this header and a ready-to-use hierarchy of
<a href="#ref_MsvcProj">projects for the MS Visual C++ Studio</a>.

<p>
The same is for Mac Metrowerks CodeWarrior on PowerPC --
we have a manually maintained <i><b>compilers/ncbiconf.mac</b></i>
(however we dont have a ready-to-use Mac-specific project tree).


<p>
<br>
<a name="ref_Reconf"></a>
<h2>Quick reconfiguration</h2>


<p>
Sometimes, you change or add <i>configurables</i> (<i><b>*.in</b></i>
files, such as <i><b>Makefile.in</i></b> meta-makefiles) in the <i>source tree</i>.

<p>
For the <i>build tree</i> to pick up these changes,
go to the appropriate build directory and run script <i><b>reconfigure.sh</i></b>.
It will automagically use just the same command-line arguments that you
used for the original configuration of that <i>build tree</i>.

<p>
Run <i><b>reconfigure.sh</i></b> with argument:
<ul>
		<li> <b>update</b> --
		  if you did not add or remove any <i>configurables</i> in the
		  <i>source tree</i>, but only modified some of them.
		</li>

		<li> <b>reconf</b> --
		  if you changed, added, and/or removed any <i>configurables</i> in
        the <i>source tree</i>.
		</li>

		<li> <b>recheck</b> --
		  if you also suspect that your working environment (compiler features,
		  accessibility of 3rd-party packages, etc.) might have changed since
		  your last (re)configuration of the <i>build tree</i>, and therefore you
		  do not want to use cached check results obtained during the last
		  (re)configuration.
		</li>
		<li> <i><b>without arguments</b></i> --
			 printout script usage info.
		</li>
</ul>

<p>
Example:
<pre>
    cd /home/foobar/c++/GCC-Debug/build
    ./reconfigure.sh reconf
</pre>

Naturally, <b>update</b> is the fastest of these methods,
<b>reconf</b> is slower, and <b>recheck</b> (which is an exact equivalent
of re-running <b><i>configure</i></b> script with the same command-line
arguments as were provided during the original configuration) is the slowest.


<p>
<br>
<a name="ref_Example"></a>
<h2>An example of configuration, installation and build</h2>

To retrieve, configure, install and build all available NCBI C++ projects:

<pre>
# Retrieve NCBI C++ sources from the NCBI CVS tree(e.g. to "cpp_foo/" dir)
cvs checkout -d ~/cpp_foo internal/c++


# Configure for WorkShop 5.0 compilers, then build recursively
cd ~/cpp_foo
compilers/WorkShop5.sh 32 my_build_dir

cd my_build_dir
make all_r


# Configure for GCC compiler, then build recursively
cd ~/cpp_foo
./configure

cd GCC-Debug
make all_r
</pre>


<br>
<a name="ref_Compilers"></a>
<h2>List of supported compilers</h2>

<p>
As for now, at least the following compilers give enough support
(as concerns to the C++ and STL implementation) to build NCBI C++
libraries and tools:
<ul>
  <li> <a href="http://gcc.gnu.org/">
       <b>GCC 3.0.1</b></a>
    <ul>
      <li> Linux RedHat 6.2 and higher --- <i>PC-Intel</i> </li>
      <li> Solaris 2.8 and higher --- <i>SUN-Sparc</i> </li>
    </ul>
		</li>

  <li> <a href="http://gcc.gnu.org/">
       <b>GCC 2.95.3</b></a>
    <ul>
      <li> Compaq Tru64 UNIX V5.1 --- <i>DEC-Alpha</i></li>
    </ul>
  </li>

  <li> <a href="http://gcc.gnu.org/">
       <b>GCC 2.95.[1,2,3]</b></a>
    <ul>
      <li> Solaris 2.7, 2.8 --- <i>SUN-Sparc</i> and <i>PC-Intel</i></li>
      <li> Linux RedHat 5.2 and higher --- <i>PC-Intel</i></li>
      <li> FreeBSD 4.1-RELEASE --- <i>PC-Intel</i></li>
      <li> OSF1 4.0 --- <i>DEC-Alpha</i> <br>
				<i>(Note:  we do not have it anymore, use Compaq Tru64 UNIX V5.1 since Mar 2001)</i> </li>
      <li> Compaq Tru64 UNIX V5.1 --- <i>DEC-Alpha</i></li>
      <li> IRIX64 6.5 --- <i>SGI-Mips</i></li>
    </ul>
  </li>

  <li> <a href="ftp://ftp.xraylith.wisc.edu/pub/khan/gnu-win32/cygwin/gcc-2.95/">
       <b>GCC 2.95</b></a>
    <ul>
      <li>
      Windows NT 4.0
      with <a href="http://sourceware.cygnus.com/cygwin/">CYGWIN</a> Beta 20.1 --- <i>PC-Intel</i> <br>
				<i>(Note:  has not been built for a long long time)</i>
      </li>
    </ul>
  </li>

  <li> <a href="http://www.sun.com/workshop/visual/">
       <b>Sun WorkShop 5.1 (Forte 6), 5.2, 5.3 </b></a>
    <ul>
      <li> 32/64-bit: Solaris 2.7, 2.8 --- <i>SUN-Sparc</i> <br>
				<i>(Note:  <b>ld</b> crashes on huge ~30M static executables in 64-bit Debug mode)</i> </li>
      <li> 32-bit: Solaris 2.7 --- <i>PC-Intel</i> </li>
    </ul>
  </li>

  <li> <a href="http://www.sun.com/workshop/visual/">
       <b>Sun WorkShop 5.0</b></a>
    <ul>
      <li> 32-bit: Solaris 2.6 and higher --- <i>SUN-Sparc</i> and <i>PC-Intel</i>
      <li> 64-bit: Solaris 2.6 and higher --- <i>SUN-Sparc</i> <br>
				<i>(Note:  has not been built for a long long time)</i>
    </ul>
  </li>

  <li> <u><b>MSVC++ 6.0 (SP3)</b></u>
    <ul>
      <li> Windows NT 4.0  --- <i>PC-Intel</i> </li>
    </ul>
  </li>

  <li> <u><b>MIPSpro 7.3.1.1m</b></u>
    <ul>
      <li> 32-bit (-n32): IRIX64 6.5 --- <i>SGI-Mips</i> </li>
      <li> 64-bit:  IRIX64 6.5 --- <i>SGI-Mips</i> </li>
    </ul>
  </li>

  <li> <u><b>Metrowerks CodeWarrior</b></u>
    <ul>
      <li> MacOS -- <i>PowerPC</i> </li>
    </ul>
  </li>

  <li> <a href="http://www.kai.com/C_plus_plus/">
       <b>KAI C++ (KCC) 4.0</b></a>
    <ul>
      <li> Solaris 2.7 and higher --- <i>SUN-Sparc</i> </li>
      <li> Linux RedHat 6.2 --- <i>PC-Intel</i></li>
    </ul>
  </li>

  <li> <a href="http://developer.intel.com/software/products/compilers/c50/linux/">
       <b>IntelC++ (ICC) 5.0 (beta)</b></a>
    <ul>
      <li> Linux RedHat 6.2 and higher --- <i>PC-Intel</i></li>
    </ul>
  </li>
</ul>

NOTE: Some projects are very platform-specific, and they cannot
be built for all of the supported platforms.
All such projects are located under the <i><b>internal/c++/{src|include}/internal/</b></i>
directories.


<p>
<br>
<a name="ref_AdHoc"></a>
<h2>Ad-hoc installations</h2>

<p>
<a name="ref_MsvcProj"></a>
<h3>MS Visual C++</h3>

<p>
<a name="ref_MsvcProjDownload"></a>
<h4>Getting the Toolkit sources</h4>

<p>


<p>
Suppose you are going to deploy the NCBI C++ tree to your local PC, in directory
<i><b>C:\cxx</b></i>. You can do it one of the following ways:
<ul>
		<li> do <a href="win_cvs.html">CVS checkout</a> of
		  <i><b>internal/c++</b></i>. This can be done right on your
		  PC, if you have installed CVS client there:
		  <br> <i>cvs checkout -d cxx internal/c++</i></li>
		<li> checkout only the core sources on your UNIX workstation by running (<a href="cvs_core_msvc.html">notes here</a>)
		  <br> <i>$NCBI/c++/scripts/cvs_core.sh cxx --msvc --without-cvs --with-objects</i>
		  <br> and then copy the whole resultant directory
		  <i><b>cxx</b></i> to your PC directory <i><b>C:\cxx</b></i></li>
		<li> if you have the Toolkit sources in the publicly distributed
		  self-extracting archive, then just expand the archive, and you are ready
		  to build any (or all) of MSVC++ project configurations.
		  The archive also contains pre-generated ASN classes.</li>
</ul>


<p>
<a name="ref_MsvcProjFiles"></a>
<h4>Working with NCBI C++ project files</h4>

Project files for NCBI C++ Toolkit are now generated automatically from the template project files,
which are kept in the CVS repository. Click <a href="msvc_prj.html">here</a> to know how this is done, or
if you wish to modify and/or add the NCBI C++ Toolkit project files.
There is a short summary:
<ul>
	<li>All project files in the CVS repository contain a single (<tt>DebugMT</tt>) configuration. This way, you can directly use
	<b><tt>cvs.exe</tt></b> on your PC and have project files checked out and in, just <a href="#ref_MsvcProjSettings">make
	sure</a> you work with single-configuration project files in <tt>DebugMT</tt> mode.</li>
	<li>The checked out project files can be checked in back to the CVS only if they contain exactly one configuration
		(<tt>DebugMT</tt>).</li>
	<li>Use script <a href="msvc_prj.html#all2one_sh"><i>all2one.sh</i></a> to convert any multi-configuration
	project file to a single configuration one.</li>
	<li>Use script <a href="msvc_prj.html#one2one_sh"><i>one2one.sh</i></a> to change configuration in any
	single-configuration project file (e.g. from <tt>ReleaseDLL</tt> to <tt>DebugMT</tt>).</li>
	<li>Use script <a href="msvc_prj.html#one2all_sh"><i>one2all.sh</i></a> to convert a single configuration
	(template) project file to the multi-configuration one (containing all of the following configurations:
	<tt>Debug</tt>, <tt>DebugMT</tt>, <tt>DebugDLL</tt>, <tt>Release</tt>, <tt>ReleaseMT</tt>, <tt>ReleaseDLL</tt>).</li>
</ul>

<p>
<a name="ref_MsvcProjTree"></a>
<h4>Building the whole NCBI C++ tree locally</h4>

<p>
Now, if you want to use MS Visual C++ IDE to work with these sources, then you have to do exactly the following:
<p>
<ul>
  <li>
  Go to directory <i><b>compilers</b></i> and run script <i><b>msvc_nt.bat</b></i>.
  (You can skip this step if you obtained your sources from the distributed
   self-extracting archive, or by <i>$NCBI/c++/scripts/cvs_core.sh cxx --msvc .....</i>)
  </li>
  <li>All MSVC++ project files are already adjusted to contain proper information about include file directories
  (using relative paths), thus no additional configuration required (<a href="old_msvc_ide_cnf.html">the old way</a> of
  configuring MSVC++ is deprecated, but still can be used).</li>
</ul>

<p>
After the installation is complete you can build the Toolkit projects in two different ways:
<ul>
	<li>Build the entire Toolkit from command line in batch mode: <i>chdir</i> to <i><b>compilers/msvc_prj</i></b>, and run batch
	file <a href="msvc_prj.html#all_bat"><i><b>all.bat</b></i></a> there (provided that <b><i>msdev.exe</i></b>
	is in your <tt>PATH</tt>).
	When run without arguments, it builds all available configurations of all available projects. Or,
	you can pass any combination of <tt>Debug</tt>, <tt>DebugMT</tt>, <tt>DebugDLL</tt>, <tt>Release</tt>, <tt>ReleaseMT</tt>,
	<tt>ReleaseDLL</tt> as batch file argument(s)
	to build all projects in the specified configurations only.</li>
	<li>Open Microsoft Developer Studio with workspace <i><b>compilers/msvc_prj/ncbi_cpp.dsw</b></i>, and build the
		following projects:
	<ul>
  		<li> <b>all</b> -- everything
  		<li> <b>all_core</b> -- all basic libraries and test applications
  		<li> <b>all_core_libs</b> -- all basic libraries
  		<li> <b>all_objects</b> -- all serialization libraries (as of now,
		  	providing for the serialization of NCBI ASN.1 objects), and their test applications
  		<li> <b>all_objects_libs</b> -- serialization libraries only
  		<li> <b>all_gui</b> -- all GUI stuff (libraries plus applications)
  		<li> <b>all_gui_libs</b> -- GUI libraries only
  		<li> <b>all_tools</b> -- non-graphics tools and their related libraries
  		<li> <b>all_tools_libs</b> -- non-graphics libraries only  		
  		<li> any single library and/or application -- other projects in this workspace</li>
   	</ul>
    	You can build <i>any</i> project in any of Debug and/or Release versions. To switch among Debug or
		Release configurations, use <i>"Build"/"Set active configuration..."</i> menu.
		<br>If the Toolkit tree was extracted by the script <i>cvs_core.sh</i> with option <i>--without-objects</i>,
		then the target <b>all</b> is made nearly equivalent to <b>all_core</b> because almost every other project requires
		serialization libraries (<i>objects</i>) to be present.
</ul>


<p>


<p>
<a name="ref_MsvcProjCXX"></a>
<h4>Using pre-built NCBI C++ Toolkit in your projects</h4>

<p>
If you don't want to build the whole NCBI C++ tree, but just
need to <i>use</i> the NCBI C++ Toolkit functionality in your own, separate projects,
there are pre-built libraries located at:
<ul>
	<li> <i>\\dizzy\public\cxx\<b>ReleaseMT</b></i> -- statically linked against standard Microsoft run-time library,
	MT-safe versions
	<li> <i>\\dizzy\public\cxx\<b>DebugMT</b></i> -- statically linked against standard Microsoft run-time library,
	MT-safe versions with debug information preserved
</ul>
along with the header and source files at:
<ul>
  <li> <i>\\dizzy\public\cxx\<b>include</b></i>
  <li> <i>\\dizzy\public\cxx\<b>src</b></i>
</ul>
<p>

The recommended way to refer to the include file directory is to put <i>\\dizzy\public\cxx\<b>include</b></i>
in <i>"Project"/"Settings..."</i>, tab <i>"C/C++"</i>, category <i>"Preprocessor",
</i>list <i>"Additional include directories"</i>.
<p>
You have to specify the used library name(s) in <i>"Project"/"Settings..."</i>, tab <i>"Link"</i>,
category <i>"Input"</i>, list <i>"Object/Library modules"</i>.
<br>
You also have to put the correct path to the libraries (either <i>\\dizzy\public\cxx\<b>ReleaseMT</b></i>
or <i>\\dizzy\public\cxx\<b>DebugMT</b></i>, according to the configuration you are tuning)
in the field <i>"Additional library path"</i>.
<p>
No further configuration is necessary unless you want to trace and/or debug library sources.
Moreover, if one of <a href="msvc_prj.html#scripts">conversion scripts</a> is then applied to your project file, then
the proper links to required versions of the libraries are automatically maintained according to a chosen configuration.
<p>
If, however, you need to trace through the library source code, then you have to put
<i>\\dizzy\public\cxx\<b>src</b></i> to <i>"Tools"/"Options..."</i>, tab <i>"Directories"</i>,
list <i>"Source files"</i>.
<p>
In either case, don't forget to provide the right <a href="#ref_MsvcProjSettings">settings</a> for your project
to make sure that it is built compatible with the chosen NCBI C++ libraries.


<p>
<a name="ref_MsvcProjWxwin"></a>
<h4>Using wxWindows</h4>

<p>
The pre-built versions of this library (<a href="wxwin_setup.html">modified</a> to suit certain requirements),
along with include files, sources, documentation and project files,
which we provide, are all put to:
<ul>
  <li> <i>\\dizzy\public\wxwin\<b>Debug</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>DebugMT</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>DebugDLL</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>Release</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>ReleaseMT</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>ReleaseDLL</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>include</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>src</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>docs</b></i>
  <li> <i>\\dizzy\public\wxwin\<b>wxwin_prj</b></i>
</ul>
Your project has to specify all the library names (<b>tiff.lib jpeg.lib pnm.lib xpm.lib zlib.lib wx.lib</b>) in <i>"Project"/"Settings..."</i>, tab <i>"Link"</i>, category <i>"Input"</i>, list <i>"Object/Library modules"</i>.
Please note that although the wxWindows documentation instructs you to use *.lib in Release mode and *d.lib in Debug mode,
we renamed the libraries to have the same names in any configuration, but we keep them in separate directories.
Also note that in both <tt>ReleaseDLL</tt> and <tt>DebugDLL</tt> configurations, only one library
<b>wx.lib</b> is required to link your program dynamically with <b>wx.dll</b>. If <a href="msvc_prj.html#scripts">conversion
scripts</a> are later applied to your project file, then the proper set of the libraries is chosen automatically.
<br>
You also have to specify the correct path to the libraries (<i>\\dizzy\public\wxwin\</i><tt>[Debug|Release]*</tt>),
according to the configuration you are adjusting, in the field <i>"Additional library path"</i>.
<p>
Note that many programs that use wxWindows may require additional system libraries.
The list of known libraries includes (but not limited to) the following:
<b>advapi32.lib</b>, <b>comctl32.lib</b>, <b>comdlg32.lib</b>, <b>gdi32.lib</b>,
<b>ole32.lib</b>, <b>shell32.lib</b>, <b>user32.lib</b>, <b>winmm.lib</b>, <b>wsock32.lib</b>. And if the program
uses OpenGL graphics, the following two libraries definitely come in addition: <b>glu32.lib</b> and
<b>opengl32.lib</b>. All those libraries have to be listed in <i>"Objects/Library modules"</i> of
linker settings (as described earlier for wxWindows libraries).

<p>
We recommend that you put the include file directory <i>\\dizzy\public\wxwin\<b>include</b></i>
in <i>"Project"/"Settings..."</i>, tab <i>"C/C++"</i>, category <i>"Preprocessor"</i>,
list <i>"Additional include directories"</i>. You have to define all wxWindows-related preprocessor
symbols as required by wxWindows documentation (using <i>"Project"/"Settings..."</i>,  tab <i>"C/C++"</i>,
category <i>"General"</i>, list <i>"Preprocessor definitions"</i>). In particular <tt>__WXDEBUG__</tt> must be
defined in Debug configurations, and <tt>WXUSINGDLL</tt> - in DLL configurations.
The <a href="msvc_prj.html#scripts">conversion scripts</a> are aware of these symbols, and they make all necessary adjustments to keep these symbols consistent -- whenever you convert your project file(s).
<p>
No further configuration is necessary unless you want to trace and/or debug library sources.
Moreover, if one of <a href="msvc_prj.html#scripts">conversion scripts</a> is then applied to your project,
the proper links to required versions of the libraries are automatically maintained according to a chosen configuration.
<p>
If, however, you need to trace through the library source code, you have to put <i>\\dizzy\public\wxwin\<b>src</b></i>
to <i>"Tools"/"Options..."</i>, tab <i>"Directories"</i>, list <i>"Source files"</i>.
<p>
You may have a local copy of wxWindows package, which has to be installed in directory
<tt>wxwin</tt> at exactly the same level where the NCBI C++ Toolkit is installed (that is, their upper level
directories <tt>wxwin</tt> and <tt>cxx</tt> should appear in the same parent directory).
When using local copy of the wxWindows for <i>your</i> projects, you have to specify <i>relative</i> paths to include files,
libraries and sources instead of absolute paths, but exactly the same way as described above.
Do not use the "native" (shipped with wxWindows) project files to build the wxWindows libraries - they are not consistent with our projects.
Instead,
<ol>
	<li>Create directory <tt>wxwin/wxwin_prj</tt> and copy there
       (preserving the file layout) the contents of directory
       <i><b>wxwin_prj</b></i>. You can get this directory either
       from <i>\\dizzy\public\wxwin\<b>wxwin_prj</b></i> (NCBI network), or from
       <i>cxx\compilers\<b>wxwin_prj</b></i> (C++ Toolkit).
   </li>
	<li>Make sure that <tt>msdev.exe</tt> is in you <tt>PATH</tt>, then change directory to <tt>wxwin/wxwin_prj</tt>
	and start batch file <tt>wxwin.bat</tt> there. This script accepts one of the following arguments, <tt>DLL</tt>,
	<tt>LIB</tt>, or <tt>ALL</tt>:</li>
	<ul>
		<li><tt>DLL</tt>: build DLL versions of wxWindows libraries, and store them in <tt>wxwin/ReleaseDLL</tt>
			and <tt>wxwin/DebugDLL</tt> directories (for <tt>ReleaseDLL</tt> and <tt>DebugDLL</tt> configurations
			respectively).</li>
		<li><tt>LIB</tt>: build static versions of wxWindows libraries, and store them in directories
			<tt>wxwin/Debug</tt>, <tt>wxwin/DebugMT</tt>, <tt>wxwin/Release</tt>, and <tt>wxwin/ReleaseMT</tt>.</li>
		<li><tt>ALL</tt>: build everything listed above.</li>
		<br>
		Note that with both <tt>DLL</tt> and <tt>LIB</tt> options you may limit the build to be done only for
		certain configurations by listing the configuration names in the command line after the option.
	</ul>
	That is, the batch file builds libraries in the directories where <i>our</i> project files
	<a href="#refWxwinPaths">expect</a> to locate them when using local copies of the Toolkit libraries.
	<li>To get rid of the intermediate files created during wxWindows compilation and no longer needed,
		you can just remove the entire subtree <tt>wxwin/wxwin_prj</tt>.
</ol>

<p>
<a name="refWxwinPaths"></a>All <i>our</i> project files (which are provided for the projects
using wxWindows) contain both relative and absolute paths to, correspondingly, both local
(installed by you, as described above) and pre-built (<tt>\\DIZZY\public\wxwin</tt>) versions of libraries and
include files, in this order, i.e. the local copy (if any) takes precedence.
Moreover, if a project file is being commited to the CVS, and it has been
<a href="msvc_prj.html#commit_sh">detected</a> that the project refers to wxWindows library, then the paths
(both to include files and to libraries) are automatically canonicalized to point to these two locations.

<p>
As always, don't forget to provide the right <a href="#ref_MsvcProjSettings">compiler settings</a> for your project
to make sure that it is built compatible with the chosen libraries.


<p>
<a name="ref_MsvcProjC"></a>
<h4>Using NCBI C Toolkit</h4>

<p>
There are projects (such as <b>tool</b>, <b>xasn</b> and <b>xhist</b>) that engage the
<a href="http://sunweb.ncbi.nlm.nih.gov:6224/IEB/ncbi_toolbox/README.htm">NCBI C Toolkit</a>.
To build these, you have to have the NCBI C Toolkit libraries and
header files accessible from your PC, and you must specify path to them:
<ol>
<li>For libraries:</li>
<br><i>"Project"/"Settings..."</i>, tab <i>"Link"</i>, category <i>"Input"</i>, fields <i>"Object/Library modules"</i> and
<i>"Additional library path"</i>.
<li>For include files:</li>
<br><i>"Project"/"Settings..."</i>, tab <i>"C/C++"</i>, category <i>"Preprocessor"</i>,
list <i>"Additional include directories"</i>.
</ol>
For example, here are the paths to the automatically built C Toolkit:
<ul>
  <li> <i>\\dizzy\public\<b>include</b></i>
  <li> <i>\\dizzy\public\<b>altsrc</b></i>
  <li> <i>\\dizzy\public\<b>lib</b></i>
  <li> <i>\\dizzy\public\<b>dbglib</b></i>
</ul>

From now on, we maintain copies of production libraries (<b>lib</b>) in <i>\\dizzy\public\<b>ReleaseMT</b></i>, and
copies of debug libraries (<b>dbglib</b>) in <i>\\dizzy\public\<b>DebugMT</b></i>, and it's better to use exactly
these directories the same way, as explained earlier in <a href="#ref_MsvcProjCXX">"How to use pre-built NCBI C++ libraries"</a>.
For convenience and uniformity, a copy of the source code directory (<b>altsrc</b>) is now maintained in
<i>\\dizzy\public\<b>src</b></i>.
<p>
As in case with <a href="#refWxwinPaths">wxWindows</a> library, if the project that we provide
is using the NCBI C Toolkit, then the include files and libraries are referred by means of both
relative and absolute paths. If you are going to use your local copy of the NCBI C Toolkit, then
place it in directory <tt>ncbi</tt>, which must reside in the same directory, where the C++ Toolkit does
(i.e. <tt>ncbi</tt> and <tt>cxx</tt> subdirectories must appear in the same parent directory). Then, you have to copy the C Toolkit libraries to either
<tt>ncbi/ReleaseMT</tt> or <tt>ncbi/DebugMT</tt>
subdirectories (according to the configuration used).
Again, if a project file is being commited to the CVS and found to use the NCBI C Toolkit (either
locally, or via <tt>\\DIZZY\</tt>), then the project <a href="msvc_prj.html#commit_sh">automatically</a> gets
both paths (relative and absolute) for both include files and libraries.
<p>
Please refer to the following section for mandatory project settings.

<p>
<a name="ref_MsvcProjSettings"></a>
<h4>Mandatory project settings (RTTI, MT-safety)</h4>

<p>
When you compose your own, out-of-the-tree projects, which use pre-built C/C++ Toolkit or wxWindows
libraries (which are built in <b><i>MT-safe</i></b> mode, with <b>/MT</b> flag),
you have to make sure that your projects are built in MT-safe mode as well.
<br>In addition, many C++ projects use <i>Run-Time Type Info</i>.
<br>To meet these requirements, you must do the following in <i>"Project"/"Settings..."</i>, tab <i>"C/C++"</i>:
<ul>
  <li> Category <i>"C++ Language"</i>: Enable RTTI
  <li> Category <i>"Code generation"</i>:  Use run-time library:
    <ul>
      <li> <i>"Multithreaded"</i> for the <b>ReleaseMT</b> configuration
      <li> <i>"Debug Multithreaded"</i> for the <b>DebugMT</b> configuration
    </ul>
</ul>



<p>
<a name="ref_Mac"></a>
<h3>Macintosh</h3>

<p>
<a name="ref_MacProjDownload"></a>
<h4>Getting the Toolkit sources</h4>


<p>
Suppose you need to deploy the NCBI C++ tree to your local Mac, in directory
<i><b>cxx</b></i>. You can do it one of the following ways:
<ul>
		<li> do <a href="mac_cvs.html">CVS checkout</a> of
		  <i><b>internal/c++</b></i>. This can be done right on your
		  Mac, if you have installed CVS client there:
		  <br> <i>cvs checkout -d cxx internal/c++</i></li>
		<li> checkout only the core sources on your UNIX workstation by running
		  <br> <i>$NCBI/c++/scripts/cvs_core.sh cxx --mac --without-cvs --with-objects</i>
		  <br> and then copy the whole resultant directory
		  <i><b>cxx</b></i> to your local Mac directory <i><b>cxx</b></i></li>
		<li> if you have the Toolkit sources in the publicly distributed
		  self-extracting archive, then just expand the archive, and you are
        ready to build any (or all) of the Mac project configurations.
		  The archive also contains pre-generated ASN classes.</li>
</ul>


<p>
<a name="ref_MacProjTree"></a>
<h4>Building the whole NCBI C++ tree locally</h4>

The directions are <a href="config_mac.html">here</a>.


<br></br>
<hr>
<table border=0 width="100%" cellspacing=0>
<tr>
<td align=left>
  <address><a href="mailto:vakatov@ncbi.nlm.nih.gov">Denis Vakatov</a></address>
</td>
<!-- <td align=center><i>$Revision$</i></td> -->

<td align=right><i>$Date$</i></td>
</tr>
<tr>
<td align=left>
  <address><a href="mailto:lavr@ncbi.nlm.nih.gov">Anton Lavrentiev</a> (Part of MSVC++ support)</address> 
</td>
</tr>
</table>

<!--#include virtual="./ssi/footer.shtml" -->
