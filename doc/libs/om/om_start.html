<!--#set var="TITLE" value="NCBI C++ Object Manager library" -->
<!--#set var="DOCROOT" value="../.." -->
<!--#include virtual="../../ssi/header.shtml" -->


<div align="Center">
<h1>Setup the framework for the C++ <i>Object Manager</i> learning task</h1>
</div>

<h2>Starting point (UNIX)</h2>
<p>
To jump-start your first project utilizing the new C++
<var>Object Manager </var> in the C++ Toolkit framework on a UNIX platform,
we suggest using <tt>new_project.sh</tt> shell script, which creates
a sample application and a makefile:
</p>

<ol>
<li>
  Create a new project called <i>task</i> in the folder <i>task</i>
  using <tt>new_project.sh</tt> shell script (this will create the folder, the source file and the makefile):
  <pre>
  $NCBI/c++/scripts/new_project.sh <i>task</i> app/objmgr
  </pre>
</li>
<li>
  Build the sample project and run the application:
  <pre>
  cd <i>task</i>
  make -f Makefile.<i>task</i>_app
  ./<i>task</i> -gi 333
  </pre>
The output should look like this:
<pre>
  First ID:  emb|CAA23443.1|
  Sequence:  length=263,  data=MARFLGLCTW
  # of descriptions:  2
  # of features:
     [whole]           Any:    2
     [whole]           Genes:  0
     [0..9]            Any:    2
     [0..9, TSE-only]  Any:    2
  # of alignments:
     [whole]           Any:    0
  Done
</pre>
</li>
<li>
Now you can go ahead and convert the sample code in the <tt>task.cpp</tt>
into  the code that performs your learning task.
</li>
</ol>


<h2>Starting point (MS Windows)</h2>
<p>
To create a project, which utilizes the C++ <var>Object Manager </var>
in the C++ Toolkit framework on Microsoft Windows platform, do the following:
</p>
<ol>
  <li>In Microsoft Visual Studio create a new project/workspace:
  choose "Win32 Console Application", then "Empty project".
  </li>
  <li>
  Copy the source file (<tt>src\app\sample\objmgr\objmgr_sample.cpp</tt>) into
  the project directory, then add it to the project.
  </li>
  <li>
  Modify the project settings:
    <ul>
	  <li>Enable Run-time type information (in <tt>C/C++ - C++ language</tt>)
	  </li>
	  <li>Disable using precompiled headers (in <tt>C/C++ - Precompiled headers</tt>)
	  </li>
	  <li>Add additional include directory (in <tt>C/C++ - Preprocessor</tt>).
	  Here, at NCBI, it should be <tt>\\Dizzy\public\cxx\include</tt>,
      that is, the "root" of all includes.
	  </li>
	  <li>Add additional library path (<tt>Link-Input</tt>).
      Here, at NCBI it may be <tt>\\Dizzy\public\cxx\Debug</tt>. Please note,
	  this library path is configuration-dependent, that is it must be
	  different for each configuration you are going to build the project in.
	  </li>
	  <li>Remove all "standard" libraries in <tt>Link-Input-Object/library modules</tt>.
	  </li>
	  <li>Add socket library there: <tt>wsock32.lib</tt>
	  </li>
	  <li>Add NCBI libraries to the project:
	    <pre>
    objects_biblio.lib,
    objects_general.lib,
    objects_id1.lib,
    objects_medline.lib,
    objects_pub.lib,
    objects_seq.lib,
    objects_seqalign.lib,
    objects_seqblock.lib,
    objects_seqcode.lib,
    objects_seqfeat.lib,
    objects_seqloc.lib,
    objects_seqres.lib,
    objects_seqset.lib,
    xncbi.lib,
    xobjmgr.lib,
    xconnect.lib,
    xserial.lib,
    xutil.lib.
	    </pre>
	  </li>
	</ul>
  </li>
  <li>Build the project and run the application.
  </li>
</ol>





<h2>How to convert the test application into CGI one?</h2>
<p>
It is a good idea to create another application, based on your original test.
In order to do this:
</p>
<ol>
  <li>
  Create copy of the source (<i>task.cpp</i>) and makefile (<i>Makefile.task_app</i>)
  <pre>
  cp task.cpp <b>task_cgi.cpp</b>
  cp Makefile.task_app <b>Makefile.task_cgiapp</b>
  </pre>
  </li>
  <li>
  Edit the makefile for the CGI application (<i>Makefile.task_cgiapp</i>):
  change application name, name of the source file,  add <tt>cgi</tt> libraries:
  <pre>
  APP = <b>task.cgi</b>
  SRC = <b>task_cgi</b>
  LIB = xobjmgr id1 seqset $(SEQ_LIBS) pub medline biblio general \
      xser <b>xhtml xcgi</b> xutil xconnect xncbi
  LIBS = $(NCBI_C_LIBPATH) $(NCBI_C_ncbi) <b>$(FASTCGI_LIBS)</b> $(NETWORK_LIBS) $(ORIG_LIBS)
  </pre>
  </li>
  <li>
  Build the project (at this time it is not a CGI application yet):
  <pre>
  make -f Makefile.<i>task_cgiapp</i>
  </pre>
  </li>
  <li>
  Convert <i>task_cgi.cpp</i> into a CGI application.
  </li>
</ol>


<h2>How to convert CGI application into Fast-CGI one?</h2>
<p>
In the <tt>LIB=...</tt> section of <i>Makefile.task_cgiapp</i>, just
replace <tt>xcgi</tt> library by <tt>xfcgi</tt>:
  <pre>
  LIB = xobjmgr id1 seqset $(SEQ_LIBS) pub medline biblio general \
      xser xhtml <b>xfcgi</b> xutil xconnect xncbi
  </pre>
</p>

<!--#include virtual="../../ssi/navlinks.shtml" -->
<!--#include virtual="../../ssi/footer.shtml" -->
