#############################################################################
# $Id$
#############################################################################

NCBI_begin_app(bam_test)
  NCBI_sources(bam_test bam_test_common)
  NCBI_uses_toolkit_libraries(bamread xobjreadex xobjsimple)
  NCBI_project_watchers(vasilche ucko)

  NCBI_set_test_requires(in-house-resources)
  NCBI_begin_test(bam_test_no_index0)
    NCBI_set_test_command(bam_test -file NA10851.chrom20.ILLUMINA.bwa.CEU.low_coverage.20111114.bam -no_index -check_count 100000)
  NCBI_end_test()
  NCBI_begin_test(bam_test_no_index1)
    NCBI_set_test_command(bam_test -file NA10851.chrom20.ILLUMINA.bwa.CEU.low_coverage.20111114.bam -check_count 100000)
  NCBI_end_test()
  NCBI_begin_test(bam_test)
    NCBI_set_test_command(bam_test -file NA10851.chrom20.ILLUMINA.bwa.CEU.low_coverage.20111114.bam -refseq 20 -refpos 100000 -refwindow 100000 -check_count 15219)
  NCBI_end_test()
  NCBI_begin_test(bam_test2)
    NCBI_set_test_command(bam_test -file NA10851.chrom20.ILLUMINA.bwa.CEU.low_coverage.20111114.bam -refseq 20 -refpos 100000 -refwindow 100000 -by-start -check_count 15215)
  NCBI_end_test()
  NCBI_begin_test(bam_test3)
    NCBI_set_test_command(bam_test -refseq GL000207.1 -refpos 50 -refwindow 100 -check_count 2)
  NCBI_end_test()
  NCBI_begin_test(bam_test4)
    NCBI_set_test_command(bam_test -refseq GL000207.1 -refpos 50 -refwindow 100 -by-start -check_count 1)
  NCBI_end_test()
  NCBI_begin_test(bam_test_none)
    NCBI_set_test_command(bam_test -refseq GL000207.1 -refwindow 1 -check_count 0)
  NCBI_end_test()
  NCBI_begin_test(bam_test_none2)
    NCBI_set_test_command(bam_test -file 1k.unaligned.bam -check_count 0)
  NCBI_end_test()
  NCBI_begin_test(bam_test_none3)
    NCBI_set_test_command(bam_test -file header-only.bam -check_count 0)
  NCBI_end_test()
  NCBI_begin_test(bam_test_q_none)
    NCBI_set_test_command(bam_test -file 1k.unaligned.bam -refseq GL000207.1 -refwindow 1 -check_count 0)
  NCBI_end_test()
  NCBI_begin_test(bam_test_q_none2)
    NCBI_set_test_command(bam_test -file header-only.bam -refseq GL000207.1 -refwindow 1 -check_count 0)
  NCBI_end_test()
NCBI_end_app()

